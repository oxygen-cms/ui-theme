{"version":3,"sources":["util.js","Core/Dialog.js","Core/Dropdown.js","Core/EditableList.js","Core/Fetch.js","Core/Form.js","Core/MainNav.js","Core/Notification.js","Core/Preferences.js","Core/Slider.js","Core/SmoothState.js","Core/TabSwitcher.js","Core/Toggle.js","Core/Upload.js","Editor/CodeViewInterface.js","Editor/DesignViewInterface.js","Editor/Editor.js","Editor/PreviewInterface.js","Editor/SplitViewInterface.js","ImageEditor/ImageEditor.js","login.js","app.js"],"names":["parentMatchingSelector","elem","selector","document","parentNode","matchesSelector","parentOrSelfMatchingSelector","NodeList","prototype","Symbol","iterator","Array","HTMLCollection","matchesMethod","ElemProto","Element","matches","prefixes","i","length","prefix","method","Dialog","container","querySelectorAll","item","addEventListener","handleConfirmClick","handleAlertClick","event","vex","dialog","alert","currentTarget","getAttribute","customConfig","target","defaultConfig","preventDefault","stopPropagation","stopImmediatePropagation","message","callback","value","setAttribute","click","attribute","confirm","Dropdown","handleGlobalClick","classes","dropdownToggle","handleClick","c","classList","contains","dropdown","querySelector","dropdownList","isActive","remove","reset","add","EditableList","getElementsByClassName","handleAdd","handleRemove","template","template2","cloneNode","appendChild","row","removeChild","console","log","window","Oxygen","FetchOptions","headers","Headers","set","type","body","credentials","cookies","respond","text","response","json","checkStatus","ok","error","Error","notification","data","Notification","isNotification","NotificationCenter","present","redirect","smoothState","hardRedirect","load","location","replace","handleAPIError","Response","then","err","content","status","file","line","Form","formObject","$","find","taggableInput","tagging","handleKeydown","ctrlKey","metaKey","which","forms","getElementsByTagName","form","submitOnKeydown","submit","element","originalData","getFormData","contentGenerators","registerEvents","warnBeforeExit","handleExit","handleSubmit","submitAsyncOnChange","submitAsync","autoSubmit","generateContent","original","current","compareByValue","messages","confirmation","buttons","className","$vexContent","close","id","extend","NO","generator","disableAsync","ignoreRedirectResponse","saveData","promise","fetch","action","getFormDataObject","wantJson","modifyPromise","undefined","checked","name","dir","options","option","selected","push","ref","files","filesToUpload","endsWith","formData","FormData","key","append","obj1","obj2","p","hasOwnProperty","toString","altKey","controlKey","MainNav","header","innerWidth","headroom","Headroom","init","notifications","registerHide","hideAfter","auto","setTimeout","hide","clearTimeout","node","createElement","innerHTML","JSON","stringify","obj","Preferences","preferences","o","fallback","isDefined","parts","split","l","idx","last","pop","Slider","selectors","slider","list","items","interval","previousId","currentId","nextId","animating","animationTime","next","play","back","previous","bind","forward","timer","setInterval","clearInterval","isHidden","shouldAnimate","getItem","hideAll","slideOutLeft","slideInRight","slideOutRight","slideInLeft","isCurrent","isAfter","noTransition","SmoothState","loading","anchors","root","cacheLength","onStart","duration","render","onProgress","onReady","onAfter","scrollTop","elements","blocks","slice","call","reverse","block","setCursor","style","display","html","getElementById","url","mode","cursor","links","theme","page","TabSwitcher","tabs","findDefault","tab","setTo","forEach","active","Toggle","toggle","enableCallback","disableCallback","handleToggle","ifEnabled","ifDisabled","FullscreenToggle","fullscreenElement","enterFullscreenCallback","exitFullscreenCallback","enterFullscreen","exitFullscreen","documentElement","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","mozCancelFullScreen","webkitExitFullscreen","Upload","uploadElement","dropzone","dropzoneElement","handleDragOver","handleDragLeave","handleDrop","handleChange","states","onDragOver","upload","addFiles","dataTransfer","input","imageType","preview","fileSize","size","insertBefore","firstChild","removeFile","button","index","previewElement","indexOf","splice","recalculateDropzoneVisibility","test","reader","FileReader","onload","e","backgroundImage","result","readAsDataURL","icon","multiple","sizeInBytes","approx","multiples","output","toFixed","CodeViewInterface","editor","ace","object","edit","getSession","setMode","language","setTheme","get","setUseWrapMode","setHighlightActiveLine","setShowPrintMargin","setShowInvisibles","setReadOnly","readOnly","view","fontSize","full","Editor","state","width","resize","setValue","textarea","getValue","DesignViewInterface","ck","config","allowedContent","entities","protectedSource","contentsCss","stylesheets","CKEDITOR","dtd","$removeEmpty","on","setData","getData","editors","user","defaultMode","currentMode","handleSwitchEditor","handleFormSubmit","modes","fullscreenToggle","show","resizeToContent","switchEditor","valueToForm","m","getMode","code","design","PreviewInterface","SplitViewInterface","create","valueFromForm","height","rows","resizeToContainer","trace","editorToSwitch","footer","contentIsSplit","_token","srcdoc","synchronize","currentTimer","ImageEditor","jCropApi","cropDisableCounter","cropOrigin","x","y","image","layout","$image","simple","advanced","fields","crop","keepAspectRatio","macro","slug","imageAspectRatio","naturalWidth","naturalHeight","enableCropping","toggleFullscreen","apply","handlePreview","save","handleSave","handleCropInputChange","handleResizeInputChange","applyChanges","gatherData","progressNotification","getSimpleData","getAdvancedData","removeDefaultFields","defaults","pendingCropOrigin","parseInt","parse","applyingChanges","serializeToQueryString","blob","myBlob","destroy","objectURL","URL","createObjectURL","removeProperty","src","r","that","Jcrop","trueSize","onChange","handleCropSelect","onSelect","onRelease","handleCropRelease","Math","round","w","h","setSelect","ratio","Object","keys","reduce","a","k","encodeURIComponent","join","initLogin","loginForm","offsetHeight","setBodyScrollable","scrollable","initializeExistingMessages","initialize","findAll","createEditors","setPreferences","progressThemes","registerKeydownHandler","registerGlobalEvent"],"mappings":"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","file":"app.js","sourcesContent":["/**\n * Get closest DOM element up the tree matches the selector\n * @param  {Node} elem The base element\n * @param  {String} selector The selector to look for\n * @return {Node} Null if no match\n */\nvar parentMatchingSelector = function (elem, selector) {\n\n    // Get closest match\n    for ( ; elem && elem !== document; elem = elem.parentNode ) {\n\n        if(elem.matchesSelector(selector)) {\n            return elem;\n        }\n    }\n\n    return null;\n};\n\nvar parentOrSelfMatchingSelector = function (elem, selector) {\n    if(elem.matchesSelector(selector)) {\n        return elem;\n    }\n\n    // Get closest match\n    for ( ; elem && elem !== document; elem = elem.parentNode ) {\n\n        if(elem.matchesSelector(selector)) {\n            return elem;\n        }\n    }\n\n    return null;\n};\n\nNodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\nHTMLCollection.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\n\nvar matchesMethod = (function() {\n    var ElemProto = Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n        return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n        return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n        var prefix = prefixes[i];\n        var method = prefix + 'MatchesSelector';\n        if ( ElemProto[ method ] ) {\n            return method;\n        }\n    }\n})();\n\nElement.prototype.matchesSelector = function(selector) {\n    return this[matchesMethod](selector);\n};\n","// ================================\n//            AjaxRequest\n// ================================\n\nclass Dialog {\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(\"[data-dialog-type=\\\"confirm\\\"]\")) {\n            item.addEventListener(\"click\", Dialog.handleConfirmClick);\n        }\n        for(let item of container.querySelectorAll(\"[data-dialog-type=\\\"alert\\\"]\")) {\n            item.addEventListener(\"click\", Dialog.handleAlertClick);\n        }\n    }\n\n    static handleAlertClick(event) {\n        vex.dialog.alert(event.currentTarget.getAttribute(\"data-dialog-message\"));\n    }\n\n    static handleConfirmClick(event, customConfig) {\n        var target = event.currentTarget;\n        if (!(target.getAttribute(\"data-dialog-disabled\") === \"true\")) {\n            var defaultConfig;\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n\n            defaultConfig = {\n                message: target.getAttribute(\"data-dialog-message\"),\n                callback(value) {\n                    if(value) {\n                        target.setAttribute(\"data-dialog-disabled\", \"true\");\n                        target.click();\n                    }\n                }\n            };\n\n            for (var attribute in customConfig) {\n                defaultConfig[attribute] = customConfig[attribute];\n            }\n\n            return vex.dialog.confirm(defaultConfig);\n        }\n    }\n};\n\n\n","// ================================\n//             Dropdown\n// ================================\n\nclass Dropdown {\n\n    static registerGlobalEvent() {\n        return document.addEventListener(\"click\", Dropdown.handleGlobalClick);\n    }\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(\".\" + Dropdown.classes.dropdownToggle)) {\n            item.addEventListener(\"click\", Dropdown.handleClick);\n        }\n    }\n\n    static handleClick(event) {\n        var c = event.target;\n        while (!c.classList.contains(Dropdown.classes.dropdownToggle)) {\n            if (c.matchesSelector(\"a[href], form\")) { return; }\n            c = c.parentNode;\n        }\n        var dropdown = c.querySelector(\".\" + Dropdown.classes.dropdownList);\n        if (dropdown.classList.contains(Dropdown.classes.isActive)) {\n            dropdown.classList.remove(Dropdown.classes.isActive);\n        } else {\n            Dropdown.reset();\n            dropdown.classList.add(Dropdown.classes.isActive);\n        }\n    }\n\n    static handleGlobalClick(event) {\n        if(parentMatchingSelector(event.target, \".\" + Dropdown.classes.dropdownToggle) == null) {\n            Dropdown.reset();\n        }\n    }\n\n    static reset(event) {\n        for(let item of document.querySelectorAll(\".\" + Dropdown.classes.dropdownList)) {\n            item.classList.remove(Dropdown.classes.isActive);\n        }\n    }\n\n};\n\nDropdown.classes = {\n    dropdownToggle: \"Dropdown-container\",\n    dropdownList: \"Dropdown\",\n    isActive: \"is-active\"\n};","// ================================\n//              Form\n// ================================\n\nclass EditableList {\n\n    static registerEvents(container) {\n        for(let item of container.getElementsByClassName(EditableList.classes.add)) {\n            item.addEventListener(\"click\", EditableList.handleAdd);\n        }\n        container.addEventListener(\"click\", EditableList.handleRemove);\n    }\n\n    static handleAdd(event) {\n        var container = event.currentTarget.parentNode.querySelector(\".\" + EditableList.classes.container);\n        var template = container.querySelector(\".\" + EditableList.classes.template);\n        var template2 = template.cloneNode(true);\n        template2.classList.remove(EditableList.classes.template);\n        container.appendChild(template2);\n    }\n\n    static handleRemove(event) {\n        let item = parentOrSelfMatchingSelector(event.target, \".\" + EditableList.classes.remove);\n        if(item) {\n            var row = parentMatchingSelector(event.target, \".\" + EditableList.classes.row);\n            if(row.parentNode) {\n                row.parentNode.removeChild(row);\n                console.log('removed node');\n            }\n        }\n    }\n}\n\nEditableList.classes = {\n    container: \"EditableList\",\n    template: \"EditableList-template\",\n    row: \"EditableList-row\",\n    remove: \"EditableList-remove\",\n    add: \"EditableList-add\"\n};\n","// ================================\n//            AjaxRequest\n// ================================\n\nwindow.Oxygen || (window.Oxygen = {});\n\nclass FetchOptions {\n    constructor() {\n        this.headers = new Headers();\n    }\n    wantJson() {\n        this.headers.set(\"Accept\", \"application/json\");\n        return this;\n    }\n    contentType(type) {\n        this.headers.set(\"Content-Type\", type);\n        return this;\n    }\n    method(method) {\n        this.method = method;\n        return this;\n    }\n    body(body) {\n        this.body = body;\n        return this;\n    }\n    cookies() {\n        this.credentials = \"same-origin\";\n        return this;\n    }\n\n    static default() {\n        return (new FetchOptions()).cookies()\n    }\n}\n\nOxygen.respond = {};\n\nOxygen.respond.text = function(response) {\n    return response.text();\n}\nOxygen.respond.json = function(response) {\n    return response.json();\n}\n\nOxygen.respond.checkStatus = function(response) {\n    if(response.ok) {\n        return response;\n    } else {\n        let error = new Error();\n        error.response = response;\n        throw error;\n            /*.catch(error => {\n                response.text().then(text => {\n                    Oxygen.error.jsonParseError(error, text);\n                });\n                throw error;\n            })*/\n    }\n};\n\nOxygen.respond.notification = function(data) {\n    if(Notification.isNotification(data)) {\n        NotificationCenter.present(new Notification(data));\n    }\n    return data;\n};\n\nOxygen.respond.redirect = function(data) {\n    if(data.redirect) {\n        if (window.smoothState && !(data.hardRedirect === true)) {\n            window.smoothState.load(data.redirect, false);\n        } else {\n            window.location.replace(data.redirect);\n        }\n    }\n    return data;\n};\n\n// handle network errors\n// if(error.response.readyState === 0) {\n//     console.error(response);\n// }\n// Oxygen.error.jsonParseError = function(error, text) {\n//     console.error(\"Error while parsing JSON: \", error);\n//     console.log(\"Raw response: \", text);\n//\n//     new Notification({\n//         content: \"Could not parse JSON response. This is a bug.\",\n//         status: \"failed\"\n//     });\n// };\n\nOxygen.respond.handleAPIError = function(error) {\n    if(error.response && error.response instanceof Response) {\n        error.response\n            .json()\n            .then(Oxygen.handleAPIError)\n            .catch(err => {\n                console.error(\"Error response did not contain valid JSON: \", err);\n                NotificationCenter.present(new Notification({\n                    content: \"Whoops, looks like something went wrong.\",\n                    status: \"bug\"\n                }));\n            });\n    } else {\n        throw error;\n    }\n};\n\nOxygen.handleAPIError = function(content) {\n    console.error(content);\n    if(Notification.isNotification(content)) {\n        NotificationCenter.present(new Notification(content));\n    } else if(content.error) {\n        NotificationCenter.present(new Notification({\n            content:\n            \"PHP Exception of type <code class=\\\"no-wrap\\\">\" + content.error.type +\n            \"</code> with message <code class=\\\"no-wrap\\\">\" + content.error.message +\n            \"</code> thrown at <code class=\\\"no-wrap\\\">\" + content.error.file + \":\" + content.error.line +\n            \"</code>\",\n            status: \"bug\"\n        }));\n    } else {\n        console.log(\"JSON error response unhandled: \", content);\n\n        NotificationCenter.present(new Notification({\n            content: \"Whoops, looks like something went wrong.\",\n            status: \"bug\"\n        }));\n    }\n};\n","// ================================\n//              Form\n// ================================\n\n//\n// The Form helper can:\n// - display a message upon exit if there are any unsaved changes.\n// - send an async request with the form data on submit or change\n\nclass Form {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(\"form\")) {\n            item.formObject = new Form(item);\n        }\n\n        $(container).find(Form.classes.taggableInput).tagging({\n            \"edit-on-delete\": false\n        });\n    }\n\n    static registerKeydownHandler() {\n        return document.addEventListener(\"keydown\", Form.handleKeydown);\n    }\n\n    static handleKeydown(event) {\n        // check for Command/Control S\n        if ((event.ctrlKey || event.metaKey) && event.which === 83) {\n\n            var forms = document.getElementsByTagName(\"form\");\n            for (let i = 0; i < forms.length; i++) {\n                let form = forms[i];\n                if(form.classList.contains(Form.classes.submitOnKeydown) && form.formObject) {\n                    form.formObject.submit();\n                    event.preventDefault();\n                }\n            }\n        }\n    }\n\n    constructor(element) {\n        this.form = element;\n        this.originalData = getFormData(this.form);\n        //# content generators are notified before the form content is read\n        this.contentGenerators = [];\n        this.registerEvents();\n    }\n\n    registerEvents() {\n        // Exit Dialog\n        if (this.form.classList.contains(Form.classes.warnBeforeExit)) {\n            for(let item of document.querySelectorAll(\"a, button[type=\\\"submit\\\"]\")) {\n                item.addEventListener(\"click\", event => this.handleExit(event)); // displays exit dialog\n            }\n        }\n\n        // Submit asynchronously\n        this.form.addEventListener(\"submit\", event => this.handleSubmit(event));\n        if (this.form.classList.contains(Form.classes.submitAsyncOnChange)) {\n            this.form.addEventListener(\"change\", event => {\n                event.preventDefault();\n                this.submitAsync();\n            });\n        }\n\n        // Auto Submit\n        if (this.form.classList.contains(Form.classes.autoSubmit)) {\n            return this.submit();\n        }\n    }\n\n    handleExit(event) {\n        if (event.currentTarget.classList.contains(\"Form-submit\")) { return; }\n        if (!document.body.contains(this.form)) { return; }\n        this.generateContent();\n        var original = this.originalData;\n        var current = getFormData(this.form);\n        console.log(\"original form data:\", original);\n        console.log(\"current form data:\", current);\n        if(!compareByValue(original, current)) {\n            console.log(\"=> form data differs\");\n            var target = event.currentTarget;\n\n            if (!(target.getAttribute(\"data-dialog-disabled\") === \"true\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation(),\n\n                vex.dialog.confirm({\n                    message:  Form.messages.confirmation,\n                    buttons: [\n                        {\n                            text: 'Save',\n                            type: 'button',\n                            className: 'vex-dialog-button-primary',\n                            click: function($vexContent, event) {\n                                $vexContent.data().vex.value = \"save\";\n                                vex.close($vexContent.data().vex.id);\n                            }\n                        },\n                        $.extend({}, vex.dialog.buttons.NO, {text: 'Cancel'}),\n                        {\n                            text: 'Don\\'t Save',\n                            type: 'button',\n                            className: 'vex-dialog-button-secondary vex-dialog-button-left',\n                            click: function($vexContent, event) {\n                                $vexContent.data().vex.value = \"continue\";\n                                vex.close($vexContent.data().vex.id);\n                            }\n                        }\n                    ],\n                    callback: (value) => {\n                        if(value == \"continue\") {\n                            target.setAttribute(\"data-dialog-disabled\", \"true\");\n                            return target.click();\n                        } else if(value == \"save\") {\n                            if (this.form.classList.contains(Form.classes.submitAsync)) {\n                                this.submitAsync(true);\n                                target.setAttribute(\"data-dialog-disabled\", \"true\");\n                                target.click();\n                            } else {\n                                // not sure if this works\n                                this.submit();\n                                //target.attr(\"data-dialog-disabled\", \"true\");\n                                //target.click();\n                            }\n                        }\n                    }\n                });\n            }\n        }\n    }\n\n    submit() {\n        this.form.querySelector('button[type=\"submit\"]').click();\n    }\n\n    generateContent() {\n        for (var generator of this.contentGenerators) {\n            generator(this);\n        }\n    }\n\n    handleSubmit(event) {\n        this.generateContent();\n        if (this.form.classList.contains(Form.classes.submitAsync) && !Form.disableAsync) {\n            event.preventDefault();\n            this.submitAsync();\n        }\n    }\n\n    submitAsync(ignoreRedirectResponse) {\n        var saveData = (data) => {\n            if (data.status === 'success') {\n                this.originalData = getFormData(this.form);\n                console.log('Form Saved Successfully');\n            }\n            return data;\n        };\n\n        let data = getFormData(this.form);\n        console.log(\"Submitting Form with Data: \", data);\n\n        var promise = window.fetch(\n            this.form.action,\n            FetchOptions.default()\n                .method(this.form.method)\n                .body(getFormDataObject(data))\n                .wantJson()\n        )\n            .then(Oxygen.respond.checkStatus)\n            .then(Oxygen.respond.json)\n            .then(saveData);\n\n        let modifyPromise = this.form.modifyPromise;\n        if(modifyPromise === undefined) {\n            modifyPromise = function(promise) { return promise; };\n        }\n\n        promise = promise.then(Oxygen.respond.notification);\n\n        if(!ignoreRedirectResponse) {\n            promise = promise.then(Oxygen.respond.redirect);\n        }\n\n        promise = modifyPromise(promise);\n        promise = promise.catch(Oxygen.respond.handleAPIError);\n\n        return promise;\n    }\n}\n\nfunction getFormData(form) {\n    var data = {};\n\n    for(let item of form.querySelectorAll(\"[name]\")) {\n        if(item.type == \"checkbox\" || item.type == \"radio\") {\n            if(!item.checked) {\n                continue;\n            }\n        }\n\n        if(item.name == undefined) {\n            console.dir(item);\n        }\n        if (item.type == \"select-multiple\") {\n            data[item.name] = [];\n            for(let option of item.options) {\n                if(option.selected) {\n                    data[item.name].push(option.value);\n                }\n            }\n        } else if(item.type == \"file\") {\n            var ref;\n            var files = ((ref = item.filesToUpload) != null) ? ref : item.files;\n            data[item.name] = [];\n            for (var i = 0, file; i < files.length; i++) {\n                file = files[i];\n                data[item.name].push(file);\n            }\n        } else if(item.name.endsWith(\"[]\")) {\n            if(typeof data[item.name] == 'undefined' || data[item.name] === null) {\n                data[item.name] = [];\n            }\n            data[item.name].push(item.value);\n        } else {\n            data[item.name] = item.value;\n        }\n    }\n\n    return data;\n}\n\nfunction getFormDataObject(data) {\n    var formData = new FormData();\n\n    for(let key in data) {\n        if(data[key] instanceof Array) {\n            for(let value of data[key]) {\n                formData.append(key, value);\n            }\n        } else {\n            formData.append(key, data[key]);\n        }\n    }\n\n    return formData;\n}\n\n/// The `===` operator or `Object.is` doesn't cut it.\n/// https://gist.github.com/nicbell/6081098\nfunction compareByValue(obj1, obj2) {\n\t//Loop through properties in object 1\n\tfor (var p in obj1) {\n\t\t//Check property exists on both objects\n\t\tif (obj1.hasOwnProperty(p) !== obj2.hasOwnProperty(p)) {\n            return false;\n        }\n\n\t\tswitch (typeof (obj1[p])) {\n\t\t\t//Deep compare objects\n\t\t\tcase 'object':\n\t\t\t\tif (!compareByValue(obj1[p], obj2[p])) { return false; }\n\t\t\t\tbreak;\n\t\t\t//Compare function code\n\t\t\tcase 'function':\n\t\t\t\tif (typeof (obj2[p]) == 'undefined' || (p != 'compare' && obj1[p].toString() != obj2[p].toString())) {\n                    return false;\n                }\n\t\t\t\tbreak;\n\t\t\t//Compare values\n\t\t\tdefault:\n\t\t\t\tif (obj1[p] != obj2[p]) { return false; }\n\t\t}\n\t}\n\n\t//Check object 2 for any extra properties\n\tfor (var p in obj2) {\n        if(obj2.hasOwnProperty(p)) {\n            if (typeof (obj1[p]) == 'undefined') {\n                return false;\n            }\n        }\n\t}\n\treturn true;\n};\n\nForm.disableAsync = false;\n\n/**\n * Toggles whether asynchronous form submission is enabled globally, using Alt + Command/Control + J\n */\ndocument.addEventListener(\"keydown\", function(event) {\n    if(event.altKey && (event.controlKey || event.metaKey) && event.which == 74) {\n        Form.disableAsync = !Form.disableAsync;\n        event.preventDefault();\n        NotificationCenter.present(new Notification({\n            content: \"Asynchronous form submission \" + (Form.disableAsync ? \"disabled\" : \"enabled\"),\n            status: \"info\"\n        }));\n    }\n});\n\nForm.messages = {\n    confirmation: \"Do you want to save changes?\"\n};\n\nForm.classes = {\n    warnBeforeExit: \"Form--warnBeforeExit\",\n    submitOnKeydown: \"Form--submitOnKeydown\",\n    submitAsync: \"Form--sendAjax\",\n    submitAsyncOnChange: \"Form--sendAjaxOnChange\",\n    autoSubmit: \"Form--autoSubmit\",\n    taggableInput: \".Form-taggable\"\n};\n","// ================================\n//             MainNav\n// ================================\n\nclass MainNav {\n\n    static headroom() {\n        let header = document.querySelector(\".MainNav\");\n\n        if (header && window.innerWidth > 768) {\n            let headroom = new Headroom(header, {\n                \"tolerance\": 20,\n                \"offset\": 50,\n                \"classes\":\n                    {\"initial\": \"Headroom\",\n                    \"pinned\": \"Headroom--pinned\",\n                    \"unpinned\": \"Headroom--unpinned\",\n                    \"top\": \"Headroom--top\",\n                    \"notTop\": \"Headroom--not-top\"\n                    }\n            });\n            headroom.init();\n        }\n    }\n}","// ================================\n//             Notification\n// ================================\n\nclass NotificationCenter {\n    static initializeExistingMessages() {\n        let notifications = document\n            .querySelector(\".\" + Notification.classes.container)\n            .querySelectorAll(\".\" + Notification.classes.item)\n        for(let item of notifications) {\n            NotificationCenter.registerHide(new Notification({\n                message: item\n            }));\n        }\n    }\n\n    static present(notification) {\n        document\n            .querySelector(\".\" + Notification.classes.container)\n            .appendChild(notification.message);\n\n        NotificationCenter.registerHide(notification)\n    }\n\n    static registerHide(notification) {\n        if(notification.hideAfter != null) {\n            let auto = setTimeout(\n                function() { NotificationCenter.hide(notification); },\n                notification.hideAfter\n            );\n        }\n\n        notification.message.addEventListener(\n            \"click\",\n            event => {\n                NotificationCenter.hide(notification);\n                if(typeof auto !== 'undefined') {\n                    clearTimeout(auto);\n                }\n            }\n        );\n    }\n\n    static hide(notification) {\n        notification.message.classList.add(\"is-sliding-up\");\n        setTimeout(\n            function() {\n                let node = notification.message;\n                if(node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            500\n        );\n    }\n}\n\nclass Notification {\n    constructor(options) {\n        if (options.log) { console.log(options.log); }\n\n        this.hideAfter = 15 * 1000;\n\n        if (options.message) {\n            // Constructs a Notification object\n            // using a pre-existing message element.\n            this.message = options.message;\n            this.message.classList.remove(\"is-hidden\");\n        } else if (options.status && options.content) {\n            // Constructs a Notification object,\n            // creating a new message element.\n            this.message = document.createElement(\"div\");\n            this.message.classList.add(Notification.classes.item);\n            this.message.classList.add(\"Notification--\" + options.status);\n            if(options.status == \"failed\") {\n                this.hideAfter = null;\n            }\n            this.message.innerHTML = options.content +\n                \"<span class=\\\"Notification-dismiss Icon Icon-times\\\"></span>\";\n        } else {\n            throw new Error(\"Invalid Arguments For New Notification: \" + JSON.stringify(options));\n        }\n    }\n\n    static isNotification(obj) {\n        return obj.message !== undefined || (obj.content !== undefined && obj.status !== undefined);\n    }\n}\n\nNotification.classes = {\n    container: \"Notification-container\",\n    item: \"Notification\"\n};\n","// ================================\n//             Notification\n// ================================\n\nclass Preferences {\n\n    static setPreferences(preferences) {\n        return Preferences.preferences = preferences;\n    }\n\n    static isDefined(o) {\n        return typeof o !== \"undefined\" && o !== null;\n    }\n\n    static get(key, fallback = null) {\n        var o = Preferences.preferences;\n\n        if(!Preferences.isDefined(o)) {\n            return fallback;\n        }\n\n        var parts = key.split('.');\n        //var last = parts.pop();\n        var l = parts.length;\n        var i = 0;\n\n        while(Preferences.isDefined(o) && i < l) {\n            var idx = parts[i];\n            o = o[idx];\n            i++;\n        }\n\n        if (Preferences.isDefined(o)) {\n            return o;\n        } else {\n            console.log(\"Preferences key \", key, \"was not defined, using default \", fallback);\n            return fallback;\n        }\n    }\n\n    static has(key) {\n        var o = Preferences.preferences;\n\n        if(!o) {\n            return false;\n        }\n\n        var parts = key.split('.');\n        var last = parts.pop();\n        var l = parts.length;\n        var i = 1;\n        var current = parts[0];\n\n        while((o = o[current]) && i < l) {\n            current = parts[i];\n            i++;\n        }\n\n        return o;\n    }\n}\n\n\n","// ================================\n//            Slider\n// ================================\n\nclass Slider {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(Slider.selectors.slider)) {\n            Slider.list.push(new Slider(item));\n        }\n    }\n\n    // -----------------\n    //       Object\n    // -----------------\n\n    constructor(container) {\n        this.container = container;\n        this.list = this.container.querySelector(Slider.selectors.list);\n        this.items = this.container.querySelectorAll(Slider.selectors.item);\n        this.interval = this.container.getAttribute(\"data-interval\") || 5000;\n\n        this.previousId = 0;\n        this.currentId = 0;\n        this.nextId = 0;\n        this.animating = false;\n        this.animationTime = 1000;\n\n        this.registerEvents();\n        this.next();\n\n        if (this.container.getAttribute(\"data-autoplay\") === \"true\") {\n            this.play();\n        }\n    }\n\n    registerEvents() {\n        this.container.querySelector(Slider.selectors.back).addEventListener(\"click\", this.previous.bind(this));\n        this.container.querySelector(Slider.selectors.forward).addEventListener(\"click\", this.next.bind(this));\n    }\n\n    play() {\n        var callback = this.container.getAttribute(\"data-direction\") === \"reverse\" ? this.previous.bind(this) : this.next.bind(this);\n        this.timer = setInterval(callback, this.interval);\n    }\n\n    pause() {\n        clearInterval(this.timer);\n    }\n\n    hideAll() {\n        for(var item of this.items) {\n            item.classList = \"\";\n            item.classList.add(Slider.classes.item);\n            item.classList.add(Slider.classes.isHidden);\n        }\n    }\n\n    getItem(id) {\n        let item = this.items[id];\n        if(item === undefined || item === null) {\n            console.error(\"no slider item at index: \", id);\n        }\n        return item;\n    }\n\n    next() {\n        if (!this.shouldAnimate()) {\n            return false;\n        }\n\n        this.previousId = this.currentId;\n\n        this.currentId += 1;\n        if (this.currentId >= this.items.length) {\n            this.currentId = 0;\n        }\n\n        this.nextId = this.currentId + 1;\n        if (this.nextId >= this.items.length) {\n            this.nextId = 0;\n        }\n\n        var current = this.getItem(this.currentId);\n        var previous = this.getItem(this.previousId);\n\n        this.hideAll();\n\n        previous.classList.remove(Slider.classes.isHidden);\n        previous.classList.add(Slider.classes.slideOutLeft);\n        current.classList.remove(Slider.classes.isHidden);\n        current.classList.add(Slider.classes.slideInRight);\n    }\n\n    previous() {\n        if (!this.shouldAnimate()) {\n            return false;\n        }\n\n        this.nextId = this.currentId;\n\n        this.currentId -= 1;\n        if (this.currentId <= 0) {\n            this.currentId = this.items.length - 1;\n        }\n\n        this.previousId = this.currentId - 1\n        if (this.nextId <= 0) {\n            this.nextId = this.items.length - 1;\n        }\n\n        var current = this.getItem(this.currentId);\n        var next = this.getItem(this.nextId);\n\n        this.hideAll();\n\n        next.classList.remove(Slider.classes.isHidden);\n        next.classList.add(Slider.classes.slideOutRight);\n        current.classList.remove(Slider.classes.isHidden);\n        current.classList.add(Slider.classes.slideInLeft);\n    }\n\n    shouldAnimate() {\n        if (this.animating) {\n            return false;\n        }\n\n        this.animating = true;\n        setTimeout(\n            () => {\n                this.animating = false;\n            },\n            this.animationTime\n        );\n\n        return true;\n    }\n};\n\nSlider.selectors = {\n    slider: \".Slider\",\n    list: \".Slider-list\",\n    item: \".Slider-item\",\n    back: \".Slider-back\",\n    forward: \".Slider-forward\"\n};\n\nSlider.classes = {\n    item: \"Slider-item\",\n    isCurrent: \"Slider-item--current\",\n    isHidden: \"Slider-item--hidden\",\n    slideInLeft: \"Slider-item--slideInLeft\",\n    slideInRight: \"Slider-item--slideInRight\",\n    slideOutLeft: \"Slider-item--slideOutLeft\",\n    slideOutRight: \"Slider-item--slideOutRight\",\n    isAfter: \"Slider-item--after\",\n    noTransition: \"Slider--noTransition\"\n};\n\nSlider.list = [];","class SmoothState {\n    constructor() {\n        this.loading = false;\n        this.smoothState = $(\"#page\").smoothState({\n            anchors: \".Link--smoothState\",\n            root: $(document),\n            cacheLength: 0,\n            forms: \"null\",\n            onStart: {\n                duration: 350,\n                render: this.onStart\n            },\n            onProgress: {\n                duration: 0,\n                render: this.onProgress\n            },\n            onReady: {\n                duration: 0,\n                render: this.onReady\n            },\n            onAfter: this.onAfter\n        }).data('smoothState');\n    }\n\n    onStart(container) {\n        for(let item of document.querySelectorAll(\"html, body\")) { item.scrollTop = 0; }\n        this.loading = true;\n\n        var elements = document.getElementsByClassName('Block');\n        var blocks = Array.prototype.slice.call(elements);\n        blocks.reverse();\n        for(let i = 0; i < blocks.length; i++) {\n            let block = blocks[i];\n            setTimeout(function() {\n                return block.classList.add('Block--isExiting');\n            }, i * 50);\n        }\n\n        /*setTimeout(function() {\n            if(this.loading) {\n                return document.querySelector(\".pace-activity\").classList.add(\"pace-activity-active\");\n            }\n        }, blocks.length * 100);*/\n    }\n\n    onProgress(container) {\n        SmoothState.setCursor('wait');\n    };\n\n    static setCursor(mode) {\n        let items = document.querySelectorAll(\"html, body\");\n        for(let item of items) {\n            item.style.cursor = mode;\n        }\n        let links = document.querySelectorAll(\"a\");\n        for(let item of links) {\n            item.style.cursor = mode;\n        }\n    }\n\n    onReady(container, content) {\n        SmoothState.setCursor('auto');\n\n        Oxygen.reset();\n        container[0].style.display = 'none';\n        container.html(content);\n        document.querySelector(\".pace-activity\").classList.remove(\"pace-activity-active\");\n        let blocks = document.getElementsByClassName('Block');\n        for(var i = 0; i < blocks.length; i++) {\n            let block = blocks[i];\n            block.classList.add('Block--isHidden');\n            setTimeout(function() {\n                block.classList.remove('Block--isHidden');\n                block.classList.add('Block--isEntering');\n                setTimeout(function() {\n                    block.classList.remove('Block--isEntering');\n                }, 250);\n            }, i * 50);\n        }\n        container[0].style.display = 'block';\n    };\n\n    onAfter(container, content) {\n        this.loading = false;\n        //document.querySelector(\".pace-activity\").classList.remove(\"pace-activity-active\");\n        return Oxygen.init(document.getElementById(\"page\"));\n    };\n\n    static setTheme(theme) {\n        console.log(\"Setting SmoothState Theme: \", theme);\n        let page = document.getElementById(\"page\");\n        if(page) {\n            page.classList.add('Page-transition--' + theme);\n        }\n    };\n\n    load(url, push) {\n        return this.smoothState.load(url, push);\n    };\n\n}\n","// ================================\n//          ProgressBar\n// ================================\n\nclass TabSwitcher {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(TabSwitcher.selectors.container)) {\n            console.log(item);\n            /*var tabs = $(item);\n            if (tabs.classList.contains(TabSwitcher.classes.content)) {\n                container = tabs;\n            } else {\n                container = tabs.parentNode.querySelector(\".\" + TabSwitcher.classes.content);\n            }\n\n            if (container.length === 0) { container = tabs.parentNode.parentNode.querySelector(\".\" + TabSwitcher.classes.content); }*/\n\n            let tabs = item.matchesSelector(TabSwitcher.selectors.tabs) ? item : item.querySelector(TabSwitcher.selectors.tabs);\n            let content = item.matchesSelector(TabSwitcher.selectors.content) ? item : item.querySelector(TabSwitcher.selectors.content);\n\n            TabSwitcher.list.push(new TabSwitcher(tabs, content));\n        }\n    }\n\n    // -----------------\n    //       Object\n    // -----------------\n\n    constructor(tabs, content) {\n        this.tabs = tabs;\n        this.content = content;\n        this.findDefault();\n        this.registerEvents();\n    }\n\n    findDefault() {\n        var tab = this.tabs.querySelector(\"[data-default-tab]\").getAttribute(\"data-switch-to-tab\");\n        this.setTo(tab);\n    }\n\n    registerEvents() {\n        this.tabs.querySelectorAll(\"[data-switch-to-tab]\").forEach(item => {\n            item.addEventListener(\"click\", event => {\n                this.setTo(event.currentTarget.getAttribute(\"data-switch-to-tab\"));\n            });\n        });\n    }\n\n    setTo(tab) {\n        this.current = tab;\n\n        for(let item of this.content.querySelectorAll(\"[data-tab]\")) {\n            item.classList.remove(TabSwitcher.classes.active);\n        }\n        this.content.querySelector(\"[data-tab=\\\"\" + tab + \"\\\"]\").classList.add(TabSwitcher.classes.active);\n\n        for(let item of this.tabs.querySelectorAll(\"[data-switch-to-tab]\")) {\n            item.classList.remove(TabSwitcher.classes.active);\n        }\n        this.tabs.querySelector(\"[data-switch-to-tab=\\\"\" + tab + \"\\\"]\").classList.add(TabSwitcher.classes.active);\n    }\n}\n\n// -----------------\n//       Static\n// -----------------\n\nTabSwitcher.classes = {\n    active: \"TabSwitcher--isActive\"\n};\n\nTabSwitcher.selectors = {\n    container: \".TabSwitcher\",\n    tabs: \".TabSwitcher-tabs\",\n    content: \".TabSwitcher-content\"\n}\n\nTabSwitcher.list = [];\n","// ================================\n//             Toggle\n// ================================\n\nclass Toggle {\n\n    constructor(toggle, enableCallback, disableCallback) {\n        this.toggle = toggle;\n        this.enableCallback = enableCallback;\n        this.disableCallback = disableCallback;\n\n        this.registerEvents();\n    }\n\n    registerEvents() {\n        this.toggle.addEventListener(\"click\", event => this.handleToggle(event));\n        if(this.toggle.getAttribute(\"data-enabled\") == undefined) {\n            this.toggle.setAttribute(\"data-enabled\", \"false\");\n        }\n    }\n\n    handleToggle(event) {\n        if (this.toggle.getAttribute(\"data-enabled\") === \"true\") {\n            this.toggle.setAttribute(\"data-enabled\", \"false\");\n            this.disableCallback(event);\n        } else {\n            this.toggle.setAttribute(\"data-enabled\", \"true\");\n            this.enableCallback(event);\n        }\n    }\n}\n\nToggle.classes = {\n    ifEnabled:  \"Toggle--ifEnabled\",\n    ifDisabled: \"Toggle--ifDisabled\"\n};\n\n// ================================\n//        FullscreenToggle\n// ================================\n\nclass FullscreenToggle extends Toggle {\n\n    constructor(toggle, fullscreenElement, enterFullscreenCallback = function() {}, exitFullscreenCallback = function() {}) {\n        super(toggle, null, null);\n        this.fullscreenElement = fullscreenElement;\n        this.enableCallback = this.enterFullscreen;\n        this.disableCallback = this.exitFullscreen;\n        this.enterFullscreenCallback = enterFullscreenCallback;\n        this.exitFullscreenCallback = exitFullscreenCallback;\n    }\n\n    enterFullscreen() {\n        this.fullscreenElement.classList.add(\"FullscreenToggle--isFullscreen\");\n        document.body.classList.add(\"Body--noScroll\");\n\n        var elem = document.documentElement;\n        if (elem.requestFullscreen) {\n            elem.requestFullscreen();\n        } else if (elem.msRequestFullscreen) {\n            elem.msRequestFullscreen();\n        } else if (elem.mozRequestFullScreen) {\n            elem.mozRequestFullScreen();\n        } else if (elem.webkitRequestFullscreen) {\n            elem.webkitRequestFullscreen();\n        }\n\n        (this.enterFullscreenCallback)();\n    }\n\n    exitFullscreen() {\n        this.fullscreenElement.classList.remove(\"FullscreenToggle--isFullscreen\");\n        document.body.classList.remove(\"Body--noScroll\");\n\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n\n        (this.exitFullscreenCallback)();\n    }\n}\n\n","class Upload {\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(Upload.selectors.uploadElement)) {\n            var dropzone = item.querySelector(Upload.selectors.dropzoneElement);\n            dropzone.addEventListener(\"dragover\", Upload.handleDragOver);\n            dropzone.addEventListener(\"dragleave\", Upload.handleDragLeave);\n            dropzone.addEventListener(\"drop\", Upload.handleDrop);\n            item.querySelector(\"input[type=file]\").addEventListener(\"change\", Upload.handleChange);\n        }\n    };\n\n    static handleDragOver(event) {\n        event.preventDefault();\n        return event.currentTarget.classList.add(Upload.states.onDragOver);\n    };\n\n    static handleDragLeave(event) {\n        return event.currentTarget.classList.remove(Upload.states.onDragOver);\n    };\n\n    static handleDrop(event) {\n        event.preventDefault();\n        event.currentTarget.classList.remove(Upload.states.onDragOver);\n        var upload = parentMatchingSelector(event.currentTarget, Upload.selectors.uploadElement);\n        Upload.addFiles(upload, event.dataTransfer.files);\n    };\n\n    static handleChange(event) {\n        Upload.addFiles(parentMatchingSelector(event.currentTarget, Upload.selectors.uploadElement), event.currentTarget.files);\n        console.dir(event.currentTarget);\n        event.currentTarget.value = \"\"; // reset the input field, so that the change event is always called.\n    };\n\n    static addFiles(upload, files) {\n        let input = upload.querySelector('input[type=\"file\"]');\n        for(let file of files) {\n            let imageType = /^image\\//;\n            console.log(file.type);\n            let preview = document.createElement(\"div\");\n            preview.classList.add(\"FileUpload-preview\");\n            preview.innerHTML = '<div class=\"FileUpload-preview-info\">' +\n                    '<span>' + file.name + '</span>' +\n                    '<button type=\"button\" class=\"FileUpload-preview-remove Button--transparent Icon Icon-times\"></button>' +\n                    '<span class=\"FileUpload-preview-size\">' + fileSize(file.size) + '</span>' +\n                '</div>';\n            upload.insertBefore(preview, upload.firstChild);\n            preview.querySelector(Upload.selectors.removeFile).addEventListener(\"click\", function(event) {\n                var button, index;\n                button = event.currentTarget;\n                preview = parentMatchingSelector(button, Upload.selectors.previewElement);\n                index = input.filesToUpload.indexOf(file);\n\n                if(index > -1) {\n                    input.filesToUpload.splice(index, 1)\n                }\n                Upload.recalculateDropzoneVisibility(upload, files);\n                preview.parentNode.removeChild(preview);\n            });\n            if (input.filesToUpload == null) {\n                input.filesToUpload = [];\n            }\n            input.filesToUpload.push(file);\n            if (imageType.test(file.type)) {\n                let reader = new FileReader();\n                reader.onload = function (e) {\n                    preview.style.backgroundImage = 'url(' + e.target.result + ')';\n                };\n                reader.readAsDataURL(file);\n            } else {\n                let container = document.createElement(\"div\");\n                container.classList.add(\"Icon-container\");\n                let icon = document.createElement(\"span\");\n                icon.classList.add(\"Icon\", \"Icon--gigantic\", \"Icon--light\", \"Icon-file-text\");\n                container.appendChild(icon);\n                preview.insertBefore(container, preview.firstChild);\n            }\n        }\n        Upload.recalculateDropzoneVisibility(upload);\n        console.log(files);\n    };\n\n    static recalculateDropzoneVisibility(upload, files) {\n        var input = upload.querySelector('input[type=\"file\"]');\n        var dropzone = upload.querySelector(Upload.selectors.dropzoneElement);\n        if(!input.multiple && input.filesToUpload.length > 0) {\n            dropzone.style.display = \"none\";\n        } else {\n            dropzone.style.display = \"block\";\n        }\n    }\n\n};\n\nUpload.selectors = {\n    uploadElement: \".FileUpload\",\n    previewElement: \".FileUpload-preview\",\n    dropzoneElement: \".FileUpload-dropzone\",\n    removeFile: \".FileUpload-preview-remove\"\n};\n\nUpload.states = {\n    onDragOver: \"FileUpload--onDragOver\"\n};\n\nfunction fileSize(sizeInBytes) {\n    var approx, multiple, multiples, output;\n    output = sizeInBytes + \" bytes\";\n    multiples = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    multiple = 0;\n    approx = sizeInBytes / 1024;\n    while (approx > 1) {\n        output = approx.toFixed(3) + ' ' + multiples[multiple];\n        approx /= 1024;\n        multiple++;\n    }\n    return output;\n}\n","// ================================\n//          CodeViewInterface\n// ================================\n\nclass CodeViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.ace = null;\n    }\n\n    create() {\n        // edit the textarea\n        var object = ace.edit(this.editor.name + \"-ace-editor\");\n\n        // set user preferences\n        object.getSession().setMode(\"ace/mode/\" + this.editor.language);\n        object.setTheme(Preferences.get('editor.ace.theme'));\n        object.getSession().setUseWrapMode(Preferences.get('editor.ace.wordWrap'));\n        object.setHighlightActiveLine(Preferences.get('editor.ace.highlightActiveLine'));\n        object.setShowPrintMargin(Preferences.get('editor.ace.showPrintMargin'));\n        object.setShowInvisibles(Preferences.get('editor.ace.showInvisibles'));\n        object.setReadOnly(this.editor.readOnly);\n\n        // store object\n        this.ace = object;\n        this.view = document.getElementById(this.editor.name + \"-ace-editor\");\n        this.view.style.fontSize = Preferences.get('editor.ace.fontSize');\n    }\n\n    show(full) {\n        console.log(\"CodeViewInterface.show\");\n        this.view.classList.remove(Editor.classes.state.isHidden);\n        if (full) {\n            this.view.style.width = \"100%\";\n        }\n\n        // after animation is completed\n        setTimeout(() => {\n            this.resize();\n        }, 300);\n    }\n\n    hide() {\n        console.log(\"CodeViewInterface.hide\");\n        this.view.classList.add(Editor.classes.state.isHidden);\n    }\n\n    valueFromForm() {\n        this.ace.setValue(this.editor.textarea.value, -1);\n    }\n\n    valueToForm() {\n        this.editor.textarea.value = this.ace.getValue();\n    }\n\n    resize() {\n        this.ace.resize();\n    }\n}\n","// ================================\n//          DesignViewInterface\n//   ================================\n\nclass DesignViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.ck = null;\n    }\n\n    create() {\n        var config = Preferences.get('editor.ckeditor', {});\n        config.customConfig = config.customConfig || '';\n        config.allowedContent = true;\n        config.entities = false;\n        config.protectedSource = [\n            // inline PHP\n            /<\\?[\\s\\S]*?\\?>/g,\n            // blade directives\n            /(\\n[ \\t]*)?@\\w+(\\((?:[^)(]+|\\((?:[^)(]+|\\([^)(]*\\))*\\))*\\))?\\n?/g,\n            // blade echo\n            /{{[\\s\\S]*?}}}?/g\n        ];\n        config.contentsCss = this.editor.stylesheets;\n\n        // create instance\n        CKEDITOR.dtd.$removeEmpty[\"span\"] = false;\n        this.ck = CKEDITOR.replace(this.editor.name + \"-editor\", config);\n        this.ck.on(\"instanceReady\", event => {\n            this.view = document.getElementById(\"cke_\" + this.editor.name + \"-editor\");\n            //put your code here\n        });\n    }\n\n    show(full) {\n        console.log(\"DesignViewInterface.show\");\n        if(this.view) {\n            this.view.style.display = \"block\";\n            if (full) {\n                this.view.style.width = \"100%\";\n            }\n        } else {\n            this.ck.on(\"instanceReady\", event => {\n                this.view.style.display = \"block\";\n                if (full) {\n                    this.view.style.width = \"100%\";\n                }\n            });\n        }\n    }\n\n    hide() {\n        this.view.style.display = \"none\";\n    }\n\n    valueFromForm() {\n        this.ck.setData(this.editor.textarea.value);\n    }\n\n    valueToForm() {\n        this.editor.textarea.value = this.ck.getData();\n    }\n}","// ================================\n//                 Editor\n// ================================\n\nclass Editor {\n\n    // only create if textarea exists\n    static createEditors(editors) {\n        for (var i = 0, editor; i < editors.length; i++) {\n            editor = editors[i];\n            var textarea = document.querySelector(\"textarea[name=\\\"\" + editor.name + \"\\\"]\");\n            if (textarea) {\n                console.log(\"Editor found\");\n                if (!(editor.mode != null)) { editor.mode = user.editor.defaultMode; }\n                console.log(editor);\n                var e = new Editor(editor.name, editor.language, editor.mode, editor.readOnly, editor.stylesheets);\n                Editor.list.push(e);\n            } else {\n                console.log(\"Editor not found\");\n                console.log(editor);\n            }\n        }\n    }\n\n    constructor(name, language, currentMode, readOnly, stylesheets = []) {\n        this.enterFullscreen = this.enterFullscreen.bind(this);\n        this.exitFullscreen = this.exitFullscreen.bind(this);\n        this.handleSwitchEditor = this.handleSwitchEditor.bind(this);\n        this.handleFormSubmit = this.handleFormSubmit.bind(this);\n        this.name = name;\n        this.language = language;\n        this.currentMode = currentMode;\n        this.readOnly = readOnly;\n        this.stylesheets = stylesheets;\n        this.modes = {};\n        this.textarea = document.querySelector(\"textarea[name=\\\"\" + this.name + \"\\\"]\");\n        this.container = parentMatchingSelector(this.textarea, \".\" + Editor.classes.editor.container);\n        var toggle = this.container.querySelector(\".\" + Editor.classes.button.fullscreenToggle);\n        if(toggle) {\n            this.fullscreenToggle = new FullscreenToggle(toggle, this.container, this.enterFullscreen, this.exitFullscreen);\n        }\n\n        this.show();\n        this.resizeToContent();\n        this.registerEvents();\n    }\n\n    getMode(mode) {\n        if (!(typeof mode !== \"undefined\" && mode !== null)) {\n            return this.currentMode;\n        } else {\n            return mode;\n        }\n    }\n\n    registerEvents() {\n        // switch editor button\n        for(let button of this.container.querySelectorAll(\".\" + Editor.classes.button.switchEditor)) {\n            button.addEventListener(\"click\", this.handleSwitchEditor);\n        }\n\n        // ask the form to tell us when its data is being read,\n        // so we can flush changes to the underlying <input>/<textarea> element\n        var form = parentMatchingSelector(this.container, \"form\");\n        if(form !== null && form.formObject) {\n            form.formObject.contentGenerators.push(form =>\n                this.valueToForm()\n            );\n        }\n    }\n\n    create(m) {\n        var mode = this.getMode(m);\n        switch (mode) {\n            case \"code\":\n                this.modes.code = new CodeViewInterface(this);\n                break;\n            case \"design\":\n                this.modes.design = new DesignViewInterface(this);\n                break;\n            case \"preview\":\n                this.modes.preview = new PreviewInterface(this);\n                break;\n            case \"split\":\n                this.modes.split = new SplitViewInterface(this);\n                break;\n        }\n        this.modes[mode].create();\n    }\n\n    show(m, full = true) {\n        var mode = this.getMode(m);\n        if (!(this.modes[mode] != null)) { this.create(mode); }\n        this.modes[mode].show(full);\n        this.currentMode = mode;\n        this.valueFromForm(mode);\n    }\n\n    hide(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].hide();\n        this.valueToForm(mode);\n    }\n\n    valueFromForm(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].valueFromForm();\n    }\n\n    valueToForm(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].valueToForm();\n    }\n\n    resizeToContainer() {\n        // resize ace\n        if (this.modes.code) { this.modes.code.resize(); }\n    }\n\n    resizeToContent() {\n        // size to content\n        this.container.querySelector(\".\" + Editor.classes.editor.content).style.height = (this.textarea.rows * 1.5) + \"em\";\n\n        // resize ace\n        if (this.modes.code) { this.modes.code.resize(); }\n    }\n\n    // enter fullscreen\n    enterFullscreen() {\n        console.log(\"fullscreen\");\n        this.resizeToContainer();\n    }\n\n    // exit fullscreen\n    exitFullscreen() {\n        console.log(\"exit\");\n        console.trace();\n        this.resizeToContent();\n    }\n\n    handleSwitchEditor(event) {\n        console.log(\"Editor.handleSwitchEditor\");\n        var editorToSwitch = event.currentTarget.getAttribute(\"data-editor\");\n        this.hide();\n        return this.show(editorToSwitch);\n    }\n\n    handleFormSubmit() {\n        return this.valueToForm();\n    }\n}\n\nEditor.list = [];\nEditor.classes = {\n    editor: {\n        container: \"Editor\",\n        header: \"Editor-header\",\n        content: \"Editor-content\",\n        footer: \"Editor-footer\",\n        preview: \"Editor-preview\"\n    },\n    state: {\n        isHidden: \"Editor--hidden\",\n        contentIsSplit: \"Editor-content--isSplit\"\n    },\n    button: {\n        switchEditor: \"Editor--switchEditor\",\n        fullscreenToggle: \"Editor--toggleFullscreen\"\n    }\n};","// ================================\n//          PreviewInterface\n// ================================\n\nclass PreviewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.view = null;\n    }\n\n    create() {\n        var preview = document.createElement(\"iframe\");\n        preview.id = this.editor.name + \"-preview\";\n        preview.classList.add(Editor.classes.editor.preview);\n        this.editor.container.querySelector(\".Editor-content\").appendChild(preview);\n        this.view = preview;\n    }\n\n    show(full) {\n        let preview = document.getElementById(this.editor.name + \"-preview\")\n        preview.classList.remove(Editor.classes.state.isHidden);\n\n        if (full) {\n            preview.style.width = \"100%\";\n        }\n    }\n\n    hide() {\n        return document.getElementById(this.editor.name + \"-preview\").classList.add(Editor.classes.state.isHidden);\n    }\n\n    valueFromForm() {\n        let data = {\n            _token: this.editor.container.querySelector(\".contentPreviewCSRFToken\").value,\n            content: this.editor.textarea.value\n        };\n        let url = this.editor.container.querySelector(\".contentPreviewURL\").value;\n        let method = this.editor.container.querySelector(\".contentPreviewMethod\").value;\n        console.log(\"Generating content using data \", data);\n        var promise = window.fetch(\n            url,\n            FetchOptions.default()\n                .method(method)\n                .body(getFormDataObject(data))\n        )\n            .then(Oxygen.respond.checkStatus)\n            .then(Oxygen.respond.text)\n            .then((data) => {\n                this.view.srcdoc = data;\n            })\n            // this particular endpoint returns an HTML error page, so we provide a custom handler.\n            .catch((error) => {\n                if(error.response && error.response instanceof Response) {\n                    console.error(error);\n                    error.response.text().then((data) => {\n                        this.view.srcdoc = data;\n                    });\n                } else {\n                    throw error;\n                }\n            });\n    }\n\n    // we can't and don't want to do this\n    valueToForm() {}\n}\n","// ==========================\n//     SplitViewInterface\n// ==========================\n\nclass SplitViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.view = null;\n    }\n\n    create() {\n    }\n\n    show() {\n        var items = this.editor.container.querySelectorAll(\".\" + Editor.classes.editor.content);\n        for(let item of items) {\n            item.classList.add(Editor.classes.state.contentIsSplit);\n        }\n\n        var e = this.editor;\n\n        e.show(\"code\", false);\n        e.show(\"preview\", false);\n        e.modes.code.view.style.width = \"50%\";\n        e.modes.preview.view.style.width = \"50%\";\n        e.modes.code.ace.addEventListener(\"change\", this.synchronize.bind(this));\n    }\n\n    hide() {\n        var items = this.editor.container.querySelectorAll(\".\" + Editor.classes.editor.content);\n        for(let item of items) {\n            item.classList.remove(Editor.classes.state.contentIsSplit);\n        }\n\n        this.editor.hide(\"code\");\n        this.editor.hide(\"preview\");\n    }\n\n    valueFromForm() {\n    }\n\n    valueToForm() {\n    }\n\n    synchronize() {\n        if(this.currentTimer) {\n            clearTimeout(this.currentTimer);\n        }\n        this.currentTimer = setTimeout(() => {\n            if(this.editor.currentMode === \"split\") {\n                this.editor.valueToForm(\"code\");\n                this.editor.valueFromForm(\"preview\");\n            }\n        }, 1000);\n    }\n}\n","// ================================\n//             ImageEditor\n// ================================\n\nclass ImageEditor {\n\n    // -----------------\n    //      Object\n    // -----------------\n\n    constructor(container) {\n        this.container = container;\n        this.jCropApi = null;\n        this.cropDisableCounter = 0;\n        this.cropOrigin = { x: 0, y: 0 };\n        this.image = this.container.querySelector(\".\" + ImageEditor.classes.layout.image);\n        this.$image = $(this.image);\n        if (!this.image) { throw new Error(\"<img> element doesn't exist\"); }\n\n        this.forms = {\n            simple: this.image.parentNode.parentNode.querySelector(\".\" + ImageEditor.classes.form.simple),\n            advanced: this.image.parentNode.parentNode.querySelector(\".\" + ImageEditor.classes.form.advanced)\n        };\n\n        this.fields = {\n            crop: {\n                x: this.container.querySelector('[name=\"crop[x]\"]'),\n                y: this.container.querySelector('[name=\"crop[y]\"]'),\n                width: this.container.querySelector('[name=\"crop[width]\"]'),\n                height: this.container.querySelector('[name=\"crop[height]\"]')\n            },\n            resize: {\n                width: this.container.querySelector('[name=\"resize[width]\"]'),\n                height: this.container.querySelector('[name=\"resize[height]\"]'),\n                keepAspectRatio: this.container.querySelector('[name=\"resize[keepAspectRatio]\"][value=\"true\"]')\n            },\n            macro: this.container.querySelector('[name=\"macro\"]'),\n            name: this.container.querySelector('[name=\"name\"]'),\n            slug: this.container.querySelector('[name=\"slug\"]')\n        };\n\n        this.image.addEventListener(\"load\", (event) => {\n            console.log('Image Loaded');\n            let image = event.currentTarget;\n            this.imageAspectRatio = image.naturalWidth / image.naturalHeight;\n            this.fields.resize.width.value = image.naturalWidth;\n            this.fields.resize.height.value = image.naturalHeight;\n            this.enableCropping();\n        });\n\n        this.fullscreenToggle = new FullscreenToggle(this.container.querySelector(\".\" + ImageEditor.classes.button.toggleFullscreen), this.container);\n\n        this.container.querySelector(\".\" + ImageEditor.classes.button.apply).addEventListener(\"click\", this.handlePreview.bind(this));\n        this.container.querySelector(\".\" + ImageEditor.classes.button.save).addEventListener(\"click\", this.handleSave.bind(this));\n        this.container.querySelectorAll(\".\" + ImageEditor.classes.form.crop).forEach(item => {\n            item.addEventListener(\"input\", this.handleCropInputChange.bind(this));\n        })\n        this.container.querySelectorAll(\".\" + ImageEditor.classes.form.resize).forEach(item => {\n            item.addEventListener(\"input\", this.handleResizeInputChange.bind(this));\n        })\n    }\n\n    handlePreview() {\n        this.applyChanges(this.gatherData());\n    }\n\n    handleSave() {\n        var data = this.gatherData();\n        data.save = true;\n        data.name = this.fields.name.value;\n        data.slug = this.fields.slug.value;\n        this.applyChanges(data);\n\n        this.progressNotification = new Notification({\n            content: \"Saving Image\",\n            status: \"success\"\n        });\n        NotificationCenter.present(this.progressNotification);\n    }\n\n    gatherData() {\n        var mode = TabSwitcher.list[0].current;\n        switch (mode) {\n            case \"simple\": return this.getSimpleData();\n            case \"advanced\": return this.getAdvancedData();\n            default: return {};\n        }\n    }\n\n    getSimpleData() {\n        return this.removeDefaultFields(getFormData(this.forms.simple));\n    }\n\n    removeDefaultFields(formData) {\n        var resize = (formData) => {\n            return (!formData[\"resize[width]\"] || formData[\"resize[width]\"] === this.image.naturalWidth.toString()) &&(!formData[\"resize[height]\"] || formData[\"resize[height]\"] === this.image.naturalHeight.toString());\n        };\n\n        var defaults = {\n            \"fit[position]\": (item) => {\n                return item === \"center\";\n            },\n            \"resize[width]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"resize[height]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"resize[keepAspectRatio]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"gamma\": (item) => {\n                return item === \"1\";\n            },\n            \"greyscale\": (item) => {\n                return item === \"false\";\n            },\n            \"invert\": (item) => {\n                return item === \"false\";\n            },\n            \"rotate[backgroundColor]\": (item) => {\n                return item === \"#ffffff\";\n            },\n            \"crop[x]\": (item) => {\n                //return item === \"\"  0 : parseInt(item)\n                if(this.pendingCropOrigin === undefined) { this.pendingCropOrigin = {}; }\n                this.pendingCropOrigin.x = parseInt(item);\n            },\n            \"crop[y]\": (item) => {\n                if(this.pendingCropOrigin === undefined) { this.pendingCropOrigin = {}; }\n                this.pendingCropOrigin.y = parseInt(item);\n                //this.imageDimensions.cropY = item === \"\" ? 0 : parseInt(item);\n            }\n        };\n\n        for (var key in formData) {\n            var item = formData[key];\n            if(defaults[key] && defaults[key](item, formData)) {\n                delete formData[key];\n            } else if(item === \"0\" || item === \"\") {\n                delete formData[key];\n            }\n        }\n\n        return formData;\n    }\n\n    getAdvancedData() {\n        return JSON.parse(this.fields.macro.value);\n    }\n\n    // --------------------------------------------\n    //                     REQUEST\n    // --------------------------------------------\n\n    applyChanges(data) {\n        if(this.applyingChanges) {\n            NotificationCenter.present(new Notification({\n                content: \"Already Processing\",\n                status: \"failed\"\n            }));\n            return;\n        }\n\n        this.applyingChanges = true;\n\n        console.log(\"Processing Image Using Commands: \", data);\n\n        var url = this.image.getAttribute(\"data-root\") + \"?\" + serializeToQueryString(data);\n        var headers = new Headers();\n        headers.set(\"Accept\", \"application/json\");\n        var options = {\n            method: \"GET\",\n            credentials: \"same-origin\",\n            headers: headers\n        };\n\n        console.log(\"Requesting URL: \", url, options);\n\n        window.fetch(url, options)\n            .then(Oxygen.respond.checkStatus)\n            .then(response => {\n                return response.blob();\n            })\n            .then(myBlob => {\n                if ((this.jCropApi != null)) { this.jCropApi.destroy(); }\n                this.jCropApi = null;\n                this.cropOrigin = this.pendingCropOrigin;\n\n                let objectURL = URL.createObjectURL(myBlob);\n                this.image.style.removeProperty('width');\n                this.image.style.removeProperty('height');\n                this.image.src = objectURL;\n\n                //this.image[0].src = \"data:image/jpeg;base64,\" + base64Encode(response);\n            })\n            .then(\n                r => {\n                    NotificationCenter.present(new Notification({content: \"Image Processing Successful\", status: \"success\"}));\n                    this.applyingChanges = false;\n                },\n                e => {\n                    this.applyingChanges = false; throw e;\n                }\n            )\n            .catch(Oxygen.respond.handleAPIError);\n        /*$.ajax({\n            type:           \"GET\",\n            url:            this.image.attr(\"data-root\"),\n            data:           data,\n            contentType:    false,\n            success:        this.onRequestEnd.bind(this),\n            error:          () => {\n                //this.progressNotification.hide();\n                //return Ajax.handleError();\n            },\n            xhr:            () => {\n                var object = window.ActiveXObject ? new ActiveXObject(\"XMLHttp\") : new XMLHttpRequest();\n                object.overrideMimeType(\"text/plain; charset=x-user-defined\");\n                return object;\n            }\n        });*/\n    }\n\n    // --------------------------------------------\n    //                     CROP\n    // --------------------------------------------\n\n    enableCropping() {\n        /*if(this.jCropApi != null) {\n            this.jCropApi.enable();\n        } else {*/\n            var that = this;\n            this.$image.Jcrop({\n                    trueSize: [this.image.naturalWidth, this.image.naturalHeight],\n                    onChange: this.handleCropSelect.bind(this),\n                    onSelect: this.handleCropSelect.bind(this),\n                    onRelease: this.handleCropRelease.bind(this)\n                }, function() {\n                    that.jCropApi = this;\n                }\n            );\n        //}\n    }\n\n    handleCropSelect(c) {\n        if(this.cropDisableCounter <= 0) {\n            this.fields.crop.x.value = Math.round(c.x + this.cropOrigin.x).toString();\n            this.fields.crop.y.value = Math.round(c.y + this.cropOrigin.y).toString();\n            this.fields.crop.width.value = Math.round(c.w).toString();\n            this.fields.crop.height.value = Math.round(c.h).toString();\n        } else {\n            this.cropDisableCounter--;\n        }\n    }\n\n    handleCropInputChange(event) {\n        if(this.jCropApi === null) { return; }\n        let x = parseInt(this.fields.crop.x.value === \"\" ? 0 : this.fields.crop.x.value);\n        let y = parseInt(this.fields.crop.y.value === \"\" ? 0 : this.fields.crop.y.value);\n        let w = parseInt(this.fields.crop.width.value === \"\" ? 0 : this.fields.crop.width.value);\n        let h = parseInt(this.fields.crop.height.value === \"\" ? 0 : this.fields.crop.height.value);\n\n        // this counts down from 2, so the next two events generated by Jcrop are ignored.\n        this.cropDisableCounter = 2;\n\n        return this.jCropApi.setSelect([\n            x,\n            y,\n            x + w,\n            y + h\n        ]);\n    }\n\n    handleCropRelease() {\n        this.fields.crop.x.value = 0;\n        this.fields.crop.y.value = 0;\n        this.fields.crop.width.value = 0;\n        this.fields.crop.height.value = 0;\n    }\n\n    handleResizeInputChange(e) {\n        if(this.fields.resize.keepAspectRatio[0].checked) {\n            var name = e.target.name;\n            var value = e.target.value;\n            console.log(name, value);\n            if(name === 'resize[width]') {\n                return this.fields.resize.height.value = Math.round(value / this.imageAspectRatio);\n            } else {\n                return this.fields.resize.width.value = Math.round(value * this.imageAspectRatio.ratio);\n            }\n        }\n    }\n\n    static initialize(container) {\n        for(let item of container.querySelectorAll(\".\" + ImageEditor.classes.layout.container)) {\n            ImageEditor.list.push(new ImageEditor(item));\n        }\n    }\n\n};\n\nfunction serializeToQueryString(object) {\n    return Object.keys(object).reduce(function(a,k){a.push(k+'='+encodeURIComponent(object[k]));return a},[]).join('&');\n}\n\nImageEditor.list = [];\n\nImageEditor.classes = {\n    layout: {\n        container: \"ImageEditor\",\n        image: \"ImageEditor-image\"\n    },\n    button: {\n        toggleFullscreen: \"ImageEditor-toggleFullscreen\",\n        save: \"ImageEditor-save\",\n        apply: \"ImageEditor-apply\"\n    },\n    form: {\n        simple: \"ImageEditor-form--simple\",\n        advanced: \"ImageEditor-form--advanced\",\n        crop: \"ImageEditor-crop-input\",\n        resize: \"ImageEditor-resize-input\"\n    }\n};\n","Oxygen || (Oxygen = {});\nOxygen.initLogin = function() {\n    var loginForm = document.querySelector(\".Login-form\");\n    loginForm.classList.add(\"Login--noTransition\");\n    loginForm.classList.add(\"Login--slideDown\");\n\n    loginForm.offsetHeight;\n    loginForm.classList.remove(\"Login--noTransition\");\n\n    setTimeout(function() {\n        document.body.classList.remove(\"Login--isHidden\");\n    }, 500);\n\n    document.querySelector(\".Login-scrollDown\").addEventListener(\"click\", function() {\n        document.querySelector(\".Login-message\").classList.add(\"Login--slideUp\");\n        loginForm.classList.remove(\"Login--slideDown\");\n        document.querySelector(\".Login-background--blur\").classList.add(\"Login--isHidden\");\n    });\n\n    let form = loginForm.querySelector(\"form\");\n\n    form.addEventListener(\"submit\", function() {\n        loginForm.classList.add(\"Login--slideUp\");\n    });\n\n    form.modifyPromise = function(promise) {\n        return promise.then(\n            function(data) {\n                if(data.status !== undefined && data.status !== \"success\") {\n                    loginForm.classList.remove(\"Login--slideUp\");\n                }\n                return data;\n            },\n            function(error) {\n                loginForm.classList.remove(\"Login--slideUp\");\n                throw error;\n            }\n        );\n    };\n};\n","window.Oxygen || (window.Oxygen = {});\nOxygen.reset = function() {\n    window.editors = [];\n    Oxygen.load = [];\n    Oxygen.setBodyScrollable(true);\n    return Dropdown.handleGlobalClick({ target: document.body });\n};\n\nOxygen.setBodyScrollable = function(scrollable) {\n    if (scrollable) {\n        document.body.classList.remove(\"Body--noScroll\");\n    } else {\n        document.body.classList.add(\"Body--noScroll\");\n    }\n};\n\nOxygen.init = function(container) {\n\n    //\n    // -------------------------\n    //       FLASH MESSAGE\n    // -------------------------\n    //\n    // This small delay helps to\n    // reduce lag on page load.\n    //\n\n    NotificationCenter.initializeExistingMessages();\n\n    Dialog.registerEvents(container);\n\n    //\n    // -------------------------\n    //       IMAGE EDITOR\n    // -------------------------\n    //\n    // Initialises image editors for the page.\n    //\n\n    ImageEditor.initialize(container);\n\n    //\n    // -------------------------\n    //           LOGIN\n    // -------------------------\n    //\n    // Login form animations.\n    //\n\n    if(document.querySelector(\".Login-form\")) {\n        Oxygen.initLogin();\n    }\n\n    //\n    // -------------------------\n    //           OTHER\n    // -------------------------\n    //\n    // Other event handlers.\n    //\n\n    Dropdown.registerEvents(container);\n    EditableList.registerEvents(container);\n    Form.findAll(container);\n    Upload.registerEvents(container);\n    TabSwitcher.findAll(container);\n    Slider.findAll(container);\n\n    //\n    // -------------------------\n    //       CODE EDITOR\n    // -------------------------\n    //\n    // Initialises code editors for the page.\n    //\n\n    if ((typeof editors !== \"undefined\" && editors !== null)) {\n        Editor.createEditors(editors);\n    }\n\n    let load = Oxygen.load || [];\n    for (let i = 0, callback; i < load.length; i++) {\n        callback = load[i];\n        callback();\n    }\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    MainNav.headroom();\n\n    if ((typeof user !== \"undefined\" && user !== null)) {\n        Preferences.setPreferences(user);\n    }\n\n    Oxygen.init(document);\n\n    if (Preferences.get('pageLoad.smoothState.enabled', true) === true) {\n        console.log(\"smoothstate enabled\");\n        window.smoothState = new SmoothState();\n        SmoothState.setTheme(Preferences.get('pageLoad.smoothState.theme', 'slide'));\n    } else {\n        console.log(\"smoothstate disabled\");\n    }\n\n    let progressThemes = Preferences.get('pageLoad.progress.theme', [\"minimal\", \"spinner\"]);\n    console.log(\"Applying progress themes:\", progressThemes);\n    for (let i = 0, theme; i < progressThemes.length; i++) {\n        theme = progressThemes[i];\n        document.body.classList.add(\"Page-progress--\" + theme);\n    }\n\n    Form.registerKeydownHandler();\n    Dropdown.registerGlobalEvent();\n});\n"]}