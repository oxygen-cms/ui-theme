"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function getFormData(e){var t,r={},n=_createForOfIteratorHelper(e.querySelectorAll("[name]"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if("checkbox"!=o.type&&"radio"!=o.type||o.checked)if(void 0==o.name&&console.dir(o),"select-multiple"==o.type){r[o.name]=[];var i,a=_createForOfIteratorHelper(o.options);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.selected&&r[o.name].push(s.value)}}catch(l){a.e(l)}finally{a.f()}}else if("file"==o.type){var c,u=null!=(c=o.filesToUpload)?c:o.files;r[o.name]=[];for(var d,f=0;f<u.length;f++)d=u[f],r[o.name].push(d)}else o.name.endsWith("[]")?(("undefined"==typeof r[o.name]||null===r[o.name])&&(r[o.name]=[]),r[o.name].push(o.value)):r[o.name]=o.value}}catch(l){n.e(l)}finally{n.f()}return r}function getFormDataObject(e){var t=new FormData;for(var r in e)if(e[r]instanceof Array){var n,o=_createForOfIteratorHelper(e[r]);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.append(r,i)}}catch(a){o.e(a)}finally{o.f()}}else t.append(r,e[r]);return t}function compareByValue(e,t){for(var r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;switch(_typeof(e[r])){case"object":if(!compareByValue(e[r],t[r]))return!1;break;case"function":if("undefined"==typeof t[r]||"compare"!=r&&e[r].toString()!=t[r].toString())return!1;break;default:if(e[r]!=t[r])return!1}}for(var r in t)if(t.hasOwnProperty(r)&&"undefined"==typeof e[r])return!1;return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createSuper(e){return function(){var t,r=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var n=_getPrototypeOf(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function fileSize(e){var t,r,n,o;for(o=e+" bytes",n=["KB","MB","GB","TB","PB","EB","ZB","YB"],r=0,t=e/1024;t>1;)o=t.toFixed(3)+" "+n[r],t/=1024,r++;return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function serializeToQueryString(e){return Object.keys(e).reduce(function(t,r){return t.push(r+"="+encodeURIComponent(e[r])),t},[]).join("&")}var parentMatchingSelector=function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matchesSelector(t))return e;return null},parentOrSelfMatchingSelector=function(e,t){if(e.matchesSelector(t))return e;for(;e&&e!==document;e=e.parentNode)if(e.matchesSelector(t))return e;return null};NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var matchesMethod=function(){var e=Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++){var n=t[r],o=n+"MatchesSelector";if(e[o])return o}}();Element.prototype.matchesSelector=function(e){return this[matchesMethod](e)};var Dialog=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll('[data-dialog-type="confirm"]'));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.addEventListener("click",e.handleConfirmClick)}}catch(i){n.e(i)}finally{n.f()}var a,s=_createForOfIteratorHelper(t.querySelectorAll('[data-dialog-type="alert"]'));try{for(s.s();!(a=s.n()).done;){var l=a.value;l.addEventListener("click",e.handleAlertClick)}}catch(i){s.e(i)}finally{s.f()}}},{key:"handleAlertClick",value:function(e){vex.dialog.alert(e.currentTarget.getAttribute("data-dialog-message"))}},{key:"handleConfirmClick",value:function(e,t){var r=e.currentTarget;if("true"!==r.getAttribute("data-dialog-disabled")){var n;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n={message:r.getAttribute("data-dialog-message"),callback:function(e){e&&(r.setAttribute("data-dialog-disabled","true"),r.click())}};for(var o in t)n[o]=t[o];return vex.dialog.confirm(n)}}}]),e}(),Dropdown=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerGlobalEvent",value:function(){return document.addEventListener("click",e.handleGlobalClick)}},{key:"registerEvents",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll("."+e.classes.dropdownToggle));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.addEventListener("click",e.handleClick)}}catch(i){n.e(i)}finally{n.f()}}},{key:"handleClick",value:function(t){for(var r=t.target;!r.classList.contains(e.classes.dropdownToggle);){if(r.matchesSelector("a[href], form"))return;r=r.parentNode}var n=r.querySelector("."+e.classes.dropdownList);n.classList.contains(e.classes.isActive)?n.classList.remove(e.classes.isActive):(e.reset(),n.classList.add(e.classes.isActive))}},{key:"handleGlobalClick",value:function(t){null==parentMatchingSelector(t.target,"."+e.classes.dropdownToggle)&&e.reset()}},{key:"reset",value:function(t){var r,n=_createForOfIteratorHelper(document.querySelectorAll("."+e.classes.dropdownList));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.classList.remove(e.classes.isActive)}}catch(i){n.e(i)}finally{n.f()}}}]),e}();Dropdown.classes={dropdownToggle:"Dropdown-container",dropdownList:"Dropdown",isActive:"is-active"};var EditableList=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(t){var r,n=_createForOfIteratorHelper(t.getElementsByClassName(e.classes.add));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.addEventListener("click",e.handleAdd)}}catch(i){n.e(i)}finally{n.f()}t.addEventListener("click",e.handleRemove)}},{key:"handleAdd",value:function(t){var r=t.currentTarget.parentNode.querySelector("."+e.classes.container),n=r.querySelector("."+e.classes.template),o=n.cloneNode(!0);o.classList.remove(e.classes.template),r.appendChild(o)}},{key:"handleRemove",value:function(t){var r=parentOrSelfMatchingSelector(t.target,"."+e.classes.remove);if(r){var n=parentMatchingSelector(t.target,"."+e.classes.row);n.parentNode&&(n.parentNode.removeChild(n),console.log("removed node"))}}}]),e}();EditableList.classes={container:"EditableList",template:"EditableList-template",row:"EditableList-row",remove:"EditableList-remove",add:"EditableList-add"},window.Oxygen||(window.Oxygen={});var FetchOptions=function(){function e(){_classCallCheck(this,e),this.headers=new Headers}return _createClass(e,[{key:"wantJson",value:function(){return this.headers.set("Accept","application/json"),this}},{key:"contentType",value:function(e){return this.headers.set("Content-Type",e),this}},{key:"method",value:function(e){return this.method=e,this}},{key:"body",value:function(e){return this.body=e,this}},{key:"cookies",value:function(){return this.credentials="same-origin",this}}],[{key:"default",value:function(){return(new e).cookies()}}]),e}();Oxygen.respond={},Oxygen.respond.text=function(e){return e.text()},Oxygen.respond.json=function(e){return e.json()},Oxygen.respond.checkStatus=function(e){if(e.ok)return e;var t=new Error;throw t.response=e,t},Oxygen.respond.notification=function(e){return Notification.isNotification(e)&&NotificationCenter.present(new Notification(e)),e},Oxygen.respond.redirect=function(e){return e.redirect&&(window.smoothState&&e.hardRedirect!==!0?window.smoothState.load(e.redirect,!1):window.location.replace(e.redirect)),e},Oxygen.respond.handleAPIError=function(e){if(!(e.response&&e.response instanceof Response))throw e;e.response.json().then(Oxygen.handleAPIError)["catch"](function(e){console.error("Error response did not contain valid JSON: ",e),NotificationCenter.present(new Notification({content:"Whoops, looks like something went wrong.",status:"bug"}))})},Oxygen.handleAPIError=function(e){console.error(e),Notification.isNotification(e)?NotificationCenter.present(new Notification(e)):e.error?NotificationCenter.present(new Notification({content:'PHP Exception of type <code class="no-wrap">'+e.error.type+'</code> with message <code class="no-wrap">'+e.error.message+'</code> thrown at <code class="no-wrap">'+e.error.file+":"+e.error.line+"</code>",status:"bug"})):(console.log("JSON error response unhandled: ",e),NotificationCenter.present(new Notification({content:"Whoops, looks like something went wrong.",status:"bug"})))};var Form=function(){function e(t){_classCallCheck(this,e),this.form=t,this.originalData=getFormData(this.form),this.contentGenerators=[],this.registerEvents()}return _createClass(e,null,[{key:"findAll",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll("form"));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.formObject=new e(o)}}catch(i){n.e(i)}finally{n.f()}$(t).find(e.classes.taggableInput).tagging({"edit-on-delete":!1})}},{key:"registerKeydownHandler",value:function(){return document.addEventListener("keydown",e.handleKeydown)}},{key:"handleKeydown",value:function(t){if((t.ctrlKey||t.metaKey)&&83===t.which)for(var r=document.getElementsByTagName("form"),n=0;n<r.length;n++){var o=r[n];o.classList.contains(e.classes.submitOnKeydown)&&o.formObject&&(o.formObject.submit(),t.preventDefault())}}}]),_createClass(e,[{key:"registerEvents",value:function(){var t=this;if(this.form.classList.contains(e.classes.warnBeforeExit)){var r,n=_createForOfIteratorHelper(document.querySelectorAll('a, button[type="submit"]'));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.addEventListener("click",function(e){return t.handleExit(e)})}}catch(i){n.e(i)}finally{n.f()}}return this.form.addEventListener("submit",function(e){return t.handleSubmit(e)}),this.form.classList.contains(e.classes.submitAsyncOnChange)&&this.form.addEventListener("change",function(e){e.preventDefault(),t.submitAsync()}),this.form.classList.contains(e.classes.autoSubmit)?this.submit():void 0}},{key:"handleExit",value:function(t){var r=this;if(!t.currentTarget.classList.contains("Form-submit")&&document.body.contains(this.form)){
this.generateContent();var n=this.originalData,o=getFormData(this.form);if(console.log("original form data:",n),console.log("current form data:",o),!compareByValue(n,o)){console.log("=> form data differs");var i=t.currentTarget;"true"!==i.getAttribute("data-dialog-disabled")&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),vex.dialog.confirm({message:e.messages.confirmation,buttons:[{text:"Save",type:"button",className:"vex-dialog-button-primary",click:function(e,t){e.data().vex.value="save",vex.close(e.data().vex.id)}},$.extend({},vex.dialog.buttons.NO,{text:"Cancel"}),{text:"Don't Save",type:"button",className:"vex-dialog-button-secondary vex-dialog-button-left",click:function(e,t){e.data().vex.value="continue",vex.close(e.data().vex.id)}}],callback:function(t){return"continue"==t?(i.setAttribute("data-dialog-disabled","true"),i.click()):void("save"==t&&(r.form.classList.contains(e.classes.submitAsync)?(r.submitAsync(!0),i.setAttribute("data-dialog-disabled","true"),i.click()):r.submit()))}}))}}}},{key:"submit",value:function(){this.form.querySelector('button[type="submit"]').click()}},{key:"generateContent",value:function(){var e,t=_createForOfIteratorHelper(this.contentGenerators);try{for(t.s();!(e=t.n()).done;){var r=e.value;r(this)}}catch(n){t.e(n)}finally{t.f()}}},{key:"handleSubmit",value:function(t){this.generateContent(),this.form.classList.contains(e.classes.submitAsync)&&!e.disableAsync&&(t.preventDefault(),this.submitAsync())}},{key:"submitAsync",value:function(e){var t=this,r=function(e){return"success"===e.status&&(t.originalData=getFormData(t.form),console.log("Form Saved Successfully")),e},n=getFormData(this.form);console.log("Submitting Form with Data: ",n);var o=window.fetch(this.form.action,FetchOptions["default"]().method(this.form.method).body(getFormDataObject(n)).wantJson()).then(Oxygen.respond.checkStatus).then(Oxygen.respond.json).then(r),i=this.form.modifyPromise;return void 0===i&&(i=function(e){return e}),o=o.then(Oxygen.respond.notification),e||(o=o.then(Oxygen.respond.redirect)),o=i(o),o=o["catch"](Oxygen.respond.handleAPIError)}}]),e}();Form.disableAsync=!1,document.addEventListener("keydown",function(e){e.altKey&&(e.controlKey||e.metaKey)&&74==e.which&&(Form.disableAsync=!Form.disableAsync,e.preventDefault(),NotificationCenter.present(new Notification({content:"Asynchronous form submission "+(Form.disableAsync?"disabled":"enabled"),status:"info"})))}),Form.messages={confirmation:"Do you want to save changes?"},Form.classes={warnBeforeExit:"Form--warnBeforeExit",submitOnKeydown:"Form--submitOnKeydown",submitAsync:"Form--sendAjax",submitAsyncOnChange:"Form--sendAjaxOnChange",autoSubmit:"Form--autoSubmit",taggableInput:".Form-taggable"};var MainNav=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"headroom",value:function t(){var e=document.querySelector(".MainNav");if(e&&window.innerWidth>768){var t=new Headroom(e,{tolerance:20,offset:50,classes:{initial:"Headroom",pinned:"Headroom--pinned",unpinned:"Headroom--unpinned",top:"Headroom--top",notTop:"Headroom--not-top"}});t.init()}}}]),e}(),NotificationCenter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initializeExistingMessages",value:function(){var t,r=document.querySelector("."+Notification.classes.container).querySelectorAll("."+Notification.classes.item),n=_createForOfIteratorHelper(r);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.registerHide(new Notification({message:o}))}}catch(i){n.e(i)}finally{n.f()}}},{key:"present",value:function(t){document.querySelector("."+Notification.classes.container).appendChild(t.message),e.registerHide(t)}},{key:"registerHide",value:function(t){if(null!=t.hideAfter){setTimeout(function(){e.hide(t)},t.hideAfter)}t.message.addEventListener("click",function(r){e.hide(t),"undefined"!=typeof auto&&clearTimeout(auto)})}},{key:"hide",value:function(e){e.message.classList.add("is-sliding-up"),setTimeout(function(){var t=e.message;t.parentNode&&t.parentNode.removeChild(t)},500)}}]),e}(),Notification=function(){function e(t){if(_classCallCheck(this,e),t.log&&console.log(t.log),this.hideAfter=15e3,t.message)this.message=t.message,this.message.classList.remove("is-hidden");else{if(!t.status||!t.content)throw new Error("Invalid Arguments For New Notification: "+JSON.stringify(t));this.message=document.createElement("div"),this.message.classList.add(e.classes.item),this.message.classList.add("Notification--"+t.status),"failed"==t.status&&(this.hideAfter=null),this.message.innerHTML=t.content+'<span class="Notification-dismiss Icon Icon-times"></span>'}}return _createClass(e,null,[{key:"isNotification",value:function(e){return void 0!==e.message||void 0!==e.content&&void 0!==e.status}}]),e}();Notification.classes={container:"Notification-container",item:"Notification"};var Preferences=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"setPreferences",value:function(t){return e.preferences=t}},{key:"isDefined",value:function(e){return"undefined"!=typeof e&&null!==e}},{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.preferences;if(!e.isDefined(n))return r;for(var o=t.split("."),i=o.length,a=0;e.isDefined(n)&&i>a;){var s=o[a];n=n[s],a++}return e.isDefined(n)?n:(console.log("Preferences key ",t,"was not defined, using default ",r),r)}},{key:"has",value:function(t){var r=e.preferences;if(!r)return!1;for(var n=t.split("."),o=(n.pop(),n.length),i=1,a=n[0];(r=r[a])&&o>i;)a=n[i],i++;return r}}]),e}(),Slider=function(){function e(t){_classCallCheck(this,e),this.container=t,this.list=this.container.querySelector(e.selectors.list),this.items=this.container.querySelectorAll(e.selectors.item),this.interval=this.container.getAttribute("data-interval")||5e3,this.previousId=0,this.currentId=0,this.nextId=0,this.animating=!1,this.animationTime=1e3,this.registerEvents(),this.next(),"true"===this.container.getAttribute("data-autoplay")&&this.play()}return _createClass(e,null,[{key:"findAll",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll(e.selectors.slider));try{for(n.s();!(r=n.n()).done;){var o=r.value;e.list.push(new e(o))}}catch(i){n.e(i)}finally{n.f()}}}]),_createClass(e,[{key:"registerEvents",value:function(){this.container.querySelector(e.selectors.back).addEventListener("click",this.previous.bind(this)),this.container.querySelector(e.selectors.forward).addEventListener("click",this.next.bind(this))}},{key:"play",value:function(){var e="reverse"===this.container.getAttribute("data-direction")?this.previous.bind(this):this.next.bind(this);this.timer=setInterval(e,this.interval)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"hideAll",value:function(){var t,r=_createForOfIteratorHelper(this.items);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.classList="",n.classList.add(e.classes.item),n.classList.add(e.classes.isHidden)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getItem",value:function(e){var t=this.items[e];return(void 0===t||null===t)&&console.error("no slider item at index: ",e),t}},{key:"next",value:function(){if(!this.shouldAnimate())return!1;this.previousId=this.currentId,this.currentId+=1,this.currentId>=this.items.length&&(this.currentId=0),this.nextId=this.currentId+1,this.nextId>=this.items.length&&(this.nextId=0);var t=this.getItem(this.currentId),r=this.getItem(this.previousId);this.hideAll(),r.classList.remove(e.classes.isHidden),r.classList.add(e.classes.slideOutLeft),t.classList.remove(e.classes.isHidden),t.classList.add(e.classes.slideInRight)}},{key:"previous",value:function(){if(!this.shouldAnimate())return!1;this.nextId=this.currentId,this.currentId-=1,this.currentId<=0&&(this.currentId=this.items.length-1),this.previousId=this.currentId-1,this.nextId<=0&&(this.nextId=this.items.length-1);var t=this.getItem(this.currentId),r=this.getItem(this.nextId);this.hideAll(),r.classList.remove(e.classes.isHidden),r.classList.add(e.classes.slideOutRight),t.classList.remove(e.classes.isHidden),t.classList.add(e.classes.slideInLeft)}},{key:"shouldAnimate",value:function(){var e=this;return this.animating?!1:(this.animating=!0,setTimeout(function(){e.animating=!1},this.animationTime),!0)}}]),e}();Slider.selectors={slider:".Slider",list:".Slider-list",item:".Slider-item",back:".Slider-back",forward:".Slider-forward"},Slider.classes={item:"Slider-item",isCurrent:"Slider-item--current",isHidden:"Slider-item--hidden",slideInLeft:"Slider-item--slideInLeft",slideInRight:"Slider-item--slideInRight",slideOutLeft:"Slider-item--slideOutLeft",slideOutRight:"Slider-item--slideOutRight",isAfter:"Slider-item--after",noTransition:"Slider--noTransition"},Slider.list=[];var SmoothState=function(){function e(){_classCallCheck(this,e),this.loading=!1,this.smoothState=$("#page").smoothState({anchors:".Link--smoothState",root:$(document),cacheLength:0,forms:"null",onStart:{duration:350,render:this.onStart},onProgress:{duration:0,render:this.onProgress},onReady:{duration:0,render:this.onReady},onAfter:this.onAfter}).data("smoothState")}return _createClass(e,[{key:"onStart",value:function(e){var t,r=_createForOfIteratorHelper(document.querySelectorAll("html, body"));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.scrollTop=0}}catch(o){r.e(o)}finally{r.f()}this.loading=!0;var i=document.getElementsByClassName("Block"),a=Array.prototype.slice.call(i);a.reverse();for(var s=function(e){var t=a[e];setTimeout(function(){return t.classList.add("Block--isExiting")},50*e)},l=0;l<a.length;l++)s(l)}},{key:"onProgress",value:function(t){e.setCursor("wait")}},{key:"onReady",value:function(t,r){e.setCursor("auto"),Oxygen.reset(),t[0].style.display="none",t.html(r),document.querySelector(".pace-activity").classList.remove("pace-activity-active");for(var n=document.getElementsByClassName("Block"),o=function(){var e=n[i];e.classList.add("Block--isHidden"),setTimeout(function(){e.classList.remove("Block--isHidden"),e.classList.add("Block--isEntering"),setTimeout(function(){e.classList.remove("Block--isEntering")},250)},50*i)},i=0;i<n.length;i++)o();t[0].style.display="block"}},{key:"onAfter",value:function(e,t){return this.loading=!1,Oxygen.init(document.getElementById("page"))}},{key:"load",value:function(e,t){return this.smoothState.load(e,t)}}],[{key:"setCursor",value:function(e){var t,r=document.querySelectorAll("html, body"),n=_createForOfIteratorHelper(r);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.style.cursor=e}}catch(i){n.e(i)}finally{n.f()}var a,s=document.querySelectorAll("a"),l=_createForOfIteratorHelper(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.style.cursor=e}}catch(i){l.e(i)}finally{l.f()}}},{key:"setTheme",value:function(e){console.log("Setting SmoothState Theme: ",e);var t=document.getElementById("page");t&&t.classList.add("Page-transition--"+e)}}]),e}(),TabSwitcher=function(){function e(t,r){_classCallCheck(this,e),this.tabs=t,this.content=r,this.findDefault(),this.registerEvents()}return _createClass(e,null,[{key:"findAll",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll(e.selectors.container));try{for(n.s();!(r=n.n()).done;){var o=r.value;console.log(o);var i=o.matchesSelector(e.selectors.tabs)?o:o.querySelector(e.selectors.tabs),a=o.matchesSelector(e.selectors.content)?o:o.querySelector(e.selectors.content);e.list.push(new e(i,a))}}catch(s){n.e(s)}finally{n.f()}}}]),_createClass(e,[{key:"findDefault",value:function(){var e=this.tabs.querySelector("[data-default-tab]").getAttribute("data-switch-to-tab");this.setTo(e)}},{key:"registerEvents",value:function(){var e=this;this.tabs.querySelectorAll("[data-switch-to-tab]").forEach(function(t){t.addEventListener("click",function(t){e.setTo(t.currentTarget.getAttribute("data-switch-to-tab"))})})}},{key:"setTo",value:function(t){this.current=t;var r,n=_createForOfIteratorHelper(this.content.querySelectorAll("[data-tab]"));try{for(n.s();!(r=n.n()).done;){var o=r.value;o.classList.remove(e.classes.active)}}catch(i){n.e(i)}finally{n.f()}this.content.querySelector('[data-tab="'+t+'"]').classList.add(e.classes.active);var a,s=_createForOfIteratorHelper(this.tabs.querySelectorAll("[data-switch-to-tab]"));try{for(s.s();!(a=s.n()).done;){var l=a.value;l.classList.remove(e.classes.active)}}catch(i){s.e(i)}finally{s.f()}this.tabs.querySelector('[data-switch-to-tab="'+t+'"]').classList.add(e.classes.active)}}]),e}();TabSwitcher.classes={active:"TabSwitcher--isActive"},TabSwitcher.selectors={container:".TabSwitcher",tabs:".TabSwitcher-tabs",content:".TabSwitcher-content"},TabSwitcher.list=[];var Toggle=function(){function e(t,r,n){_classCallCheck(this,e),this.toggle=t,this.enableCallback=r,this.disableCallback=n,this.registerEvents()}return _createClass(e,[{key:"registerEvents",value:function(){var e=this;this.toggle.addEventListener("click",function(t){return e.handleToggle(t)}),void 0==this.toggle.getAttribute("data-enabled")&&this.toggle.setAttribute("data-enabled","false")}},{key:"handleToggle",value:function(e){"true"===this.toggle.getAttribute("data-enabled")?(this.toggle.setAttribute("data-enabled","false"),this.disableCallback(e)):(this.toggle.setAttribute("data-enabled","true"),this.enableCallback(e))}}]),e}();Toggle.classes={ifEnabled:"Toggle--ifEnabled",ifDisabled:"Toggle--ifDisabled"};var FullscreenToggle=function(e){function t(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return _classCallCheck(this,t),o=r.call(this,e,null,null),o.fullscreenElement=n,o.enableCallback=o.enterFullscreen,o.disableCallback=o.exitFullscreen,o.enterFullscreenCallback=i,o.exitFullscreenCallback=a,o}_inherits(t,e);var r=_createSuper(t);return _createClass(t,[{key:"enterFullscreen",value:function(){this.fullscreenElement.classList.add("FullscreenToggle--isFullscreen"),document.body.classList.add("Body--noScroll");var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.enterFullscreenCallback()}},{key:"exitFullscreen",value:function(){this.fullscreenElement.classList.remove("FullscreenToggle--isFullscreen"),document.body.classList.remove("Body--noScroll"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.exitFullscreenCallback()}}]),t}(Toggle),Upload=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll(e.selectors.uploadElement));try{for(n.s();!(r=n.n()).done;){var o=r.value,i=o.querySelector(e.selectors.dropzoneElement);i.addEventListener("dragover",e.handleDragOver),i.addEventListener("dragleave",e.handleDragLeave),i.addEventListener("drop",e.handleDrop),o.querySelector("input[type=file]").addEventListener("change",e.handleChange)}}catch(a){n.e(a)}finally{n.f()}}},{key:"handleDragOver",value:function(t){return t.preventDefault(),t.currentTarget.classList.add(e.states.onDragOver)}},{key:"handleDragLeave",value:function(t){return t.currentTarget.classList.remove(e.states.onDragOver)}},{key:"handleDrop",value:function(t){t.preventDefault(),t.currentTarget.classList.remove(e.states.onDragOver);var r=parentMatchingSelector(t.currentTarget,e.selectors.uploadElement);e.addFiles(r,t.dataTransfer.files)}},{key:"handleChange",value:function(t){e.addFiles(parentMatchingSelector(t.currentTarget,e.selectors.uploadElement),t.currentTarget.files),console.dir(t.currentTarget),t.currentTarget.value=""}},{key:"addFiles",value:function(t,r){var n,o=t.querySelector('input[type="file"]'),i=_createForOfIteratorHelper(r);try{var a=function(){var i=n.value,a=/^image\//;console.log(i.type);var s=document.createElement("div");if(s.classList.add("FileUpload-preview"),s.innerHTML='<div class="FileUpload-preview-info"><span>'+i.name+'</span><button type="button" class="FileUpload-preview-remove Button--transparent Icon Icon-times"></button><span class="FileUpload-preview-size">'+fileSize(i.size)+"</span></div>",t.insertBefore(s,t.firstChild),s.querySelector(e.selectors.removeFile).addEventListener("click",function(n){var a,l;a=n.currentTarget,s=parentMatchingSelector(a,e.selectors.previewElement),l=o.filesToUpload.indexOf(i),l>-1&&o.filesToUpload.splice(l,1),e.recalculateDropzoneVisibility(t,r),s.parentNode.removeChild(s)}),null==o.filesToUpload&&(o.filesToUpload=[]),o.filesToUpload.push(i),a.test(i.type)){var l=new FileReader;l.onload=function(e){s.style.backgroundImage="url("+e.target.result+")"},l.readAsDataURL(i)}else{var c=document.createElement("div");c.classList.add("Icon-container");var u=document.createElement("span");u.classList.add("Icon","Icon--gigantic","Icon--light","Icon-file-text"),c.appendChild(u),s.insertBefore(c,s.firstChild)}};for(i.s();!(n=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}e.recalculateDropzoneVisibility(t),console.log(r)}},{key:"recalculateDropzoneVisibility",value:function(t,r){var n=t.querySelector('input[type="file"]'),o=t.querySelector(e.selectors.dropzoneElement);!n.multiple&&n.filesToUpload.length>0?o.style.display="none":o.style.display="block"}}]),e}();Upload.selectors={uploadElement:".FileUpload",previewElement:".FileUpload-preview",dropzoneElement:".FileUpload-dropzone",removeFile:".FileUpload-preview-remove"},Upload.states={onDragOver:"FileUpload--onDragOver"};var CodeViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.ace=null}return _createClass(e,[{key:"create",value:function(){var e=ace.edit(this.editor.name+"-ace-editor");e.getSession().setMode("ace/mode/"+this.editor.language),e.setTheme(Preferences.get("editor.ace.theme")),e.getSession().setUseWrapMode(Preferences.get("editor.ace.wordWrap")),e.setHighlightActiveLine(Preferences.get("editor.ace.highlightActiveLine")),e.setShowPrintMargin(Preferences.get("editor.ace.showPrintMargin")),e.setShowInvisibles(Preferences.get("editor.ace.showInvisibles")),e.setReadOnly(this.editor.readOnly),this.ace=e,this.view=document.getElementById(this.editor.name+"-ace-editor"),this.view.style.fontSize=Preferences.get("editor.ace.fontSize")}},{key:"show",value:function(e){var t=this;console.log("CodeViewInterface.show"),this.view.classList.remove(Editor.classes.state.isHidden),e&&(this.view.style.width="100%"),setTimeout(function(){t.resize()},300)}},{key:"hide",value:function(){console.log("CodeViewInterface.hide"),this.view.classList.add(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){this.ace.setValue(this.editor.textarea.value,-1)}},{key:"valueToForm",value:function(){this.editor.textarea.value=this.ace.getValue()}},{key:"resize",value:function(){this.ace.resize()}}]),e}(),DesignViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.ck=null}return _createClass(e,[{key:"create",value:function(){var e=this,t=Preferences.get("editor.ckeditor",{});t.customConfig=t.customConfig||"",t.allowedContent=!0,t.entities=!1,t.protectedSource=[/<\?[\s\S]*?\?>/g,/(\n[ \t]*)?@\w+(\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\))?\n?/g,/{{[\s\S]*?}}}?/g],t.contentsCss=this.editor.stylesheets,CKEDITOR.dtd.$removeEmpty.span=!1,this.ck=CKEDITOR.replace(this.editor.name+"-editor",t),this.ck.on("instanceReady",function(t){e.view=document.getElementById("cke_"+e.editor.name+"-editor")})}},{key:"show",value:function(e){var t=this;console.log("DesignViewInterface.show"),this.view?(this.view.style.display="block",e&&(this.view.style.width="100%")):this.ck.on("instanceReady",function(r){t.view.style.display="block",e&&(t.view.style.width="100%")})}},{key:"hide",value:function(){this.view.style.display="none"}},{key:"valueFromForm",value:function(){this.ck.setData(this.editor.textarea.value)}},{key:"valueToForm",value:function(){this.editor.textarea.value=this.ck.getData()}}]),e}(),Editor=function(){function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];_classCallCheck(this,e),this.enterFullscreen=this.enterFullscreen.bind(this),this.exitFullscreen=this.exitFullscreen.bind(this),this.handleSwitchEditor=this.handleSwitchEditor.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.name=t,this.language=r,this.currentMode=n,this.readOnly=o,this.stylesheets=i,this.modes={},this.textarea=document.querySelector('textarea[name="'+this.name+'"]'),this.container=parentMatchingSelector(this.textarea,"."+e.classes.editor.container);var a=this.container.querySelector("."+e.classes.button.fullscreenToggle);a&&(this.fullscreenToggle=new FullscreenToggle(a,this.container,this.enterFullscreen,this.exitFullscreen)),this.show(),this.resizeToContent(),this.registerEvents()}return _createClass(e,null,[{key:"createEditors",value:function(t){for(var r,n=0;n<t.length;n++){r=t[n];var o=document.querySelector('textarea[name="'+r.name+'"]');if(o){console.log("Editor found"),null==r.mode&&(r.mode=user.editor.defaultMode),console.log(r);var i=new e(r.name,r.language,r.mode,r.readOnly,r.stylesheets);e.list.push(i)}else console.log("Editor not found"),console.log(r)}}}]),_createClass(e,[{key:"getMode",value:function(e){return"undefined"==typeof e||null===e?this.currentMode:e}},{key:"registerEvents",value:function(){var t,r=this,n=_createForOfIteratorHelper(this.container.querySelectorAll("."+e.classes.button.switchEditor));try{for(n.s();!(t=n.n()).done;){var o=t.value;o.addEventListener("click",this.handleSwitchEditor)}}catch(i){n.e(i)}finally{n.f()}var a=parentMatchingSelector(this.container,"form");null!==a&&a.formObject&&a.formObject.contentGenerators.push(function(e){return r.valueToForm()})}},{key:"create",value:function(e){var t=this.getMode(e);switch(t){case"code":this.modes.code=new CodeViewInterface(this);break;case"design":this.modes.design=new DesignViewInterface(this);break;case"preview":this.modes.preview=new PreviewInterface(this);break;case"split":this.modes.split=new SplitViewInterface(this)}this.modes[t].create()}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,r=this.getMode(e);null==this.modes[r]&&this.create(r),this.modes[r].show(t),this.currentMode=r,this.valueFromForm(r)}},{key:"hide",value:function(e){var t=this.getMode(e);this.modes[t].hide(),this.valueToForm(t)}},{key:"valueFromForm",value:function(e){var t=this.getMode(e);this.modes[t].valueFromForm()}},{key:"valueToForm",value:function(e){var t=this.getMode(e);this.modes[t].valueToForm()}},{key:"resizeToContainer",value:function(){this.modes.code&&this.modes.code.resize()}},{key:"resizeToContent",value:function(){this.container.querySelector("."+e.classes.editor.content).style.height=1.5*this.textarea.rows+"em",this.modes.code&&this.modes.code.resize()}},{key:"enterFullscreen",value:function(){console.log("fullscreen"),this.resizeToContainer()}},{key:"exitFullscreen",value:function(){console.log("exit"),console.trace(),this.resizeToContent()}},{key:"handleSwitchEditor",value:function(e){console.log("Editor.handleSwitchEditor");var t=e.currentTarget.getAttribute("data-editor");return this.hide(),this.show(t)}},{key:"handleFormSubmit",value:function(){return this.valueToForm()}}]),e}();Editor.list=[],Editor.classes={editor:{container:"Editor",header:"Editor-header",content:"Editor-content",footer:"Editor-footer",preview:"Editor-preview"},state:{isHidden:"Editor--hidden",contentIsSplit:"Editor-content--isSplit"},button:{switchEditor:"Editor--switchEditor",fullscreenToggle:"Editor--toggleFullscreen"}};var PreviewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){var e=document.createElement("iframe");e.id=this.editor.name+"-preview",e.classList.add(Editor.classes.editor.preview),this.editor.container.querySelector(".Editor-content").appendChild(e),this.view=e}},{key:"show",value:function(e){var t=document.getElementById(this.editor.name+"-preview");t.classList.remove(Editor.classes.state.isHidden),e&&(t.style.width="100%")}},{key:"hide",value:function(){return document.getElementById(this.editor.name+"-preview").classList.add(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){var e=this,t={_token:this.editor.container.querySelector(".contentPreviewCSRFToken").value,content:this.editor.textarea.value},r=this.editor.container.querySelector(".contentPreviewURL").value,n=this.editor.container.querySelector(".contentPreviewMethod").value;console.log("Generating content using data ",t);window.fetch(r,FetchOptions["default"]().method(n).body(getFormDataObject(t))).then(Oxygen.respond.checkStatus).then(Oxygen.respond.text).then(function(t){e.view.srcdoc=t})["catch"](function(t){if(!(t.response&&t.response instanceof Response))throw t;console.error(t),t.response.text().then(function(t){e.view.srcdoc=t})})}},{key:"valueToForm",value:function(){}}]),e}(),SplitViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){}},{key:"show",value:function(){var e,t=this.editor.container.querySelectorAll("."+Editor.classes.editor.content),r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.classList.add(Editor.classes.state.contentIsSplit)}}catch(o){r.e(o)}finally{r.f()}var i=this.editor;i.show("code",!1),i.show("preview",!1),i.modes.code.view.style.width="50%",i.modes.preview.view.style.width="50%",i.modes.code.ace.addEventListener("change",this.synchronize.bind(this))}},{key:"hide",value:function(){var e,t=this.editor.container.querySelectorAll("."+Editor.classes.editor.content),r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.classList.remove(Editor.classes.state.contentIsSplit)}}catch(o){r.e(o)}finally{r.f()}this.editor.hide("code"),this.editor.hide("preview")}},{key:"valueFromForm",value:function(){}},{key:"valueToForm",value:function(){}},{key:"synchronize",value:function(){var e=this;this.currentTimer&&clearTimeout(this.currentTimer),this.currentTimer=setTimeout(function(){"split"===e.editor.currentMode&&(e.editor.valueToForm("code"),e.editor.valueFromForm("preview"))},1e3)}}]),e}(),ImageEditor=function(){function e(t){var r=this;if(_classCallCheck(this,e),this.container=t,this.jCropApi=null,this.cropDisableCounter=0,this.cropOrigin={x:0,y:0},this.image=this.container.querySelector("."+e.classes.layout.image),this.$image=$(this.image),!this.image)throw new Error("<img> element doesn't exist");this.forms={simple:this.image.parentNode.parentNode.querySelector("."+e.classes.form.simple),advanced:this.image.parentNode.parentNode.querySelector("."+e.classes.form.advanced)},this.fields={crop:{x:this.container.querySelector('[name="crop[x]"]'),y:this.container.querySelector('[name="crop[y]"]'),width:this.container.querySelector('[name="crop[width]"]'),height:this.container.querySelector('[name="crop[height]"]')},resize:{width:this.container.querySelector('[name="resize[width]"]'),height:this.container.querySelector('[name="resize[height]"]'),keepAspectRatio:this.container.querySelector('[name="resize[keepAspectRatio]"][value="true"]')},macro:this.container.querySelector('[name="macro"]'),name:this.container.querySelector('[name="name"]'),slug:this.container.querySelector('[name="slug"]')},this.image.addEventListener("load",function(e){console.log("Image Loaded");var t=e.currentTarget;r.imageAspectRatio=t.naturalWidth/t.naturalHeight,r.fields.resize.width.value=t.naturalWidth,r.fields.resize.height.value=t.naturalHeight,r.enableCropping()}),this.fullscreenToggle=new FullscreenToggle(this.container.querySelector("."+e.classes.button.toggleFullscreen),this.container),this.container.querySelector("."+e.classes.button.apply).addEventListener("click",this.handlePreview.bind(this)),this.container.querySelector("."+e.classes.button.save).addEventListener("click",this.handleSave.bind(this)),this.container.querySelectorAll("."+e.classes.form.crop).forEach(function(e){e.addEventListener("input",r.handleCropInputChange.bind(r))}),this.container.querySelectorAll("."+e.classes.form.resize).forEach(function(e){e.addEventListener("input",r.handleResizeInputChange.bind(r))})}return _createClass(e,[{key:"handlePreview",value:function(){this.applyChanges(this.gatherData())}},{key:"handleSave",value:function(){var e=this.gatherData();e.save=!0,e.name=this.fields.name.value,e.slug=this.fields.slug.value,this.applyChanges(e),this.progressNotification=new Notification({content:"Saving Image",status:"success"}),NotificationCenter.present(this.progressNotification)}},{key:"gatherData",value:function(){var e=TabSwitcher.list[0].current;switch(e){case"simple":return this.getSimpleData();case"advanced":return this.getAdvancedData();default:return{}}}},{key:"getSimpleData",value:function(){return this.removeDefaultFields(getFormData(this.forms.simple))}},{key:"removeDefaultFields",value:function(e){var t=this,r=function(e){return!(e["resize[width]"]&&e["resize[width]"]!==t.image.naturalWidth.toString()||e["resize[height]"]&&e["resize[height]"]!==t.image.naturalHeight.toString())},n={"fit[position]":function(e){return"center"===e},"resize[width]":function(e,t){return r(t)},"resize[height]":function(e,t){return r(t)},"resize[keepAspectRatio]":function(e,t){return r(t)},gamma:function(e){return"1"===e},greyscale:function(e){return"false"===e},invert:function(e){return"false"===e},"rotate[backgroundColor]":function(e){return"#ffffff"===e},"crop[x]":function(e){void 0===t.pendingCropOrigin&&(t.pendingCropOrigin={}),t.pendingCropOrigin.x=parseInt(e)},"crop[y]":function(e){void 0===t.pendingCropOrigin&&(t.pendingCropOrigin={}),t.pendingCropOrigin.y=parseInt(e)}};for(var o in e){var i=e[o];n[o]&&n[o](i,e)?delete e[o]:("0"===i||""===i)&&delete e[o]}return e}},{key:"getAdvancedData",value:function(){return JSON.parse(this.fields.macro.value)}},{key:"applyChanges",value:function(e){var t=this;if(this.applyingChanges)return void NotificationCenter.present(new Notification({content:"Already Processing",status:"failed"}));this.applyingChanges=!0,console.log("Processing Image Using Commands: ",e);var r=this.image.getAttribute("data-root")+"?"+serializeToQueryString(e),n=new Headers;n.set("Accept","application/json");var o={method:"GET",credentials:"same-origin",headers:n};console.log("Requesting URL: ",r,o),window.fetch(r,o).then(Oxygen.respond.checkStatus).then(function(e){return e.blob()}).then(function(e){null!=t.jCropApi&&t.jCropApi.destroy(),t.jCropApi=null,t.cropOrigin=t.pendingCropOrigin;var r=URL.createObjectURL(e);t.image.style.removeProperty("width"),t.image.style.removeProperty("height"),t.image.src=r}).then(function(e){NotificationCenter.present(new Notification({content:"Image Processing Successful",status:"success"})),t.applyingChanges=!1},function(e){throw t.applyingChanges=!1,e})["catch"](Oxygen.respond.handleAPIError)}},{key:"enableCropping",value:function(){var e=this;this.$image.Jcrop({trueSize:[this.image.naturalWidth,this.image.naturalHeight],onChange:this.handleCropSelect.bind(this),onSelect:this.handleCropSelect.bind(this),onRelease:this.handleCropRelease.bind(this)},function(){e.jCropApi=this})}},{key:"handleCropSelect",value:function(e){this.cropDisableCounter<=0?(this.fields.crop.x.value=Math.round(e.x+this.cropOrigin.x).toString(),this.fields.crop.y.value=Math.round(e.y+this.cropOrigin.y).toString(),this.fields.crop.width.value=Math.round(e.w).toString(),this.fields.crop.height.value=Math.round(e.h).toString()):this.cropDisableCounter--}},{key:"handleCropInputChange",value:function(e){if(null!==this.jCropApi){var t=parseInt(""===this.fields.crop.x.value?0:this.fields.crop.x.value),r=parseInt(""===this.fields.crop.y.value?0:this.fields.crop.y.value),n=parseInt(""===this.fields.crop.width.value?0:this.fields.crop.width.value),o=parseInt(""===this.fields.crop.height.value?0:this.fields.crop.height.value);
return this.cropDisableCounter=2,this.jCropApi.setSelect([t,r,t+n,r+o])}}},{key:"handleCropRelease",value:function(){this.fields.crop.x.value=0,this.fields.crop.y.value=0,this.fields.crop.width.value=0,this.fields.crop.height.value=0}},{key:"handleResizeInputChange",value:function(e){if(this.fields.resize.keepAspectRatio[0].checked){var t=e.target.name,r=e.target.value;return console.log(t,r),"resize[width]"===t?this.fields.resize.height.value=Math.round(r/this.imageAspectRatio):this.fields.resize.width.value=Math.round(r*this.imageAspectRatio.ratio)}}}],[{key:"initialize",value:function(t){var r,n=_createForOfIteratorHelper(t.querySelectorAll("."+e.classes.layout.container));try{for(n.s();!(r=n.n()).done;){var o=r.value;e.list.push(new e(o))}}catch(i){n.e(i)}finally{n.f()}}}]),e}();ImageEditor.list=[],ImageEditor.classes={layout:{container:"ImageEditor",image:"ImageEditor-image"},button:{toggleFullscreen:"ImageEditor-toggleFullscreen",save:"ImageEditor-save",apply:"ImageEditor-apply"},form:{simple:"ImageEditor-form--simple",advanced:"ImageEditor-form--advanced",crop:"ImageEditor-crop-input",resize:"ImageEditor-resize-input"}},Oxygen||(Oxygen={}),Oxygen.initLogin=function(){var e=document.querySelector(".Login-form");e.classList.add("Login--noTransition"),e.classList.add("Login--slideDown"),e.offsetHeight,e.classList.remove("Login--noTransition"),setTimeout(function(){document.body.classList.remove("Login--isHidden")},500),document.querySelector(".Login-scrollDown").addEventListener("click",function(){document.querySelector(".Login-message").classList.add("Login--slideUp"),e.classList.remove("Login--slideDown"),document.querySelector(".Login-background--blur").classList.add("Login--isHidden")});var t=e.querySelector("form");t.addEventListener("submit",function(){e.classList.add("Login--slideUp")}),t.modifyPromise=function(t){return t.then(function(t){return void 0!==t.status&&"success"!==t.status&&e.classList.remove("Login--slideUp"),t},function(t){throw e.classList.remove("Login--slideUp"),t})}},window.Oxygen||(window.Oxygen={}),Oxygen.reset=function(){return window.editors=[],Oxygen.load=[],Oxygen.setBodyScrollable(!0),Dropdown.handleGlobalClick({target:document.body})},Oxygen.setBodyScrollable=function(e){e?document.body.classList.remove("Body--noScroll"):document.body.classList.add("Body--noScroll")},Oxygen.init=function(e){NotificationCenter.initializeExistingMessages(),Dialog.registerEvents(e),ImageEditor.initialize(e),document.querySelector(".Login-form")&&Oxygen.initLogin(),Dropdown.registerEvents(e),EditableList.registerEvents(e),Form.findAll(e),Upload.registerEvents(e),TabSwitcher.findAll(e),Slider.findAll(e),"undefined"!=typeof editors&&null!==editors&&Editor.createEditors(editors);for(var t,r=Oxygen.load||[],n=0;n<r.length;n++)(t=r[n])()},document.addEventListener("DOMContentLoaded",function(){MainNav.headroom(),"undefined"!=typeof user&&null!==user&&Preferences.setPreferences(user),Oxygen.init(document),Preferences.get("pageLoad.smoothState.enabled",!0)===!0?(console.log("smoothstate enabled"),window.smoothState=new SmoothState,SmoothState.setTheme(Preferences.get("pageLoad.smoothState.theme","slide"))):console.log("smoothstate disabled");var e=Preferences.get("pageLoad.progress.theme",["minimal","spinner"]);console.log("Applying progress themes:",e);for(var t,r=0;r<e.length;r++)t=e[r],document.body.classList.add("Page-progress--"+t);Form.registerKeydownHandler(),Dropdown.registerGlobalEvent()});
//# sourceMappingURL=app.min.js.map
