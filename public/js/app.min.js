"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fileSize(e){var t,n,i,a;for(a=e+" bytes",i=["KB","MB","GB","TB","PB","EB","ZB","YB"],n=0,t=e/1024;t>1;)a=t.toFixed(3)+" "+i[n],t/=1024,n++;return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function debounce(e,t,n){var i;return function(){var a=this,s=arguments,r=function(){i=null,n||e.apply(a,s)},o=n&&!i;clearTimeout(i),i=setTimeout(r,t),o&&e.apply(a,s)}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ajax=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"request",value:function(t,n,i){var a=arguments.length<=3||void 0===arguments[3]?"json":arguments[3],s=new Promise(function(e,s){$.ajax({dataType:a,type:t,url:n,data:i,processData:!1,contentType:!1,success:function(t){return e(t)},error:function(e,t,n){return s({response:e,textStatus:t,errorThrown:n})}})}),r=!0,o=!1,l=void 0;try{for(var c,u=e.successCallbacks[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;s=s.then(d)}}catch(h){o=!0,l=h}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw l}}var f=!0,m=!1,g=void 0;try{for(var v,p=e.errorCallbacks[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value;s=s["catch"](y)}}catch(h){m=!0,g=h}finally{try{!f&&p["return"]&&p["return"]()}finally{if(m)throw g}}return s}}]),e}();Ajax.successCallbacks=[],Ajax.errorCallbacks=[],Ajax.displayNotification=function(e){return console.log(e),new Notification(e),e},Ajax.handleRedirect=function(e){return e.redirect&&(window.smoothState&&e.hardRedirect!==!0?window.smoothState.load(e.redirect,!1):window.location.replace(e.redirect)),e},Ajax.handleError=function(e){console.log(e),0===e.response.readyState&&(console.error(response),new Notification({content:"Cannot connect to the server",status:"info"}));try{var t=$.parseJSON(e.response.responseText);t.content?new Notification(t):(console.error(t),new Notification({content:'Exception of type <code class="no-wrap">'+t.error.type+'</code> with message <code class="no-wrap">'+t.error.message+'</code> thrown at <code class="no-wrap">'+t.error.file+":"+t.error.line+"</code>",status:"failed"}))}catch(n){console.error(e.response.responseText),new Notification({content:"Whoops, looks like something went wrong.",status:"failed"})}return e};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Dialog=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(e){return e.find('[data-dialog-type="confirm"]').on("click",this.handleConfirmClick),e.find('[data-dialog-type="alert"]').on("click",this.handleAlertClick)}},{key:"handleAlertClick",value:function(e){var t=$(e.currentTarget);return vex.dialog.alert(t.attr("data-dialog-message"))}},{key:"handleConfirmClick",value:function(e,t){var n=$(e.currentTarget);if("true"!==n.attr("data-dialog-disabled")){var i;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),i={message:n.attr("data-dialog-message"),callback:function(e){return e?(n.attr("data-dialog-disabled","true"),n[0].click()):void 0}};for(var a in t)i[a]=t[a];return vex.dialog.confirm(i)}}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Dropdown=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerGlobalEvent",value:function(){return $(document).on("click",this.handleGlobalClick.bind(this))}},{key:"registerEvents",value:function(t){return t.find("."+e.classes.dropdownToggle).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(t){for(var n=$(t.target);!n.hasClass(e.classes.dropdownToggle);){if(n.is("a[href], form"))return;n=n.parent()}var i=n.find("."+e.classes.dropdownList);return i.hasClass(e.classes.isActive)?i.removeClass(e.classes.isActive):($("."+e.classes.dropdownList).removeClass(e.classes.isActive),i.addClass(e.classes.isActive))}},{key:"handleGlobalClick",value:function(t){var n=$(t.target),i=n.hasClass(e.classes.dropdownToggle),a=n.parent().hasClass(e.classes.dropdownToggle),s=n.parents("."+e.classes.dropdownToggle).length;return i||a||s?void 0:$("."+e.classes.dropdownList).removeClass(e.classes.isActive)}}]),e}();Dropdown.classes={dropdownToggle:"Dropdown-container",dropdownList:"Dropdown",isActive:"is-active"};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),EditableList=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(t){return t.find("."+e.classes.add).on("click",e.handleAdd),t.on("click","."+e.classes.remove,e.handleRemove)}},{key:"handleAdd",value:function(t){var n=$(t.currentTarget).siblings("."+e.classes.container),i=n.find("."+e.classes.template);return i=i.clone().removeClass(e.classes.template),console.log(i),n.append(i),console.log("add")}},{key:"handleRemove",value:function(t){var n=$(t.currentTarget).closest("."+e.classes.row);return n.remove(),console.log("remove")}}]),e}();EditableList.classes={container:"EditableList",template:"EditableList-template",row:"EditableList-row",remove:"EditableList-remove",add:"EditableList-add"};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Form=function(){function e(t){_classCallCheck(this,e),this.form=t,this.originalData=$(t).serializeArray(),this.contentGenerators=[],this.registerEvents()}return _createClass(e,null,[{key:"findAll",value:function(t){return t.find("form").each(function(){this.formObject=new e(this)}),t.find(e.classes.taggableInput).tagging({"edit-on-delete":!1})}},{key:"registerKeydownHandler",value:function(){return $(document).on("keydown",e.handleKeydown)}},{key:"handleKeydown",value:function(t){if((t.ctrlKey||t.metaKey)&&83===t.which)for(var n=document.getElementsByTagName("form"),i=0;i<n.length;i++){var a=n[i];a.classList.contains(e.classes.submitOnKeydown)&&a.formObject&&(a.formObject.submit(),t.preventDefault())}}}]),_createClass(e,[{key:"registerEvents",value:function(){var t=this;return this.form.classList.contains(e.classes.warnBeforeExit)&&$('a, button[type="submit"]').on("click",function(e){return t.handleExit(e)}),this.form.addEventListener("submit",function(e){return t.handleSubmit(e)}),this.form.classList.contains(e.classes.sendAjaxOnChange)&&this.form.addEventListener("change",function(e){e.preventDefault(),t.submitViaAjax()}),this.form.classList.contains(e.classes.autoSubmit)?this.submit():void 0}},{key:"handleExit",value:function(t){var n=this;if(!$(t.currentTarget).hasClass("Form-submit")&&(this.generateContent(),JSON.stringify($(this.form).serializeArray())!==JSON.stringify(this.originalData))){var i=$(t.currentTarget);"true"!==i.attr("data-dialog-disabled")&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),vex.dialog.confirm({message:e.messages.confirmation,buttons:[{text:"Save",type:"button",className:"vex-dialog-button-primary",click:function(e,t){e.data().vex.value="save",vex.close(e.data().vex.id)}},$.extend({},vex.dialog.buttons.NO,{text:"Cancel"}),{text:"Don't Save",type:"button",className:"vex-dialog-button-secondary vex-dialog-button-left",click:function(e,t){e.data().vex.value="continue",vex.close(e.data().vex.id)}}],callback:function(t){return"continue"==t?(i.attr("data-dialog-disabled","true"),i[0].click()):void("save"==t&&(n.form.classList.contains(e.classes.sendAjax)?(n.submitViaAjax(!0),i.attr("data-dialog-disabled","true"),i[0].click()):n.submit()))}}))}}},{key:"submit",value:function(){this.form.querySelector('button[type="submit"]').click()}},{key:"generateContent",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,a=this.contentGenerators[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;s(this)}}catch(r){t=!0,n=r}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw n}}}},{key:"handleSubmit",value:function(t){this.generateContent(),this.form.classList.contains(e.classes.sendAjax)&&!e.disableAjax&&(t.preventDefault(),this.submitViaAjax())}},{key:"submitViaAjax",value:function(t){var n=this,i=function(e){return"success"===e.status&&(n.originalData=$(n.form).serializeArray(),console.log("Form Saved Successfully")),e},a=Ajax.request($(this.form).attr("method"),$(this.form).attr("action"),e.getFormDataObject(this.form)).then(i).then(Ajax.displayNotification)["catch"](Ajax.handleError);return t||(a=a.then(Ajax.handleRedirect)),a}}],[{key:"getFormDataObject",value:function(e){var t=new FormData;return $(e).find("[name]").each(function(){var e=$(this).attr("name"),n=$(this).val();if(!$(this).is('[type="checkbox"]')||$(this).is(":checked"))if($(this).is("select[multiple]"))if(n){var i=!0,a=!1,s=void 0;try{for(var r,o=n[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var l=r.value;t.append(e,l)}}catch(c){a=!0,s=c}finally{try{!i&&o["return"]&&o["return"]()}finally{if(a)throw s}}}else t.append(e,"");else if($(this).is('[type="file"]'))for(var u,d,h=null!=(u=this.filesToUpload)?u:this.files,f=0;f<h.length;f++)d=h[f],t.append(e,d);else t.append(e,n)}),t}}]),e}();Form.disableAjax=!1,$(document).on("keydown",function(e){e.altKey&&(e.controlKey||e.metaKey)&&74==e.which&&(Form.disableAjax=!Form.disableAjax,e.preventDefault(),new Notification({content:"Asynchronous form submission "+(Form.disableAjax?"disabled":"enabled"),status:"info"}))}),Form.messages={confirmation:"Do you want to save changes?"},Form.classes={warnBeforeExit:"Form--warnBeforeExit",submitOnKeydown:"Form--submitOnKeydown",sendAjax:"Form--sendAjax",sendAjaxOnChange:"Form--sendAjaxOnChange",autoSubmit:"Form--autoSubmit",taggableInput:".Form-taggable"};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),MainNav=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"headroom",value:function t(){var e=$(".MainNav");if(e.length>0&&$(window).width()>768){var t=new Headroom(e[0],{tolerance:20,offset:50,classes:{initial:"Headroom",pinned:"Headroom--pinned",unpinned:"Headroom--unpinned",top:"Headroom--top",notTop:"Headroom--not-top"}});t.init()}}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Notification=function(){function e(t){_classCallCheck(this,e),t.log&&console.log(t.log),t.message?(this.message=t.message,this.message.removeClass("is-hidden"),this.registerHide()):t.status&&t.content?(this.message=$('<div class="'+e.classes.item+" Notification--"+t.status+'">'+t.content+'<span class="Notification-dismiss Icon Icon-times"></span></div>'),this.show()):(console.log("Invalid Arguments For New Notification"),console.log(t))}return _createClass(e,null,[{key:"initializeExistingMessages",value:function(){$("."+e.classes.container).find("."+e.classes.item).each(function(t,n){new e({message:$(this)})})}}]),_createClass(e,[{key:"show",value:function(){this.message.appendTo("."+e.classes.container),this.registerHide()}},{key:"registerHide",value:function(){this.message.click(this.hide.bind(this)),setTimeout(this.hide.bind(this),2e4)}},{key:"hide",value:function(){this.message.addClass("is-sliding-up"),setTimeout(this.remove.bind(this),500)}},{key:"remove",value:function(){this.message.remove()}}]),e}();Notification.classes={container:"Notification-container",item:"Notification"};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Preferences=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"setPreferences",value:function(t){return e.preferences=t}},{key:"get",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=e.preferences;if("undefined"==typeof i||null===i)return n;for(var a=t.split("."),s=a.pop(),r=a.length,o=1,l=a[0];(i=i[l])&&r>o;)l=a[o],o++;return i?i[s]:n}},{key:"has",value:function(t){var n=e.preferences;if(!n)return!1;for(var i=t.split("."),a=(i.pop(),i.length),s=1,r=i[0];(n=n[r])&&a>s;)r=i[s],s++;return n}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Slider=function(){function e(t){_classCallCheck(this,e),this.container=t,this.list=this.container.find(e.selectors.list),this.items=this.container.find(e.selectors.item),this.total=this.items.length,this.interval=this.container.attr("data-interval")||5e3,this.previousId=0,this.currentId=0,this.nextId=0,this.animating=!1,this.animationTime=1e3,this.registerEvents(),this.hideAll(),this.next(),"true"===this.container.attr("data-autoplay")&&this.play()}return _createClass(e,null,[{key:"findAll",value:function(t){return t.find(e.selectors.slider).each(function(){return e.list.push(new e($(this)))})}}]),_createClass(e,[{key:"registerEvents",value:function(){this.container.find(e.selectors.back).on("click",this.previous.bind(this)),this.container.find(e.selectors.forward).on("click",this.next.bind(this))}},{key:"play",value:function(){var e="reverse"===this.container.attr("data-direction")?this.previous.bind(this):this.next.bind(this);this.timer=setInterval(e,this.interval)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"getItem",value:function(e){return this.list.children(":nth-child("+e+")")}},{key:"hideAll",value:function(){this.items.removeClass(),this.items.addClass(e.classes.item+" "+e.classes.isHidden)}},{key:"next",value:function(){return this.shouldAnimate()?(this.previousId=this.currentId,this.currentId+=1,this.currentId>this.total&&(this.currentId=1),this.nextId=this.currentId+1,this.nextId>this.total&&(this.nextId=1),current=this.getItem(this.currentId),previous=this.getItem(this.previousId),this.hideAll(),previous.removeClass(e.allClasses()).addClass(e.classes.slideOutLeft),void current.removeClass(e.allClasses()).addClass(e.classes.slideInRight)):!1}},{key:"previous",value:function(){return this.shouldAnimate()?(this.nextId=this.currentId,this.currentId-=1,this.currentId<1&&(this.currentId=this.total),this.previousId=this.currentId-1,this.nextId<1&&(this.nextId=this.total),current=this.getItem(this.currentId),next=this.getItem(this.nextId),this.hideAll(),next.removeClass(e.allClasses()).addClass(e.classes.slideOutRight),void current.removeClass(e.allClasses()).addClass(e.classes.slideInLeft)):!1}},{key:"shouldAnimate",value:function(){var e=this;return this.animating?!1:(this.animating=!0,setTimeout(function(){e.animating=!1},this.animationTime),!0)}}],[{key:"allClasses",value:function(){return e.classes.isHidden+" "+e.classes.slideInLeft+" "+e.classes.slideInRight+" "+e.classes.slideOutLeft+" "+e.classes.slideOutRight}}]),e}();Slider.selectors={slider:".Slider",list:".Slider-list",item:".Slider-item",back:".Slider-back",forward:".Slider-forward"},Slider.classes={item:"Slider-item",isCurrent:"Slider-item--current",isHidden:"Slider-item--hidden",slideInLeft:"Slider-item--slideInLeft",slideInRight:"Slider-item--slideInRight",slideOutLeft:"Slider-item--slideOutLeft",slideOutRight:"Slider-item--slideOutRight",isAfter:"Slider-item--after",noTransition:"Slider--noTransition"},Slider.list=[];var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),SmoothState=function(){function e(){_classCallCheck(this,e),this.loading=!1,this.smoothState=$("#page").smoothState({anchors:".Link--smoothState",root:$(document),cacheLength:0,forms:"null",onStart:{duration:350,render:this.onStart},onProgress:{duration:0,render:this.onProgress},onReady:{duration:0,render:this.onReady},onAfter:this.onAfter}).data("smoothState")}return _createClass(e,[{key:"onStart",value:function(e){var t;return $("html, body").animate({scrollTop:0}),this.loading=!0,t=$(".Block"),$(t.get().reverse()).each(function(e){var t,n;return t=$(this),n=100*e,setTimeout(function(){return t.addClass("Block--isExiting")},n)}),setTimeout(function(){return this.loading?$(".pace-activity").addClass("pace-activity-active"):void 0},100*t.length)}},{key:"onProgress",value:function(e){return $("html, body").css("cursor","wait").find("a").css("cursor","wait")}},{key:"onReady",value:function(e,t){return $("html, body").css("cursor","auto").find("a").css("cursor","auto"),Oxygen.reset(),e.hide(),e.html(t),$(".pace-activity").removeClass("pace-activity-active"),$(".Block").each(function(e){var t,n;return t=$(this),n=100*e,t.addClass("Block--isHidden"),setTimeout(function(){return t.removeClass("Block--isHidden"),t.addClass("Block--isEntering"),setTimeout(function(){return t.removeClass("Block--isEntering")},350)},n)}),e.show()}},{key:"onAfter",value:function(e,t){return this.loading=!1,$(".pace-activity").removeClass("pace-activity-active"),Oxygen.init($("#page"))}},{key:"load",value:function(e,t){return this.smoothState.load(e,t)}}],[{key:"setTheme",value:function(e){return $("#page").addClass("Page-transition--"+e)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),TabSwitcher=function(){function e(t,n){_classCallCheck(this,e),this.handleClick=this.handleClick.bind(this),this.tabs=t,this.container=n,this.findDefault(),this.registerEvents()}return _createClass(e,null,[{key:"findAll",value:function(t){return t.find("."+e.classes.tabs).each(function(){var n=$(this);return t=n.hasClass(e.classes.content)?n:n.siblings("."+e.classes.content),0===t.length&&(t=n.parent().siblings("."+e.classes.content)),e.list.push(new e(n,t))})}}]),_createClass(e,[{key:"findDefault",value:function(){var e=this.tabs.children("[data-default-tab]").attr("data-switch-to-tab");return this.setTo(e)}},{key:"registerEvents",value:function(){return this.tabs.children("[data-switch-to-tab]").on("click",this.handleClick)}},{key:"handleClick",value:function(e){var t=$(e.currentTarget).attr("data-switch-to-tab");return this.setTo(t)}},{key:"setTo",value:function(t){return this.current=t,this.container.children("[data-tab]").removeClass(e.classes.active),this.container.children('[data-tab="'+t+'"]').addClass(e.classes.active),this.tabs.children("[data-switch-to-tab]").removeClass(e.classes.active),this.tabs.children('[data-switch-to-tab="'+t+'"]').addClass(e.classes.active)}}]),e}();TabSwitcher.classes={tabs:"TabSwitcher-tabs",content:"TabSwitcher-content",active:"TabSwitcher--isActive"},TabSwitcher.list=[];var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Toggle=function(){function e(t,n,i){_classCallCheck(this,e),this.toggle=t,this.enableCallback=n,this.disableCallback=i,this.registerEvents()}return _createClass(e,[{key:"registerEvents",value:function(){var e=this;this.toggle.on("click",function(t){return e.handleToggle(t)}),void 0==this.toggle.attr("data-enabled")&&this.toggle.attr("data-enabled","false")}},{key:"handleToggle",value:function(e){"true"===this.toggle.attr("data-enabled")?(this.toggle.attr("data-enabled","false"),this.disableCallback(e)):(this.toggle.attr("data-enabled","true"),this.enableCallback(e))}}]),e}();Toggle.classes={ifEnabled:"Toggle--ifEnabled",ifDisabled:"Toggle--ifDisabled"};var FullscreenToggle=function(e){function t(e,n,i,a){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,null,null));return s.fullscreenElement=n,s.enableCallback=s.enterFullscreen,s.disableCallback=s.exitFullscreen,s.enterFullscreenCallback=i,s.exitFullscreenCallback=a,s}return _inherits(t,e),_createClass(t,[{key:"enterFullscreen",value:function(){this.fullscreenElement.addClass("FullscreenToggle--isFullscreen"),$(document.body).addClass("Body--noScroll");var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.enterFullscreenCallback()}},{key:"exitFullscreen",value:function(){this.fullscreenElement.removeClass("FullscreenToggle--isFullscreen"),$(document.body).removeClass("Body--noScroll"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.exitFullscreenCallback()}}]),t}(Toggle),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Upload=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerEvents",value:function(t){var n;return n=t.find(e.selectors.uploadElement),n.find(e.selectors.dropzoneElement).on("dragover",e.handleDragOver).on("dragleave",e.handleDragLeave).on("drop",e.handleDrop),n.find("input[type=file]").on("change",e.handleChange)}},{key:"handleDragOver",value:function(t){return t.preventDefault(),$(t.currentTarget).addClass(e.states.onDragOver)}},{key:"handleDragLeave",value:function(t){return $(t.currentTarget).removeClass(e.states.onDragOver)}},{key:"handleDrop",value:function(t){var n;return t.preventDefault(),$(t.currentTarget).removeClass(e.states.onDragOver),n=$(t.currentTarget).closest(e.selectors.uploadElement),e.addFiles(n,t.originalEvent.dataTransfer.files)}},{key:"handleChange",value:function(t){return e.addFiles($(t.currentTarget).closest(e.selectors.uploadElement),t.currentTarget.files)}},{key:"addFiles",value:function(t,n){var i,a,s,r,o,l,c;for(r=t.find('input[type="file"]')[0],a=0,o=n.length;o>a;a++)i=n[a],s=/^image\//,console.log(i.type),l=$('<div class="FileUpload-preview"> <div class="FileUpload-preview-info"><span>'+i.name+'</span><button type="button" class="FileUpload-preview-remove Button--transparent Icon Icon-times"></button><span class="FileUpload-preview-size">'+fileSize(i.size)+"</span></div> </div>"),l.find(e.selectors.removeFile).on("click",function(t){var n,a;return n=$(t.currentTarget),l=n.closest(e.selectors.previewElement),a=r.filesToUpload.indexOf(i),a>-1&&r.filesToUpload.splice(a,1),l.remove()}),t.prepend(l),null==r.filesToUpload&&(r.filesToUpload=[]),r.filesToUpload.push(i),s.test(i.type)&&(c=new FileReader,c.onload=function(e){return console.log(e),l.css("background-image","url("+e.target.result+")"),console.log(l.css("background-image"))},c.readAsDataURL(i));return console.log(n)}}]),e}();Upload.selectors={uploadElement:".FileUpload",previewElement:".FileUpload-preview",dropzoneElement:".FileUpload-dropzone",removeFile:".FileUpload-preview-remove"},Upload.states={onDragOver:"FileUpload--onDragOver"},window.Oxygen||(window.Oxygen={}),Oxygen.reset=function(){return window.editors=[],Oxygen.load=[],Ajax.errorCallbacks=[],Ajax.successCallbacks=[],Oxygen.setBodyScrollable(!0),Dropdown.handleGlobalClick({target:document.body})},Oxygen.setBodyScrollable=function(e){e?document.body.classList.remove("Body--noScroll"):document.body.classList.add("Body--noScroll")},Oxygen.init=function(e){setTimeout(Notification.initializeExistingMessages,250),Dialog.registerEvents(e),ImageEditor.initialize(e),$(".Login-form").length>0&&Oxygen.initLogin(),Dropdown.registerEvents(e),EditableList.registerEvents(e),Form.findAll(e),Upload.registerEvents(e),TabSwitcher.findAll(e),Slider.findAll(e),"undefined"!=typeof editors&&null!==editors&&Editor.createEditors(editors);for(var t,n=Oxygen.load||[],i=0;i<n.length;i++)(t=n[i])()},$().ready(function(){MainNav.headroom(),"undefined"!=typeof user&&null!==user&&Preferences.setPreferences(user),Oxygen.init($(document)),Preferences.get("pageLoad.smoothState.enabled",!0)===!0&&(window.smoothState=new SmoothState,SmoothState.setTheme(Preferences.get("pageLoad.smoothState.theme","slide")));var e=Preferences.get("pageLoad.progress.theme",["minimal","spinner"]);console.log("Applying progress themes:"),console.log(e);for(var t,n=0;n<e.length;n++)t=e[n],$(document.body).addClass("Page-progress--"+t);Form.registerKeydownHandler(),Dropdown.registerGlobalEvent()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),CodeViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){var e=ace.edit(this.editor.name+"-ace-editor");return e.getSession().setMode("ace/mode/"+this.editor.language),e.setTheme(Preferences.get("editor.ace.theme")),e.getSession().setUseWrapMode(Preferences.get("editor.ace.wordWrap")),e.setHighlightActiveLine(Preferences.get("user.editor.ace.highlightActiveLine")),e.setShowPrintMargin(Preferences.get("editor.ace.showPrintMargin")),e.setShowInvisibles(Preferences.get("editor.ace.showInvisibles")),e.setReadOnly(this.editor.readOnly),$("#"+this.editor.name+"-ace-editor").css("font-size",Preferences.get("editor.ace.fontSize")),this.view=e}},{key:"show",value:function(e){var t=this,n=$("#"+this.editor.name+"-ace-editor");return n.removeClass(Editor.classes.state.isHidden),e?n.css("width","100%"):void setTimeout(function(){t.resize()},300)}},{key:"hide",value:function(){return console.log("CodeViewInterface.hide"),$("#"+this.editor.name+"-ace-editor").addClass(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){this.view.setValue(this.editor.textarea.val(),-1)}},{key:"valueToForm",value:function(){this.editor.textarea.val(this.view.getValue())}},{key:"resize",value:function(){this.view.resize()}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),DesignViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){var e=Preferences.get("editor.ckeditor",{});e.customConfig=e.customConfig||"",e.contentsCss=this.editor.stylesheets,console.log(e);var t=CKEDITOR.replace(this.editor.name+"-editor",e);return this.view=t}},{key:"show",value:function(e){$("#cke_"+this.editor.name+"-editor").show(),e&&$("#"+this.editor.name+"-ace-editor").css("width","100%")}},{key:"hide",value:function(){$("#cke_"+this.editor.name+"-editor").hide()}},{key:"valueFromForm",value:function(){return this.view.setData(this.editor.textarea.val())}},{key:"valueToForm",value:function(){return $('textarea[name="'+this.editor.name+'"]').val(this.view.getData())}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Editor=function(){function e(t,n,i,a){var s=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];_classCallCheck(this,e),this.enterFullscreen=this.enterFullscreen.bind(this),this.exitFullscreen=this.exitFullscreen.bind(this),this.handleSwitchEditor=this.handleSwitchEditor.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.name=t,this.language=n,this.currentMode=i,this.readOnly=a,this.stylesheets=s,this.modes={},this.textarea=$('textarea[name="'+this.name+'"]'),this.container=this.textarea.parents("."+e.classes.editor.container);var r=this.container.find("."+e.classes.button.fullscreenToggle);this.fullscreenToggle=new FullscreenToggle(r,this.container,this.enterFullscreen,this.exitFullscreen),this.show(),this.resizeToContent(),this.registerEvents()}return _createClass(e,null,[{key:"createEditors",
value:function(t){for(var n,i=0;i<t.length;i++){n=t[i];var a=$('textarea[name="'+n.name+'"]');if(a.length){console.log("Editor found"),null==n.mode&&(n.mode=user.editor.defaultMode),console.log(n);var s=new e(n.name,n.language,n.mode,n.readOnly,n.stylesheets);e.list.push(s)}else console.log("Editor not found"),console.log(n)}}}]),_createClass(e,[{key:"getMode",value:function(e){return"undefined"==typeof e||null===e?this.currentMode:e}},{key:"registerEvents",value:function(){var t=this;this.container.find("."+e.classes.button.switchEditor).on("click",this.handleSwitchEditor);var n=$(this.container).parents("form")[0];void 0!==n&&n.formObject&&n.formObject.contentGenerators.push(function(e){return t.valueToForm()})}},{key:"create",value:function(e){var t=this.getMode(e);switch(t){case"code":this.modes.code=new CodeViewInterface(this);break;case"design":this.modes.design=new DesignViewInterface(this);break;case"preview":this.modes.preview=new PreviewInterface(this);break;case"split":this.modes.split=new SplitViewInterface(this)}this.modes[t].create()}},{key:"show",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=this.getMode(e);null==this.modes[n]&&this.create(n),this.modes[n].show(t),this.currentMode=n,this.valueFromForm(n)}},{key:"hide",value:function(e){var t=this.getMode(e);this.modes[t].hide(),this.valueToForm(t)}},{key:"valueFromForm",value:function(e){var t=this.getMode(e);this.modes[t].valueFromForm()}},{key:"valueToForm",value:function(e){var t=this.getMode(e);this.modes[t].valueToForm()}},{key:"resizeToContainer",value:function(){this.modes.code&&this.modes.code.resize()}},{key:"resizeToContent",value:function(){this.container.find("."+e.classes.editor.content).css("height",1.5*this.textarea.attr("rows")+"em"),this.modes.code&&this.modes.code.resize()}},{key:"enterFullscreen",value:function(){console.log("fullscreen"),this.resizeToContainer()}},{key:"exitFullscreen",value:function(){console.log("exit"),console.trace(),this.resizeToContent()}},{key:"handleSwitchEditor",value:function(e){console.log("Editor.handleSwitchEditor");var t=$(e.target).attr("data-editor");return this.hide(),this.show(t)}},{key:"handleFormSubmit",value:function(){return this.valueToForm()}}]),e}();Editor.list=[],Editor.classes={editor:{container:"Editor",header:"Editor-header",content:"Editor-content",footer:"Editor-footer",preview:"Editor-preview"},state:{isHidden:"Editor--hidden",contentIsSplit:"Editor-content--isSplit"},button:{switchEditor:"Editor--switchEditor",fullscreenToggle:"Editor--toggleFullscreen"}};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),PreviewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){var e=$('<iframe id="'+this.editor.name+'-preview" class="'+Editor.classes.editor.preview+'"></iframe>');return e.appendTo(this.editor.container.find(".Editor-content")),this.view=e}},{key:"show",value:function(e){var t=$("#"+this.editor.name+"-preview");t.removeClass(Editor.classes.state.isHidden),e&&t.css("width","100%")}},{key:"hide",value:function(){return $("#"+this.editor.name+"-preview").addClass(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){var e=this;Ajax.request("GET","content?content="+encodeURIComponent(this.editor.textarea.val()),new FormData,"html").then(function(t){e.view[0].srcdoc=t,console.log(t)})["catch"](Ajax.handleError)}},{key:"valueToForm",value:function(){}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),SplitViewInterface=function(){function e(t){_classCallCheck(this,e),this.editor=t,this.view=null}return _createClass(e,[{key:"create",value:function(){}},{key:"show",value:function(){return this.editor.container.find("."+Editor.classes.editor.content).addClass(Editor.classes.state.contentIsSplit),this.editor.show("code",!1),this.editor.show("preview",!1),$("#"+this.editor.name+"-ace-editor, #"+this.editor.name+"-preview").css("width","50%"),this.editor.modes.code.view.on("change",this.synchronize.bind(this))}},{key:"hide",value:function(){return this.editor.container.find("."+Editor.classes.editor.content).removeClass(Editor.classes.state.contentIsSplit),this.editor.hide("code"),this.editor.hide("preview")}},{key:"valueFromForm",value:function(){}},{key:"valueToForm",value:function(){}},{key:"synchronize",value:function(){var e=this;this.currentTimer&&clearTimeout(this.currentTimer),this.currentTimer=setTimeout(function(){"split"===e.editor.currentMode&&(e.editor.valueToForm("code"),e.editor.valueFromForm("preview"))},1e3)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ImageEditor=function(){function e(t){if(_classCallCheck(this,e),this.handlePreview=this.handlePreview.bind(this),this.handleSave=this.handleSave.bind(this),this.onRequestEnd=this.onRequestEnd.bind(this),this.handleCropEnable=this.handleCropEnable.bind(this),this.handleCropDisable=this.handleCropDisable.bind(this),this.handleCropSelect=this.handleCropSelect.bind(this),this.handleCropInputChange=this.handleCropInputChange.bind(this),this.handleCropRelease=this.handleCropRelease.bind(this),this.handleResizeInputChange=this.handleResizeInputChange.bind(this),this.container=t,this.image=this.container.find("."+e.classes.layout.image),!this.image.length)throw new Error("<img> element doesn't exist");this.forms={simple:this.image.parent().parent().find("."+e.classes.form.simple),advanced:this.image.parent().parent().find("."+e.classes.form.advanced)},this.fields={crop:{x:this.container.find('[name="crop[x]"]'),y:this.container.find('[name="crop[y]"]'),width:this.container.find('[name="crop[width]"]'),height:this.container.find('[name="crop[height]"]')},resize:{width:this.container.find('[name="resize[width]"]'),height:this.container.find('[name="resize[height]"]'),keepAspectRatio:this.container.find('[name="resize[keepAspectRatio]"][value="true"]')},macro:this.container.find('[name="macro"]'),name:this.container.find('[name="name"]'),slug:this.container.find('[name="slug"]')};var n=this;this.image[0].onload=function(){return console.log("Image Loaded"),null==n.imageDimensions&&(n.imageDimensions={cropX:0,cropY:0}),n.imageDimensions.width=this.clientWidth,n.imageDimensions.height=this.clientHeight,n.imageDimensions.naturalWidth=this.naturalWidth,n.imageDimensions.naturalHeight=this.naturalHeight,n.imageDimensions.ratio=this.naturalWidth/this.naturalHeight,n.fields.resize.width.val(n.imageDimensions.naturalWidth),n.fields.resize.height.val(n.imageDimensions.naturalHeight),n.handleCropEnable()},this.fullscreenToggle=new FullscreenToggle(this.container.find("."+e.classes.button.toggleFullscreen),this.container,function(){},function(){}),this.container.find("."+e.classes.button.apply).on("click",this.handlePreview),this.container.find("."+e.classes.button.save).on("click",this.handleSave),this.container.find("."+e.classes.form.crop).on("change",this.handleCropInputChange),this.container.find("."+e.classes.form.resize).on("change",this.handleResizeInputChange),this.jCropApi=null,this.cropDisableCounter=2}return _createClass(e,[{key:"handlePreview",value:function(){return this.applyChanges(this.gatherData()),this.progressNotification=new Notification({content:"Processing Image",status:"success"})}},{key:"handleSave",value:function(){var e=this.gatherData();return e.save=!0,e.name=this.fields.name.val(),e.slug=this.fields.slug.val(),this.applyChanges(e),this.progressNotification=new Notification({content:"Saving Image",status:"success"})}},{key:"gatherData",value:function(){var e=TabSwitcher.list[0].current;switch(e){case"simple":return this.getSimpleData();case"advanced":return this.getAdvancedData();default:return{}}}},{key:"getSimpleData",value:function(){return this.removeDefaultFields(Form.getFormData(this.forms.simple))}},{key:"removeDefaultFields",value:function(e){var t=this,n=function(e){return!(e["resize[width]"]&&e["resize[width]"]!==t.imageDimensions.naturalWidth.toString()||e["resize[height]"]&&e["resize[height]"]!==t.imageDimensions.naturalHeight.toString())},i={"fit[position]":function(e){return"center"===e},"resize[width]":function(e,t){return n(t)},"resize[height]":function(e,t){return n(t)},"resize[keepAspectRatio]":function(e,t){return n(t)},gamma:function(e){return"1"===e},greyscale:function(e){return"false"===e},invert:function(e){return"false"===e},"rotate[backgroundColor]":function(e){return"#ffffff"===e},"crop[x]":function(e){return t.imageDimensions.cropX=""===e?0:parseInt(e)},"crop[y]":function(e){return t.imageDimensions.cropY=""===e?0:parseInt(e)}};for(var a in e){var s=e[a];i[a]&&i[a](s,e)?delete e[a]:("0"===s||""===s)&&delete e[a]}return e}},{key:"getAdvancedData",value:function(){return JSON.parse(this.fields.macro.val())}},{key:"applyChanges",value:function(e){var t=this;return this.applyingChanges?void new Notification({content:"Already Processing",status:"failed"}):($.ajax({type:"GET",url:this.image.attr("data-root"),data:e,contentType:!1,success:this.onRequestEnd,error:function(){return t.progressNotification.hide(),Ajax.handleError()},xhr:function(){var e=window.ActiveXObject?new ActiveXObject("XMLHttp"):new XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),e}}),this.applyingChanges=!0)}},{key:"onRequestEnd",value:function(e,t,n){return this.applyingChanges=!1,this.progressNotification.hide(),null!=this.jCropApi&&this.jCropApi.destroy(),this.jCropApi=null,this.forms.simple.attr("data-changed",!1),this.forms.advanced.attr("data-changed",!1),this.image[0].src="data:image/jpeg;base64,"+base64Encode(e)}},{key:"handleCropEnable",value:function(){if(null!=this.jCropApi)return this.jCropApi.enable();var e=this;return this.image.Jcrop({onChange:this.handleCropSelect,onSelect:this.handleCropSelect,onRelease:this.handleCropRelease},function(){return e.jCropApi=this})}},{key:"handleCropDisable",value:function(){return this.jCropApi.disable()}},{key:"handleCropSelect",value:function(e){return this.cropDisableCounter>1?(this.fields.crop.x.val(Math.round(e.x/this.imageDimensions.width*this.imageDimensions.naturalWidth+this.imageDimensions.cropX)),this.fields.crop.y.val(Math.round(e.y/this.imageDimensions.height*this.imageDimensions.naturalHeight+this.imageDimensions.cropY)),this.fields.crop.width.val(Math.round(e.w/this.imageDimensions.width*this.imageDimensions.naturalWidth)),this.fields.crop.height.val(Math.round(e.h/this.imageDimensions.height*this.imageDimensions.naturalHeight))):this.cropDisableCounter++}},{key:"handleCropInputChange",value:function(){if(null!=this.jCropApi){var e=this.fields.crop.x.val()/this.imageDimensions.naturalWidth*this.imageDimensions.width-this.imageDimensions.cropX,t=this.fields.crop.y.val()/this.imageDimensions.naturalHeight*this.imageDimensions.height-this.imageDimensions.cropY;return this.cropDisableCounter=0,this.jCropApi.setSelect([e,t,e+this.fields.crop.width.val()/this.imageDimensions.naturalWidth*this.imageDimensions.width,t+this.fields.crop.height.val()/this.imageDimensions.naturalHeight*this.imageDimensions.height])}}},{key:"handleCropRelease",value:function(){return this.fields.crop.x.val(0),this.fields.crop.y.val(0),this.fields.crop.width.val(0),this.fields.crop.height.val(0)}},{key:"handleResizeInputChange",value:function(e){if(this.fields.resize.keepAspectRatio[0].checked){var t=e.target.name,n=$(e.target).val();return console.log(t,n),"resize[width]"===t?this.fields.resize.height.val(Math.round(n/this.imageDimensions.ratio)):this.fields.resize.width.val(Math.round(n*this.imageDimensions.ratio))}}}],[{key:"initialize",value:function(t){return t.find("."+e.classes.layout.container).each(function(){return e.list.push(new e($(this)))})}}]),e}(),base64Encode=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",i=0;i<e.length;){var a=255&e.charCodeAt(i++),s=255&e.charCodeAt(i++),r=255&e.charCodeAt(i++),o=a>>2,l=(3&a)<<4|s>>4,c=void 0,u=void 0;isNaN(s)?c=u=64:(c=(15&s)<<2|r>>6,u=isNaN(r)?64:63&r),n+=t.charAt(o)+t.charAt(l)+t.charAt(c)+t.charAt(u)}return n};ImageEditor.list=[],ImageEditor.classes={layout:{container:"ImageEditor",image:"ImageEditor-image"},button:{toggleFullscreen:"ImageEditor-toggleFullscreen",save:"ImageEditor-save",apply:"ImageEditor-apply"},form:{simple:"ImageEditor-form--simple",advanced:"ImageEditor-form--advanced",crop:"ImageEditor-crop-input",resize:"ImageEditor-resize-input"}},Oxygen||(Oxygen={}),Oxygen.initLogin=function(){var e=$(".Login-form").addClass("Login--noTransition").addClass("Login--slideDown");e[0].offsetHeight,e.removeClass("Login--noTransition"),setTimeout(function(){$("body").removeClass("Login--isHidden")},500),$(".Login-scrollDown").on("click",function(){$(".Login-message").addClass("Login--slideUp"),e.removeClass("Login--slideDown"),$(".Login-background--blur").addClass("Login--isHidden")}),e.on("submit",function(){e.addClass("Login--slideUp")}),Ajax.errorCallbacks.push(function(t){return e.removeClass("Login--slideUp"),t}),Ajax.successCallbacks.push(function(t){return"failed"==t.status&&e.removeClass("Login--slideUp"),t})};
//# sourceMappingURL=app.min.js.map
