"use strict";var parentMatchingSelector=function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matchesSelector(t))return e;return null},parentOrSelfMatchingSelector=function(e,t){if(e.matchesSelector(t))return e;for(;e&&e!==document;e=e.parentNode)if(e.matchesSelector(t))return e;return null};NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];var matchesMethod=function(){var e=Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++){var n=t[r]+"MatchesSelector";if(e[n])return n}}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Element.prototype.matchesSelector=function(e){return this[matchesMethod](e)};var Dialog=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"registerEvents",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll('[data-dialog-type="confirm"]'));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("click",i.handleConfirmClick)}}catch(e){r.e(e)}finally{r.f()}var n,o=_createForOfIteratorHelper(e.querySelectorAll('[data-dialog-type="alert"]'));try{for(o.s();!(n=o.n()).done;){n.value.addEventListener("click",i.handleAlertClick)}}catch(e){o.e(e)}finally{o.f()}}},{key:"handleAlertClick",value:function(e){vex.dialog.alert(e.currentTarget.getAttribute("data-dialog-message"))}},{key:"handleConfirmClick",value:function(e,t){var r=e.currentTarget;if("true"!==r.getAttribute("data-dialog-disabled")){var n;for(var o in e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n={message:r.getAttribute("data-dialog-message"),callback:function(e){e&&(r.setAttribute("data-dialog-disabled","true"),r.click())}},t)n[o]=t[o];return vex.dialog.confirm(n)}}}]),i}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Dropdown=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"registerGlobalEvent",value:function(){return document.addEventListener("click",n.handleGlobalClick)}},{key:"registerEvents",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll("."+n.classes.dropdownToggle));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("click",n.handleClick)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleClick",value:function(e){for(var t=e.target;!t.classList.contains(n.classes.dropdownToggle);){if(t.matchesSelector("a[href], form"))return;t=t.parentNode}var r=t.querySelector("."+n.classes.dropdownList);r.classList.contains(n.classes.isActive)?r.classList.remove(n.classes.isActive):(n.reset(),r.classList.add(n.classes.isActive))}},{key:"handleGlobalClick",value:function(e){null==parentMatchingSelector(e.target,"."+n.classes.dropdownToggle)&&n.reset()}},{key:"reset",value:function(){var e,t=_createForOfIteratorHelper(document.querySelectorAll("."+n.classes.dropdownList));try{for(t.s();!(e=t.n()).done;){e.value.classList.remove(n.classes.isActive)}}catch(e){t.e(e)}finally{t.f()}}}]),n}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Dropdown.classes={dropdownToggle:"Dropdown-container",dropdownList:"Dropdown",isActive:"is-active"};var EditableList=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"registerEvents",value:function(e){var t,r=_createForOfIteratorHelper(e.getElementsByClassName(n.classes.add));try{for(r.s();!(t=r.n()).done;){t.value.addEventListener("click",n.handleAdd)}}catch(e){r.e(e)}finally{r.f()}e.addEventListener("click",n.handleRemove)}},{key:"handleAdd",value:function(e){var t=e.currentTarget.parentNode.querySelector("."+n.classes.container),r=t.querySelector("."+n.classes.template).cloneNode(!0);r.classList.remove(n.classes.template),t.appendChild(r)}},{key:"handleRemove",value:function(e){if(parentOrSelfMatchingSelector(e.target,"."+n.classes.remove)){var t=parentMatchingSelector(e.target,"."+n.classes.row);t.parentNode&&(t.parentNode.removeChild(t),console.log("removed node"))}}}]),n}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}EditableList.classes={container:"EditableList",template:"EditableList-template",row:"EditableList-row",remove:"EditableList-remove",add:"EditableList-add"},window.Oxygen||(window.Oxygen={});var FetchOptions=function(){function e(){_classCallCheck(this,e),this.headers=new Headers}return _createClass(e,[{key:"wantJson",value:function(){return this.headers.set("Accept","application/json"),this}},{key:"contentType",value:function(e){return this.headers.set("Content-Type",e),this}},{key:"method",value:function(e){return this.method=e,this}},{key:"body",value:function(e){return this.body=e,this}},{key:"cookies",value:function(){return this.credentials="same-origin",this}}],[{key:"default",value:function(){return(new e).cookies()}}]),e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Oxygen.respond={},Oxygen.respond.text=function(e){return e.text()},Oxygen.respond.json=function(e){return e.json()},Oxygen.respond.checkStatus=function(e){if(e.ok)return e;var t=new Error;throw t.response=e,t},Oxygen.respond.notification=function(e){return Notification.isNotification(e)&&NotificationCenter.present(new Notification(e)),e},Oxygen.respond.redirect=function(e){return e.redirect&&(window.smoothState&&!0!==e.hardRedirect?window.smoothState.load(e.redirect,!1):window.location.replace(e.redirect)),e},Oxygen.respond.handleAPIError=function(e){if(!(e.response&&e.response instanceof Response))throw e;e.response.json().then(Oxygen.handleAPIError).catch(function(e){console.error("Error response did not contain valid JSON: ",e),NotificationCenter.present(new Notification({content:"Whoops, looks like something went wrong.",status:"bug"}))})},Oxygen.handleAPIError=function(e){console.error(e),Notification.isNotification(e)?NotificationCenter.present(new Notification(e)):e.error?NotificationCenter.present(new Notification({content:'PHP Exception of type <code class="no-wrap">'+e.error.type+'</code> with message <code class="no-wrap">'+e.error.message+'</code> thrown at <code class="no-wrap">'+e.error.file+":"+e.error.line+"</code>",status:"bug"})):(console.log("JSON error response unhandled: ",e),NotificationCenter.present(new Notification({content:"Whoops, looks like something went wrong.",status:"bug"})))};var Form=function(){function i(e){_classCallCheck(this,i),this.form=e,this.originalData=getFormData(this.form),this.contentGenerators=[],this.registerEvents()}return _createClass(i,null,[{key:"findAll",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll("form"));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.formObject=new i(n)}}catch(e){r.e(e)}finally{r.f()}$(e).find(i.classes.taggableInput).tagging({"edit-on-delete":!1})}},{key:"registerKeydownHandler",value:function(){return document.addEventListener("keydown",i.handleKeydown)}},{key:"handleKeydown",value:function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)for(var t=document.getElementsByTagName("form"),r=0;r<t.length;r++){var n=t[r];n.classList.contains(i.classes.submitOnKeydown)&&n.formObject&&(n.formObject.submit(),e.preventDefault())}}}]),_createClass(i,[{key:"registerEvents",value:function(){var t=this;if(this.form.classList.contains(i.classes.warnBeforeExit)){var e,r=_createForOfIteratorHelper(document.querySelectorAll('a, button[type="submit"]'));try{for(r.s();!(e=r.n()).done;){e.value.addEventListener("click",function(e){return t.handleExit(e)})}}catch(e){r.e(e)}finally{r.f()}}if(this.form.addEventListener("submit",function(e){return t.handleSubmit(e)}),this.form.classList.contains(i.classes.submitAsyncOnChange)&&this.form.addEventListener("change",function(e){e.preventDefault(),t.submitAsync()}),this.form.classList.contains(i.classes.autoSubmit))return this.submit()}},{key:"handleExit",value:function(e){var t=this;if(!e.currentTarget.classList.contains("Form-submit")&&document.body.contains(this.form)){this.generateContent();var r=this.originalData,n=getFormData(this.form);if(console.log("original form data:",r),console.log("current form data:",n),!compareByValue(r,n)){console.log("=> form data differs");var o=e.currentTarget;"true"!==o.getAttribute("data-dialog-disabled")&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),vex.dialog.confirm({message:i.messages.confirmation,buttons:[{text:"Save",type:"button",className:"vex-dialog-button-primary",click:function(e){e.data().vex.value="save",vex.close(e.data().vex.id)}},$.extend({},vex.dialog.buttons.NO,{text:"Cancel"}),{text:"Don't Save",type:"button",className:"vex-dialog-button-secondary vex-dialog-button-left",click:function(e){e.data().vex.value="continue",vex.close(e.data().vex.id)}}],callback:function(e){if("continue"==e)return o.setAttribute("data-dialog-disabled","true"),o.click();"save"==e&&(t.form.classList.contains(i.classes.submitAsync)?(t.submitAsync(!0),o.setAttribute("data-dialog-disabled","true"),o.click()):t.submit())}}))}}}},{key:"submit",value:function(){this.form.querySelector('button[type="submit"]').click()}},{key:"generateContent",value:function(){var e,t=_createForOfIteratorHelper(this.contentGenerators);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this)}}catch(e){t.e(e)}finally{t.f()}}},{key:"handleSubmit",value:function(e){this.generateContent(),this.form.classList.contains(i.classes.submitAsync)&&!i.disableAsync&&(e.preventDefault(),this.submitAsync())}},{key:"submitAsync",value:function(e){var t=this,r=getFormData(this.form);console.log("Submitting Form with Data: ",r);var n=window.fetch(this.form.action,FetchOptions.default().method(this.form.method).body(getFormDataObject(r)).wantJson()).then(Oxygen.respond.checkStatus).then(Oxygen.respond.json).then(function(e){return"success"===e.status&&(t.originalData=getFormData(t.form),console.log("Form Saved Successfully")),e}),o=this.form.modifyPromise;return void 0===o&&(o=function(e){return e}),n=n.then(Oxygen.respond.notification),e||(n=n.then(Oxygen.respond.redirect)),n=(n=o(n)).catch(Oxygen.respond.handleAPIError)}}]),i}();function getFormData(e){var t,r={},n=_createForOfIteratorHelper(e.querySelectorAll("[name]"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if("checkbox"!=o.type&&"radio"!=o.type||o.checked)if(null==o.name&&console.dir(o),"select-multiple"==o.type){r[o.name]=[];var i,a=_createForOfIteratorHelper(o.options);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.selected&&r[o.name].push(s.value)}}catch(e){a.e(e)}finally{a.f()}}else if("file"==o.type){var l,c=null!=(l=o.filesToUpload)?l:o.files;r[o.name]=[];for(var u,d=0;d<c.length;d++)u=c[d],r[o.name].push(u)}else o.name.endsWith("[]")?(void 0!==r[o.name]&&null!==r[o.name]||(r[o.name]=[]),r[o.name].push(o.value)):r[o.name]=o.value}}catch(e){n.e(e)}finally{n.f()}return r}function getFormDataObject(e){var t=new FormData;for(var r in e)if(e[r]instanceof Array){var n,o=_createForOfIteratorHelper(e[r]);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.append(r,i)}}catch(e){o.e(e)}finally{o.f()}}else t.append(r,e[r]);return t}function compareByValue(e,t){for(var r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;switch(_typeof(e[r])){case"object":if(!compareByValue(e[r],t[r]))return!1;break;case"function":if(void 0===t[r]||"compare"!=r&&e[r].toString()!=t[r].toString())return!1;break;default:if(e[r]!=t[r])return!1}}for(var r in t)if(t.hasOwnProperty(r)&&void 0===e[r])return!1;return!0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Form.disableAsync=!1,document.addEventListener("keydown",function(e){e.altKey&&(e.controlKey||e.metaKey)&&74==e.which&&(Form.disableAsync=!Form.disableAsync,e.preventDefault(),NotificationCenter.present(new Notification({content:"Asynchronous form submission "+(Form.disableAsync?"disabled":"enabled"),status:"info"})))}),Form.messages={confirmation:"Do you want to save changes?"},Form.classes={warnBeforeExit:"Form--warnBeforeExit",submitOnKeydown:"Form--submitOnKeydown",submitAsync:"Form--sendAjax",submitAsyncOnChange:"Form--sendAjaxOnChange",autoSubmit:"Form--autoSubmit",taggableInput:".Form-taggable"};var MainNav=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"headroom",value:function(){var e=document.querySelector(".MainNav");if(e&&768<window.innerWidth){var t=new Headroom(e,{tolerance:20,offset:50,classes:{initial:"Headroom",pinned:"Headroom--pinned",unpinned:"Headroom--unpinned",top:"Headroom--top",notTop:"Headroom--not-top"}});t.init()}}}]),e}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var NotificationCenter=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"initializeExistingMessages",value:function(){var e,t=document.querySelector("."+Notification.classes.container).querySelectorAll("."+Notification.classes.item),r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;o.registerHide(new Notification({message:n}))}}catch(e){r.e(e)}finally{r.f()}}},{key:"present",value:function(e){document.querySelector("."+Notification.classes.container).appendChild(e.message),o.registerHide(e)}},{key:"registerHide",value:function(t){if(null!=t.hideAfter)setTimeout(function(){o.hide(t)},t.hideAfter);t.message.addEventListener("click",function(e){o.hide(t),"undefined"!=typeof auto&&clearTimeout(auto)})}},{key:"hide",value:function(t){t.message.classList.add("is-sliding-up"),setTimeout(function(){var e=t.message;e.parentNode&&e.parentNode.removeChild(e)},500)}}]),o}(),Notification=function(){function t(e){if(_classCallCheck(this,t),e.log&&console.log(e.log),this.hideAfter=15e3,e.message)this.message=e.message,this.message.classList.remove("is-hidden");else{if(!e.status||!e.content)throw new Error("Invalid Arguments For New Notification: "+JSON.stringify(e));this.message=document.createElement("div"),this.message.classList.add(t.classes.item),this.message.classList.add("Notification--"+e.status),"failed"==e.status&&(this.hideAfter=null),this.message.innerHTML=e.content+'<span class="Notification-dismiss Icon Icon-times"></span>'}}return _createClass(t,null,[{key:"isNotification",value:function(e){return void 0!==e.message||void 0!==e.content&&void 0!==e.status}}]),t}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Notification.classes={container:"Notification-container",item:"Notification"};var Preferences=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"setPreferences",value:function(e){return s.preferences=e}},{key:"isDefined",value:function(e){return null!=e}},{key:"get",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:null,n=s.preferences;if(!s.isDefined(n))return r;for(var o=e.split("."),i=o.length,a=0;s.isDefined(n)&&a<i;){n=n[o[a]],a++}return s.isDefined(n)?n:(console.log("Preferences key ",e,"was not defined, using default ",r),r)}},{key:"has",value:function(e){var t=s.preferences;if(!t)return!1;for(var r=e.split("."),n=(r.pop(),r.length),o=1,i=r[0];(t=t[i])&&o<n;)i=r[o],o++;return t}}]),s}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Slider=function(){function o(e){_classCallCheck(this,o),this.container=e,this.list=this.container.querySelector(o.selectors.list),this.items=this.container.querySelectorAll(o.selectors.item),this.interval=this.container.getAttribute("data-interval")||5e3,this.previousId=0,this.currentId=0,this.nextId=0,this.animating=!1,this.animationTime=1e3,this.registerEvents(),this.next(),"true"===this.container.getAttribute("data-autoplay")&&this.play()}return _createClass(o,null,[{key:"findAll",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll(o.selectors.slider));try{for(r.s();!(t=r.n()).done;){var n=t.value;o.list.push(new o(n))}}catch(e){r.e(e)}finally{r.f()}}}]),_createClass(o,[{key:"registerEvents",value:function(){this.container.querySelector(o.selectors.back).addEventListener("click",this.previous.bind(this)),this.container.querySelector(o.selectors.forward).addEventListener("click",this.next.bind(this))}},{key:"play",value:function(){var e="reverse"===this.container.getAttribute("data-direction")?this.previous.bind(this):this.next.bind(this);this.timer=setInterval(e,this.interval)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"hideAll",value:function(){var e,t=_createForOfIteratorHelper(this.items);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.classList="",r.classList.add(o.classes.item),r.classList.add(o.classes.isHidden)}}catch(e){t.e(e)}finally{t.f()}}},{key:"getItem",value:function(e){var t=this.items[e];return null==t&&console.error("no slider item at index: ",e),t}},{key:"next",value:function(){if(!this.shouldAnimate())return!1;this.previousId=this.currentId,this.currentId+=1,this.currentId>=this.items.length&&(this.currentId=0),this.nextId=this.currentId+1,this.nextId>=this.items.length&&(this.nextId=0);var e=this.getItem(this.currentId),t=this.getItem(this.previousId);this.hideAll(),t.classList.remove(o.classes.isHidden),t.classList.add(o.classes.slideOutLeft),e.classList.remove(o.classes.isHidden),e.classList.add(o.classes.slideInRight)}},{key:"previous",value:function(){if(!this.shouldAnimate())return!1;this.nextId=this.currentId,--this.currentId,this.currentId<=0&&(this.currentId=this.items.length-1),this.previousId=this.currentId-1,this.nextId<=0&&(this.nextId=this.items.length-1);var e=this.getItem(this.currentId),t=this.getItem(this.nextId);this.hideAll(),t.classList.remove(o.classes.isHidden),t.classList.add(o.classes.slideOutRight),e.classList.remove(o.classes.isHidden),e.classList.add(o.classes.slideInLeft)}},{key:"shouldAnimate",value:function(){var e=this;return!this.animating&&(this.animating=!0,setTimeout(function(){e.animating=!1},this.animationTime),!0)}}]),o}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Slider.selectors={slider:".Slider",list:".Slider-list",item:".Slider-item",back:".Slider-back",forward:".Slider-forward"},Slider.classes={item:"Slider-item",isCurrent:"Slider-item--current",isHidden:"Slider-item--hidden",slideInLeft:"Slider-item--slideInLeft",slideInRight:"Slider-item--slideInRight",slideOutLeft:"Slider-item--slideOutLeft",slideOutRight:"Slider-item--slideOutRight",isAfter:"Slider-item--after",noTransition:"Slider--noTransition"},Slider.list=[];var SmoothState=function(){function i(){_classCallCheck(this,i),this.loading=!1,this.smoothState=$("#page").smoothState({anchors:".Link--smoothState",root:$(document),cacheLength:0,forms:"null",onStart:{duration:350,render:this.onStart},onProgress:{duration:0,render:this.onProgress},onReady:{duration:0,render:this.onReady},onAfter:this.onAfter}).data("smoothState")}return _createClass(i,[{key:"onStart",value:function(){var e,t=_createForOfIteratorHelper(document.querySelectorAll("html, body"));try{for(t.s();!(e=t.n()).done;){e.value.scrollTop=0}}catch(e){t.e(e)}finally{t.f()}this.loading=!0;var r=document.getElementsByClassName("Block"),n=Array.prototype.slice.call(r);n.reverse();for(var o=function(e){var t=n[e];setTimeout(function(){return t.classList.add("Block--isExiting")},50*e)},i=0;i<n.length;i++)o(i)}},{key:"onProgress",value:function(){i.setCursor("wait")}},{key:"onReady",value:function(e,t){i.setCursor("auto"),Oxygen.reset(),e[0].style.display="none",e.html(t),document.querySelector(".pace-activity").classList.remove("pace-activity-active");for(var r=document.getElementsByClassName("Block"),n=function(){var e=r[o];e.classList.add("Block--isHidden"),setTimeout(function(){e.classList.remove("Block--isHidden"),e.classList.add("Block--isEntering"),setTimeout(function(){e.classList.remove("Block--isEntering")},250)},50*o)},o=0;o<r.length;o++)n();e[0].style.display="block"}},{key:"onAfter",value:function(){return this.loading=!1,Oxygen.init(document.getElementById("page"))}},{key:"load",value:function(e,t){return this.smoothState.load(e,t)}}],[{key:"setCursor",value:function(e){var t,r=document.querySelectorAll("html, body"),n=_createForOfIteratorHelper(r);try{for(n.s();!(t=n.n()).done;){t.value.style.cursor=e}}catch(e){n.e(e)}finally{n.f()}var o,i=document.querySelectorAll("a"),a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){o.value.style.cursor=e}}catch(e){a.e(e)}finally{a.f()}}},{key:"setTheme",value:function(e){console.log("Setting SmoothState Theme: ",e);var t=document.getElementById("page");t&&t.classList.add("Page-transition--"+e)}}]),i}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var TabSwitcher=function(){function a(e,t){_classCallCheck(this,a),this.tabs=e,this.content=t,this.findDefault(),this.registerEvents()}return _createClass(a,null,[{key:"findAll",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll(a.selectors.container));try{for(r.s();!(t=r.n()).done;){var n=t.value;console.log(n);var o=n.matchesSelector(a.selectors.tabs)?n:n.querySelector(a.selectors.tabs),i=n.matchesSelector(a.selectors.content)?n:n.querySelector(a.selectors.content);a.list.push(new a(o,i))}}catch(e){r.e(e)}finally{r.f()}}}]),_createClass(a,[{key:"findDefault",value:function(){var e=this.tabs.querySelector("[data-default-tab]").getAttribute("data-switch-to-tab");this.setTo(e)}},{key:"registerEvents",value:function(){var t=this;this.tabs.querySelectorAll("[data-switch-to-tab]").forEach(function(e){e.addEventListener("click",function(e){t.setTo(e.currentTarget.getAttribute("data-switch-to-tab"))})})}},{key:"setTo",value:function(e){this.current=e;var t,r=_createForOfIteratorHelper(this.content.querySelectorAll("[data-tab]"));try{for(r.s();!(t=r.n()).done;){t.value.classList.remove(a.classes.active)}}catch(e){r.e(e)}finally{r.f()}this.content.querySelector('[data-tab="'+e+'"]').classList.add(a.classes.active);var n,o=_createForOfIteratorHelper(this.tabs.querySelectorAll("[data-switch-to-tab]"));try{for(o.s();!(n=o.n()).done;){n.value.classList.remove(a.classes.active)}}catch(e){o.e(e)}finally{o.f()}this.tabs.querySelector('[data-switch-to-tab="'+e+'"]').classList.add(a.classes.active)}}]),a}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createSuper(n){return function(){var e,t=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var r=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}TabSwitcher.classes={active:"TabSwitcher--isActive"},TabSwitcher.selectors={container:".TabSwitcher",tabs:".TabSwitcher-tabs",content:".TabSwitcher-content"},TabSwitcher.list=[];var Toggle=function(){function n(e,t,r){_classCallCheck(this,n),this.toggle=e,this.enableCallback=t,this.disableCallback=r,this.registerEvents()}return _createClass(n,[{key:"registerEvents",value:function(){var t=this;this.toggle.addEventListener("click",function(e){return t.handleToggle(e)}),null==this.toggle.getAttribute("data-enabled")&&this.toggle.setAttribute("data-enabled","false")}},{key:"handleToggle",value:function(e){"true"===this.toggle.getAttribute("data-enabled")?(this.toggle.setAttribute("data-enabled","false"),this.disableCallback(e)):(this.toggle.setAttribute("data-enabled","true"),this.enableCallback(e))}}]),n}();Toggle.classes={ifEnabled:"Toggle--ifEnabled",ifDisabled:"Toggle--ifDisabled"};var FullscreenToggle=function(){_inherits(a,Toggle);var i=_createSuper(a);function a(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};return _classCallCheck(this,a),(r=i.call(this,e,null,null)).fullscreenElement=t,r.enableCallback=r.enterFullscreen,r.disableCallback=r.exitFullscreen,r.enterFullscreenCallback=n,r.exitFullscreenCallback=o,r}return _createClass(a,[{key:"enterFullscreen",value:function(){this.fullscreenElement.classList.add("FullscreenToggle--isFullscreen"),document.body.classList.add("Body--noScroll");var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.enterFullscreenCallback()}},{key:"exitFullscreen",value:function(){this.fullscreenElement.classList.remove("FullscreenToggle--isFullscreen"),document.body.classList.remove("Body--noScroll"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.exitFullscreenCallback()}}]),a}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Upload=function(){function c(){_classCallCheck(this,c)}return _createClass(c,null,[{key:"registerEvents",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll(c.selectors.uploadElement));try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.querySelector(c.selectors.dropzoneElement);o.addEventListener("dragover",c.handleDragOver),o.addEventListener("dragleave",c.handleDragLeave),o.addEventListener("drop",c.handleDrop),n.querySelector("input[type=file]").addEventListener("change",c.handleChange)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleDragOver",value:function(e){return e.preventDefault(),e.currentTarget.classList.add(c.states.onDragOver)}},{key:"handleDragLeave",value:function(e){return e.currentTarget.classList.remove(c.states.onDragOver)}},{key:"handleDrop",value:function(e){e.preventDefault(),e.currentTarget.classList.remove(c.states.onDragOver);var t=parentMatchingSelector(e.currentTarget,c.selectors.uploadElement);c.addFiles(t,e.dataTransfer.files)}},{key:"handleChange",value:function(e){c.addFiles(parentMatchingSelector(e.currentTarget,c.selectors.uploadElement),e.currentTarget.files),console.dir(e.currentTarget),e.currentTarget.value=""}},{key:"addFiles",value:function(i,a){var s,l=i.querySelector('input[type="file"]'),t=_createForOfIteratorHelper(a);try{var e=function(){var n=s.value;console.log(n.type);var o=document.createElement("div");if(o.classList.add("FileUpload-preview"),o.innerHTML='<div class="FileUpload-preview-info"><span>'+n.name+'</span><button type="button" class="FileUpload-preview-remove Button--transparent Icon Icon-times"></button><span class="FileUpload-preview-size">'+fileSize(n.size)+"</span></div>",i.insertBefore(o,i.firstChild),o.querySelector(c.selectors.removeFile).addEventListener("click",function(e){var t,r;t=e.currentTarget,o=parentMatchingSelector(t,c.selectors.previewElement),-1<(r=l.filesToUpload.indexOf(n))&&l.filesToUpload.splice(r,1),c.recalculateDropzoneVisibility(i,a),o.parentNode.removeChild(o)}),null==l.filesToUpload&&(l.filesToUpload=[]),l.filesToUpload.push(n),/^image\//.test(n.type)){var e=new FileReader;e.onload=function(e){o.style.backgroundImage="url("+e.target.result+")"},e.readAsDataURL(n)}else{var t=document.createElement("div");t.classList.add("Icon-container");var r=document.createElement("span");r.classList.add("Icon","Icon--gigantic","Icon--light","Icon-file-text"),t.appendChild(r),o.insertBefore(t,o.firstChild)}};for(t.s();!(s=t.n()).done;)e()}catch(e){t.e(e)}finally{t.f()}c.recalculateDropzoneVisibility(i),console.log(a)}},{key:"recalculateDropzoneVisibility",value:function(e){var t=e.querySelector('input[type="file"]'),r=e.querySelector(c.selectors.dropzoneElement);!t.multiple&&0<t.filesToUpload.length?r.style.display="none":r.style.display="block"}}]),c}();function fileSize(e){var t,r,n,o;for(o=e+" bytes",n=["KB","MB","GB","TB","PB","EB","ZB","YB"],r=0,t=e/1024;1<t;)o=t.toFixed(3)+" "+n[r],t/=1024,r++;return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Upload.selectors={uploadElement:".FileUpload",previewElement:".FileUpload-preview",dropzoneElement:".FileUpload-dropzone",removeFile:".FileUpload-preview-remove"},Upload.states={onDragOver:"FileUpload--onDragOver"};var CodeViewInterface=function(){function t(e){_classCallCheck(this,t),this.editor=e,this.ace=null}return _createClass(t,[{key:"create",value:function(){var e=ace.edit(this.editor.name+"-ace-editor");e.getSession().setMode("ace/mode/"+this.editor.language),e.setTheme(Preferences.get("editor.ace.theme")),e.getSession().setUseWrapMode(Preferences.get("editor.ace.wordWrap")),e.setHighlightActiveLine(Preferences.get("editor.ace.highlightActiveLine")),e.setShowPrintMargin(Preferences.get("editor.ace.showPrintMargin")),e.setShowInvisibles(Preferences.get("editor.ace.showInvisibles")),e.setReadOnly(this.editor.readOnly),this.ace=e,this.view=document.getElementById(this.editor.name+"-ace-editor"),this.view.style.fontSize=Preferences.get("editor.ace.fontSize")}},{key:"show",value:function(e){var t=this;console.log("CodeViewInterface.show"),this.view.classList.remove(Editor.classes.state.isHidden),e&&(this.view.style.width="100%"),setTimeout(function(){t.resize()},300)}},{key:"hide",value:function(){console.log("CodeViewInterface.hide"),this.view.classList.add(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){this.ace.setValue(this.editor.textarea.value,-1)}},{key:"valueToForm",value:function(){this.editor.textarea.value=this.ace.getValue()}},{key:"resize",value:function(){this.ace.resize()}}]),t}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var DesignViewInterface=function(){function t(e){_classCallCheck(this,t),this.editor=e,this.ck=null}return _createClass(t,[{key:"create",value:function(){var t=this,e=Preferences.get("editor.ckeditor",{});e.customConfig=e.customConfig||"",e.allowedContent=!0,e.entities=!1,e.protectedSource=[/<\?[\s\S]*?\?>/g,/(\n[ \t]*)?@\w+(\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\))?\n?/g,/{{[\s\S]*?}}}?/g],e.contentsCss=this.editor.stylesheets,CKEDITOR.dtd.$removeEmpty.span=!1,this.ck=CKEDITOR.replace(this.editor.name+"-editor",e),this.ck.on("instanceReady",function(e){t.view=document.getElementById("cke_"+t.editor.name+"-editor")})}},{key:"show",value:function(t){var r=this;console.log("DesignViewInterface.show"),this.view?(this.view.style.display="block",t&&(this.view.style.width="100%")):this.ck.on("instanceReady",function(e){r.view.style.display="block",t&&(r.view.style.width="100%")})}},{key:"hide",value:function(){this.view.style.display="none"}},{key:"valueFromForm",value:function(){this.ck.setData(this.editor.textarea.value)}},{key:"valueToForm",value:function(){this.editor.textarea.value=this.ck.getData()}}]),t}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Editor=function(){function a(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];_classCallCheck(this,a),this.enterFullscreen=this.enterFullscreen.bind(this),this.exitFullscreen=this.exitFullscreen.bind(this),this.handleSwitchEditor=this.handleSwitchEditor.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.name=e,this.language=t,this.currentMode=r,this.readOnly=n,this.stylesheets=o,this.modes={},this.textarea=document.querySelector('textarea[name="'+this.name+'"]'),this.container=parentMatchingSelector(this.textarea,"."+a.classes.editor.container);var i=this.container.querySelector("."+a.classes.button.fullscreenToggle);i&&(this.fullscreenToggle=new FullscreenToggle(i,this.container,this.enterFullscreen,this.exitFullscreen)),this.show(),this.resizeToContent(),this.registerEvents()}return _createClass(a,null,[{key:"createEditors",value:function(e){for(var t,r=0;r<e.length;r++){if(t=e[r],document.querySelector('textarea[name="'+t.name+'"]')){console.log("Editor found"),null==t.mode&&(t.mode=user.editor.defaultMode),console.log(t);var n=new a(t.name,t.language,t.mode,t.readOnly,t.stylesheets);a.list.push(n)}else console.log("Editor not found"),console.log(t)}}}]),_createClass(a,[{key:"getMode",value:function(e){return null==e?this.currentMode:e}},{key:"registerEvents",value:function(){var e,t=this,r=_createForOfIteratorHelper(this.container.querySelectorAll("."+a.classes.button.switchEditor));try{for(r.s();!(e=r.n()).done;){e.value.addEventListener("click",this.handleSwitchEditor)}}catch(e){r.e(e)}finally{r.f()}var n=parentMatchingSelector(this.container,"form");null!==n&&n.formObject&&n.formObject.contentGenerators.push(function(e){return t.valueToForm()})}},{key:"create",value:function(e){var t=this.getMode(e);switch(t){case"code":this.modes.code=new CodeViewInterface(this);break;case"design":this.modes.design=new DesignViewInterface(this);break;case"preview":this.modes.preview=new PreviewInterface(this);break;case"split":this.modes.split=new SplitViewInterface(this)}this.modes[t].create()}},{key:"show",value:function(e,t){var r=!(1<arguments.length&&void 0!==t)||t,n=this.getMode(e);null==this.modes[n]&&this.create(n),this.modes[n].show(r),this.currentMode=n,this.valueFromForm(n)}},{key:"hide",value:function(e){var t=this.getMode(e);this.modes[t].hide(),this.valueToForm(t)}},{key:"valueFromForm",value:function(e){var t=this.getMode(e);this.modes[t].valueFromForm()}},{key:"valueToForm",value:function(e){var t=this.getMode(e);this.modes[t].valueToForm()}},{key:"resizeToContainer",value:function(){this.modes.code&&this.modes.code.resize()}},{key:"resizeToContent",value:function(){this.container.querySelector("."+a.classes.editor.content).style.height=1.5*this.textarea.rows+"em",this.modes.code&&this.modes.code.resize()}},{key:"enterFullscreen",value:function(){console.log("fullscreen"),this.resizeToContainer()}},{key:"exitFullscreen",value:function(){console.log("exit"),console.trace(),this.resizeToContent()}},{key:"handleSwitchEditor",value:function(e){console.log("Editor.handleSwitchEditor");var t=e.currentTarget.getAttribute("data-editor");return this.hide(),this.show(t)}},{key:"handleFormSubmit",value:function(){return this.valueToForm()}}]),a}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Editor.list=[],Editor.classes={editor:{container:"Editor",header:"Editor-header",content:"Editor-content",footer:"Editor-footer",preview:"Editor-preview"},state:{isHidden:"Editor--hidden",contentIsSplit:"Editor-content--isSplit"},button:{switchEditor:"Editor--switchEditor",fullscreenToggle:"Editor--toggleFullscreen"}};var PreviewInterface=function(){function t(e){_classCallCheck(this,t),this.editor=e,this.view=null}return _createClass(t,[{key:"create",value:function(){var e=document.createElement("iframe");e.id=this.editor.name+"-preview",e.classList.add(Editor.classes.editor.preview),this.editor.container.querySelector(".Editor-content").appendChild(e),this.view=e}},{key:"show",value:function(e){var t=document.getElementById(this.editor.name+"-preview");t.classList.remove(Editor.classes.state.isHidden),e&&(t.style.width="100%")}},{key:"hide",value:function(){return document.getElementById(this.editor.name+"-preview").classList.add(Editor.classes.state.isHidden)}},{key:"valueFromForm",value:function(){var t=this,e={_token:this.editor.container.querySelector(".contentPreviewCSRFToken").value,content:this.editor.textarea.value},r=this.editor.container.querySelector(".contentPreviewURL").value,n=this.editor.container.querySelector(".contentPreviewMethod").value;console.log("Generating content using data ",e);window.fetch(r,FetchOptions.default().method(n).body(getFormDataObject(e))).then(Oxygen.respond.checkStatus).then(Oxygen.respond.text).then(function(e){t.view.srcdoc=e}).catch(function(e){if(!(e.response&&e.response instanceof Response))throw e;console.error(e),e.response.text().then(function(e){t.view.srcdoc=e})})}},{key:"valueToForm",value:function(){}}]),t}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var SplitViewInterface=function(){function t(e){_classCallCheck(this,t),this.editor=e,this.view=null}return _createClass(t,[{key:"create",value:function(){}},{key:"show",value:function(){var e,t=this.editor.container.querySelectorAll("."+Editor.classes.editor.content),r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){e.value.classList.add(Editor.classes.state.contentIsSplit)}}catch(e){r.e(e)}finally{r.f()}var n=this.editor;n.show("code",!1),n.show("preview",!1),n.modes.code.view.style.width="50%",n.modes.preview.view.style.width="50%",n.modes.code.ace.addEventListener("change",this.synchronize.bind(this))}},{key:"hide",value:function(){var e,t=this.editor.container.querySelectorAll("."+Editor.classes.editor.content),r=_createForOfIteratorHelper(t);try{for(r.s();!(e=r.n()).done;){e.value.classList.remove(Editor.classes.state.contentIsSplit)}}catch(e){r.e(e)}finally{r.f()}this.editor.hide("code"),this.editor.hide("preview")}},{key:"valueFromForm",value:function(){}},{key:"valueToForm",value:function(){}},{key:"synchronize",value:function(){var e=this;this.currentTimer&&clearTimeout(this.currentTimer),this.currentTimer=setTimeout(function(){"split"===e.editor.currentMode&&(e.editor.valueToForm("code"),e.editor.valueFromForm("preview"))},1e3)}}]),t}();function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var ImageEditor=function(){function o(e){var r=this;if(_classCallCheck(this,o),this.container=e,this.jCropApi=null,this.cropDisableCounter=0,this.cropOrigin={x:0,y:0},this.image=this.container.querySelector("."+o.classes.layout.image),this.$image=$(this.image),!this.image)throw new Error("<img> element doesn't exist");this.forms={simple:this.image.parentNode.parentNode.querySelector("."+o.classes.form.simple),advanced:this.image.parentNode.parentNode.querySelector("."+o.classes.form.advanced)},this.fields={crop:{x:this.container.querySelector('[name="crop[x]"]'),y:this.container.querySelector('[name="crop[y]"]'),width:this.container.querySelector('[name="crop[width]"]'),height:this.container.querySelector('[name="crop[height]"]')},resize:{width:this.container.querySelector('[name="resize[width]"]'),height:this.container.querySelector('[name="resize[height]"]'),keepAspectRatio:this.container.querySelector('[name="resize[keepAspectRatio]"][value="true"]')},macro:this.container.querySelector('[name="macro"]'),name:this.container.querySelector('[name="name"]'),slug:this.container.querySelector('[name="slug"]')},this.image.addEventListener("load",function(e){console.log("Image Loaded");var t=e.currentTarget;r.imageAspectRatio=t.naturalWidth/t.naturalHeight,r.fields.resize.width.value=t.naturalWidth,r.fields.resize.height.value=t.naturalHeight,r.enableCropping()}),this.fullscreenToggle=new FullscreenToggle(this.container.querySelector("."+o.classes.button.toggleFullscreen),this.container),this.container.querySelector("."+o.classes.button.apply).addEventListener("click",this.handlePreview.bind(this)),this.container.querySelector("."+o.classes.button.save).addEventListener("click",this.handleSave.bind(this)),this.container.querySelectorAll("."+o.classes.form.crop).forEach(function(e){e.addEventListener("input",r.handleCropInputChange.bind(r))}),this.container.querySelectorAll("."+o.classes.form.resize).forEach(function(e){e.addEventListener("input",r.handleResizeInputChange.bind(r))})}return _createClass(o,[{key:"handlePreview",value:function(){this.applyChanges(this.gatherData())}},{key:"handleSave",value:function(){var e=this.gatherData();e.save=!0,e.name=this.fields.name.value,e.slug=this.fields.slug.value,this.applyChanges(e),this.progressNotification=new Notification({content:"Saving Image",status:"success"}),NotificationCenter.present(this.progressNotification)}},{key:"gatherData",value:function(){switch(TabSwitcher.list[0].current){case"simple":return this.getSimpleData();case"advanced":return this.getAdvancedData();default:return{}}}},{key:"getSimpleData",value:function(){return this.removeDefaultFields(getFormData(this.forms.simple))}},{key:"removeDefaultFields",value:function(e){function r(e){return!(e["resize[width]"]&&e["resize[width]"]!==t.image.naturalWidth.toString()||e["resize[height]"]&&e["resize[height]"]!==t.image.naturalHeight.toString())}var t=this,n={"fit[position]":function(e){return"center"===e},"resize[width]":function(e,t){return r(t)},"resize[height]":function(e,t){return r(t)},"resize[keepAspectRatio]":function(e,t){return r(t)},gamma:function(e){return"1"===e},greyscale:function(e){return"false"===e},invert:function(e){return"false"===e},"rotate[backgroundColor]":function(e){return"#ffffff"===e},"crop[x]":function(e){void 0===t.pendingCropOrigin&&(t.pendingCropOrigin={}),t.pendingCropOrigin.x=parseInt(e)},"crop[y]":function(e){void 0===t.pendingCropOrigin&&(t.pendingCropOrigin={}),t.pendingCropOrigin.y=parseInt(e)}};for(var o in e){var i=e[o];(!n[o]||!n[o](i,e))&&"0"!==i&&""!==i||delete e[o]}return e}},{key:"getAdvancedData",value:function(){return JSON.parse(this.fields.macro.value)}},{key:"applyChanges",value:function(e){var r=this;if(this.applyingChanges)NotificationCenter.present(new Notification({content:"Already Processing",status:"failed"}));else{this.applyingChanges=!0,console.log("Processing Image Using Commands: ",e);var t=this.image.getAttribute("data-root")+"?"+serializeToQueryString(e),n=new Headers;n.set("Accept","application/json");var o={method:"GET",credentials:"same-origin",headers:n};console.log("Requesting URL: ",t,o),window.fetch(t,o).then(Oxygen.respond.checkStatus).then(function(e){return e.blob()}).then(function(e){null!=r.jCropApi&&r.jCropApi.destroy(),r.jCropApi=null,r.cropOrigin=r.pendingCropOrigin;var t=URL.createObjectURL(e);r.image.style.removeProperty("width"),r.image.style.removeProperty("height"),r.image.src=t}).then(function(e){NotificationCenter.present(new Notification({content:"Image Processing Successful",status:"success"})),r.applyingChanges=!1},function(e){throw r.applyingChanges=!1,e}).catch(Oxygen.respond.handleAPIError)}}},{key:"enableCropping",value:function(){var e=this;this.$image.Jcrop({trueSize:[this.image.naturalWidth,this.image.naturalHeight],onChange:this.handleCropSelect.bind(this),onSelect:this.handleCropSelect.bind(this),onRelease:this.handleCropRelease.bind(this)},function(){e.jCropApi=this})}},{key:"handleCropSelect",value:function(e){this.cropDisableCounter<=0?(this.fields.crop.x.value=Math.round(e.x+this.cropOrigin.x).toString(),this.fields.crop.y.value=Math.round(e.y+this.cropOrigin.y).toString(),this.fields.crop.width.value=Math.round(e.w).toString(),this.fields.crop.height.value=Math.round(e.h).toString()):this.cropDisableCounter--}},{key:"handleCropInputChange",value:function(){if(null!==this.jCropApi){var e=parseInt(""===this.fields.crop.x.value?0:this.fields.crop.x.value),t=parseInt(""===this.fields.crop.y.value?0:this.fields.crop.y.value),r=parseInt(""===this.fields.crop.width.value?0:this.fields.crop.width.value),n=parseInt(""===this.fields.crop.height.value?0:this.fields.crop.height.value);return this.cropDisableCounter=2,this.jCropApi.setSelect([e,t,e+r,t+n])}}},{key:"handleCropRelease",value:function(){this.fields.crop.x.value=0,this.fields.crop.y.value=0,this.fields.crop.width.value=0,this.fields.crop.height.value=0}},{key:"handleResizeInputChange",value:function(e){if(this.fields.resize.keepAspectRatio[0].checked){var t=e.target.name,r=e.target.value;return console.log(t,r),"resize[width]"===t?this.fields.resize.height.value=Math.round(r/this.imageAspectRatio):this.fields.resize.width.value=Math.round(r*this.imageAspectRatio.ratio)}}}],[{key:"initialize",value:function(e){var t,r=_createForOfIteratorHelper(e.querySelectorAll("."+o.classes.layout.container));try{for(r.s();!(t=r.n()).done;){var n=t.value;o.list.push(new o(n))}}catch(e){r.e(e)}finally{r.f()}}}]),o}();function serializeToQueryString(r){return Object.keys(r).reduce(function(e,t){return e.push(t+"="+encodeURIComponent(r[t])),e},[]).join("&")}ImageEditor.list=[],ImageEditor.classes={layout:{container:"ImageEditor",image:"ImageEditor-image"},button:{toggleFullscreen:"ImageEditor-toggleFullscreen",save:"ImageEditor-save",apply:"ImageEditor-apply"},form:{simple:"ImageEditor-form--simple",advanced:"ImageEditor-form--advanced",crop:"ImageEditor-crop-input",resize:"ImageEditor-resize-input"}},Oxygen=Oxygen||{},Oxygen.initLogin=function(){var t=document.querySelector(".Login-form");t.classList.add("Login--noTransition"),t.classList.add("Login--slideDown"),t.offsetHeight,t.classList.remove("Login--noTransition"),setTimeout(function(){document.body.classList.remove("Login--isHidden")},500),document.querySelector(".Login-scrollDown").addEventListener("click",function(){document.querySelector(".Login-message").classList.add("Login--slideUp"),t.classList.remove("Login--slideDown"),document.querySelector(".Login-background--blur").classList.add("Login--isHidden")});var e=t.querySelector("form");e.addEventListener("submit",function(){t.classList.add("Login--slideUp")}),e.modifyPromise=function(e){return e.then(function(e){return void 0!==e.status&&"success"!==e.status&&t.classList.remove("Login--slideUp"),e},function(e){throw t.classList.remove("Login--slideUp"),e})}},window.Oxygen||(window.Oxygen={}),Oxygen.reset=function(){return window.editors=[],Oxygen.load=[],Oxygen.setBodyScrollable(!0),Dropdown.handleGlobalClick({target:document.body})},Oxygen.setBodyScrollable=function(e){e?document.body.classList.remove("Body--noScroll"):document.body.classList.add("Body--noScroll")},Oxygen.init=function(e){NotificationCenter.initializeExistingMessages(),Dialog.registerEvents(e),ImageEditor.initialize(e),document.querySelector(".Login-form")&&Oxygen.initLogin(),Dropdown.registerEvents(e),EditableList.registerEvents(e),Form.findAll(e),Upload.registerEvents(e),TabSwitcher.findAll(e),Slider.findAll(e),"undefined"!=typeof editors&&null!==editors&&Editor.createEditors(editors);for(var t=Oxygen.load||[],r=0;r<t.length;r++)(0,t[r])()},document.addEventListener("DOMContentLoaded",function(){MainNav.headroom(),"undefined"!=typeof user&&null!==user&&Preferences.setPreferences(user),Oxygen.init(document),!0===Preferences.get("pageLoad.smoothState.enabled",!0)?(console.log("smoothstate enabled"),window.smoothState=new SmoothState,SmoothState.setTheme(Preferences.get("pageLoad.smoothState.theme","slide"))):console.log("smoothstate disabled");var e=Preferences.get("pageLoad.progress.theme",["minimal","spinner"]);console.log("Applying progress themes:",e);for(var t,r=0;r<e.length;r++)t=e[r],document.body.classList.add("Page-progress--"+t);Form.registerKeydownHandler(),Dropdown.registerGlobalEvent()});
//# sourceMappingURL=app.min.js.map
