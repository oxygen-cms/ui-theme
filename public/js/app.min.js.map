{"version":3,"sources":["util.js","Core/Dialog.js","Core/Dropdown.js","Core/EditableList.js","Core/Fetch.js","Core/Form.js","Core/MainNav.js","Core/Notification.js","Core/Preferences.js","Core/Slider.js","Core/SmoothState.js","Core/TabSwitcher.js","Core/Toggle.js","Core/Upload.js","Editor/CodeViewInterface.js","Editor/DesignViewInterface.js","Editor/Editor.js","Editor/PreviewInterface.js","Editor/SplitViewInterface.js","ImageEditor/ImageEditor.js","login.js","app.js"],"names":["parentMatchingSelector","elem","selector","document","parentNode","matchesSelector","parentOrSelfMatchingSelector","NodeList","prototype","Symbol","iterator","Array","HTMLCollection","matchesMethod","ElemProto","Element","matches","prefixes","i","length","prefix","method","Dialog","container","querySelectorAll","item","addEventListener","handleConfirmClick","handleAlertClick","event","vex","dialog","alert","currentTarget","getAttribute","customConfig","target","defaultConfig","preventDefault","stopPropagation","stopImmediatePropagation","message","callback","value","setAttribute","click","attribute","confirm","Dropdown","handleGlobalClick","classes","dropdownToggle","handleClick","c","classList","contains","dropdown","querySelector","dropdownList","isActive","remove","reset","add","EditableList","getElementsByClassName","handleAdd","handleRemove","template","template2","cloneNode","appendChild","row","removeChild","console","log","window","Oxygen","FetchOptions","headers","Headers","set","type","body","credentials","cookies","respond","text","response","json","checkStatus","ok","error","Error","notification","data","Notification","isNotification","NotificationCenter","present","redirect","smoothState","hardRedirect","load","location","replace","handleAPIError","Response","then","catch","err","content","status","file","line","Form","formObject","$","find","taggableInput","tagging","handleKeydown","ctrlKey","metaKey","which","forms","getElementsByTagName","form","submitOnKeydown","submit","element","originalData","getFormData","contentGenerators","registerEvents","warnBeforeExit","handleExit","handleSubmit","submitAsyncOnChange","submitAsync","autoSubmit","generateContent","formDataEqual","messages","confirmation","buttons","className","$vexContent","close","id","extend","NO","generator","disableAsync","ignoreRedirectResponse","saveData","promise","fetch","action","default","getFormDataObject","wantJson","modifyPromise","undefined","checked","name","dir","options","option","selected","push","ref","files","filesToUpload","formData","FormData","key","append","a","b","property","hasOwnProperty","altKey","controlKey","MainNav","header","innerWidth","headroom","Headroom","init","notifications","registerHide","hideAfter","auto","setTimeout","hide","clearTimeout","node","createElement","innerHTML","JSON","stringify","obj","Preferences","preferences","fallback","o","parts","split","last","pop","l","current","Slider","selectors","slider","list","items","total","interval","previousId","currentId","nextId","animating","animationTime","hideAll","next","play","back","previous","bind","forward","timer","setInterval","clearInterval","isHidden","shouldAnimate","getItem","allClasses","slideOutLeft","slideInRight","slideOutRight","slideInLeft","isCurrent","isAfter","noTransition","SmoothState","loading","anchors","root","cacheLength","onStart","duration","render","onProgress","onReady","onAfter","scrollTop","elements","blocks","slice","call","reverse","block","setCursor","style","display","html","getElementById","url","mode","cursor","links","theme","page","TabSwitcher","tabs","findDefault","tab","setTo","forEach","active","Toggle","toggle","enableCallback","disableCallback","handleToggle","ifEnabled","ifDisabled","FullscreenToggle","fullscreenElement","enterFullscreenCallback","exitFullscreenCallback","enterFullscreen","exitFullscreen","documentElement","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","mozCancelFullScreen","webkitExitFullscreen","Upload","uploadElement","dropzone","dropzoneElement","handleDragOver","handleDragLeave","handleDrop","handleChange","states","onDragOver","upload","addFiles","dataTransfer","input","imageType","preview","fileSize","size","insertBefore","firstChild","removeFile","button","index","previewElement","indexOf","splice","recalculateDropzoneVisibility","test","reader","FileReader","onload","e","backgroundImage","result","readAsDataURL","icon","multiple","sizeInBytes","approx","multiples","output","toFixed","CodeViewInterface","editor","ace","object","edit","getSession","setMode","language","setTheme","get","setUseWrapMode","setHighlightActiveLine","setShowPrintMargin","setShowInvisibles","setReadOnly","readOnly","view","fontSize","full","Editor","state","width","resize","setValue","textarea","getValue","DesignViewInterface","ck","config","contentsCss","stylesheets","CKEDITOR","on","setData","getData","editors","user","defaultMode","currentMode","handleSwitchEditor","handleFormSubmit","modes","fullscreenToggle","show","resizeToContent","switchEditor","valueToForm","m","getMode","code","design","PreviewInterface","SplitViewInterface","create","valueFromForm","height","rows","resizeToContainer","trace","editorToSwitch","footer","contentIsSplit","_token","srcdoc","synchronize","currentTimer","ImageEditor","jCropApi","cropDisableCounter","cropOrigin","x","y","image","layout","$image","simple","advanced","fields","crop","keepAspectRatio","macro","slug","imageAspectRatio","naturalWidth","naturalHeight","enableCropping","toggleFullscreen","apply","handlePreview","save","handleSave","handleCropInputChange","handleResizeInputChange","applyChanges","gatherData","progressNotification","getSimpleData","getAdvancedData","removeDefaultFields","toString","defaults","pendingCropOrigin","parseInt","parse","applyingChanges","serializeToQueryString","blob","destroy","objectURL","URL","createObjectURL","myBlob","removeProperty","src","that","Jcrop","trueSize","onChange","handleCropSelect","onSelect","onRelease","handleCropRelease","Math","round","w","h","setSelect","ratio","Object","keys","reduce","k","encodeURIComponent","join","initLogin","loginForm","offsetHeight","setBodyScrollable","scrollable","initializeExistingMessages","initialize","findAll","createEditors","setPreferences","progressThemes","registerKeydownHandler","registerGlobalEvent"],"mappings":"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","file":"app.min.js","sourcesContent":["/**\n * Get closest DOM element up the tree matches the selector\n * @param  {Node} elem The base element\n * @param  {String} selector The selector to look for\n * @return {Node} Null if no match\n */\nvar parentMatchingSelector = function (elem, selector) {\n\n    // Get closest match\n    for ( ; elem && elem !== document; elem = elem.parentNode ) {\n\n        if(elem.matchesSelector(selector)) {\n            return elem;\n        }\n    }\n\n    return null;\n};\n\nvar parentOrSelfMatchingSelector = function (elem, selector) {\n    if(elem.matchesSelector(selector)) {\n        return elem;\n    }\n\n    // Get closest match\n    for ( ; elem && elem !== document; elem = elem.parentNode ) {\n\n        if(elem.matchesSelector(selector)) {\n            return elem;\n        }\n    }\n\n    return null;\n};\n\nNodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\nHTMLCollection.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\n\nvar matchesMethod = (function() {\n    var ElemProto = Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n        return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n        return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n        var prefix = prefixes[i];\n        var method = prefix + 'MatchesSelector';\n        if ( ElemProto[ method ] ) {\n            return method;\n        }\n    }\n})();\n\nElement.prototype.matchesSelector = function(selector) {\n    return this[matchesMethod](selector);\n};\n","// ================================\n//            AjaxRequest\n// ================================\n\nclass Dialog {\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(\"[data-dialog-type=\\\"confirm\\\"]\")) {\n            item.addEventListener(\"click\", Dialog.handleConfirmClick);\n        }\n        for(let item of container.querySelectorAll(\"[data-dialog-type=\\\"alert\\\"]\")) {\n            item.addEventListener(\"click\", Dialog.handleAlertClick);\n        }\n    }\n\n    static handleAlertClick(event) {\n        vex.dialog.alert(event.currentTarget.getAttribute(\"data-dialog-message\"));\n    }\n\n    static handleConfirmClick(event, customConfig) {\n        var target = event.currentTarget;\n        if (!(target.getAttribute(\"data-dialog-disabled\") === \"true\")) {\n            var defaultConfig;\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n\n            defaultConfig = {\n                message: target.getAttribute(\"data-dialog-message\"),\n                callback(value) {\n                    if(value) {\n                        target.setAttribute(\"data-dialog-disabled\", \"true\");\n                        target.click();\n                    }\n                }\n            };\n\n            for (var attribute in customConfig) {\n                defaultConfig[attribute] = customConfig[attribute];\n            }\n\n            return vex.dialog.confirm(defaultConfig);\n        }\n    }\n};\n\n\n","// ================================\n//             Dropdown\n// ================================\n\nclass Dropdown {\n\n    static registerGlobalEvent() {\n        return document.addEventListener(\"click\", Dropdown.handleGlobalClick);\n    }\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(\".\" + Dropdown.classes.dropdownToggle)) {\n            item.addEventListener(\"click\", Dropdown.handleClick);\n        }\n    }\n\n    static handleClick(event) {\n        var c = event.target;\n        while (!c.classList.contains(Dropdown.classes.dropdownToggle)) {\n            if (c.matchesSelector(\"a[href], form\")) { return; }\n            c = c.parentNode;\n        }\n        var dropdown = c.querySelector(\".\" + Dropdown.classes.dropdownList);\n        if (dropdown.classList.contains(Dropdown.classes.isActive)) {\n            dropdown.classList.remove(Dropdown.classes.isActive);\n        } else {\n            Dropdown.reset();\n            dropdown.classList.add(Dropdown.classes.isActive);\n        }\n    }\n\n    static handleGlobalClick(event) {\n        if(parentMatchingSelector(event.target, \".\" + Dropdown.classes.dropdownToggle) == null) {\n            Dropdown.reset();\n        }\n    }\n\n    static reset(event) {\n        for(let item of document.querySelectorAll(\".\" + Dropdown.classes.dropdownList)) {\n            item.classList.remove(Dropdown.classes.isActive);\n        }\n    }\n\n};\n\nDropdown.classes = {\n    dropdownToggle: \"Dropdown-container\",\n    dropdownList: \"Dropdown\",\n    isActive: \"is-active\"\n};","// ================================\n//              Form\n// ================================\n\nclass EditableList {\n\n    static registerEvents(container) {\n        for(let item of container.getElementsByClassName(EditableList.classes.add)) {\n            item.addEventListener(\"click\", EditableList.handleAdd);\n        }\n        container.addEventListener(\"click\", EditableList.handleRemove);\n    }\n\n    static handleAdd(event) {\n        var container = event.currentTarget.parentNode.querySelector(\".\" + EditableList.classes.container);\n        var template = container.querySelector(\".\" + EditableList.classes.template);\n        var template2 = template.cloneNode(true);\n        template2.classList.remove(EditableList.classes.template);\n        container.appendChild(template2);\n    }\n\n    static handleRemove(event) {\n        let item = parentOrSelfMatchingSelector(event.target, \".\" + EditableList.classes.remove);\n        if(item) {\n            var row = parentMatchingSelector(event.target, \".\" + EditableList.classes.row);\n            if(row) {\n                row.parentNode.removeChild(row);\n                console.log('removed node');\n            }\n        }\n    }\n}\n\nEditableList.classes = {\n    container: \"EditableList\",\n    template: \"EditableList-template\",\n    row: \"EditableList-row\",\n    remove: \"EditableList-remove\",\n    add: \"EditableList-add\"\n};\n","// ================================\n//            AjaxRequest\n// ================================\n\nwindow.Oxygen || (window.Oxygen = {});\n\nclass FetchOptions {\n    constructor() {\n        this.headers = new Headers();\n    }\n    wantJson() {\n        this.headers.set(\"Accept\", \"application/json\");\n        return this;\n    }\n    contentType(type) {\n        this.headers.set(\"Content-Type\", type);\n        return this;\n    }\n    method(method) {\n        this.method = method;\n        return this;\n    }\n    body(body) {\n        this.body = body;\n        return this;\n    }\n    cookies() {\n        this.credentials = \"same-origin\";\n        return this;\n    }\n\n    static default() {\n        return (new FetchOptions()).cookies()\n    }\n}\n\nOxygen.respond = {};\n\nOxygen.respond.text = function(response) {\n    return response.text();\n}\nOxygen.respond.json = function(response) {\n    return response.json();\n}\n\nOxygen.respond.checkStatus = function(response) {\n    if(response.ok) {\n        return response;\n    } else {\n        let error = new Error();\n        error.response = response;\n        throw error;\n            /*.catch(error => {\n                response.text().then(text => {\n                    Oxygen.error.jsonParseError(error, text);\n                });\n                throw error;\n            })*/\n    }\n};\n\nOxygen.respond.notification = function(data) {\n    if(Notification.isNotification(data)) {\n        NotificationCenter.present(new Notification(data));\n    }\n    return data;\n};\n\nOxygen.respond.redirect = function(data) {\n    if(data.redirect) {\n        if (window.smoothState && !(data.hardRedirect === true)) {\n            window.smoothState.load(data.redirect, false);\n        } else {\n            window.location.replace(data.redirect);\n        }\n    }\n    return data;\n};\n\n// handle network errors\n// if(error.response.readyState === 0) {\n//     console.error(response);\n// }\n// Oxygen.error.jsonParseError = function(error, text) {\n//     console.error(\"Error while parsing JSON: \", error);\n//     console.log(\"Raw response: \", text);\n//\n//     new Notification({\n//         content: \"Could not parse JSON response. This is a bug.\",\n//         status: \"failed\"\n//     });\n// };\n\nOxygen.respond.handleAPIError = function(error) {\n    if(error.response && error.response instanceof Response) {\n        error.response\n            .json()\n            .then(Oxygen.handleAPIError)\n            .catch(err => {\n                console.error(\"Error response did not contain valid JSON: \", err);\n                NotificationCenter.present(new Notification({\n                    content: \"Whoops, looks like something went wrong.\",\n                    status: \"bug\"\n                }));\n            });\n    } else {\n        throw error;\n    }\n};\n\nOxygen.handleAPIError = function(content) {\n    console.error(content);\n    if(Notification.isNotification(content)) {\n        NotificationCenter.present(new Notification(content));\n    } else if(content.error) {\n        NotificationCenter.present(new Notification({\n            content:\n            \"PHP Exception of type <code class=\\\"no-wrap\\\">\" + content.error.type +\n            \"</code> with message <code class=\\\"no-wrap\\\">\" + content.error.message +\n            \"</code> thrown at <code class=\\\"no-wrap\\\">\" + content.error.file + \":\" + content.error.line +\n            \"</code>\",\n            status: \"bug\"\n        }));\n    } else {\n        console.log(\"JSON error response unhandled: \", content);\n\n        NotificationCenter.present(new Notification({\n            content: \"Whoops, looks like something went wrong.\",\n            status: \"bug\"\n        }));\n    }\n};\n","// ================================\n//              Form\n// ================================\n\n//\n// The Form helper can:\n// - display a message upon exit if there are any unsaved changes.\n// - send an async request with the form data on submit or change\n\nclass Form {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(\"form\")) {\n            item.formObject = new Form(item);\n        }\n\n        $(container).find(Form.classes.taggableInput).tagging({\n            \"edit-on-delete\": false\n        });\n    }\n\n    static registerKeydownHandler() {\n        return document.addEventListener(\"keydown\", Form.handleKeydown);\n    }\n\n    static handleKeydown(event) {\n        // check for Command/Control S\n        if ((event.ctrlKey || event.metaKey) && event.which === 83) {\n\n            var forms = document.getElementsByTagName(\"form\");\n            for (let i = 0; i < forms.length; i++) {\n                let form = forms[i];\n                if(form.classList.contains(Form.classes.submitOnKeydown) && form.formObject) {\n                    form.formObject.submit();\n                    event.preventDefault();\n                }\n            }\n        }\n    }\n\n    constructor(element) {\n        this.form = element;\n        this.originalData = getFormData(this.form);\n        //# content generators are notified before the form content is read\n        this.contentGenerators = [];\n        this.registerEvents();\n    }\n\n    registerEvents() {\n        // Exit Dialog\n        if (this.form.classList.contains(Form.classes.warnBeforeExit)) {\n            for(let item of document.querySelectorAll(\"a, button[type=\\\"submit\\\"]\")) {\n                item.addEventListener(\"click\", event => this.handleExit(event)); // displays exit dialog\n            }\n        }\n\n        // Submit asynchronously\n        this.form.addEventListener(\"submit\", event => this.handleSubmit(event));\n        if (this.form.classList.contains(Form.classes.submitAsyncOnChange)) {\n            this.form.addEventListener(\"change\", event => {\n                event.preventDefault();\n                this.submitAsync();\n            });\n        }\n\n        // Auto Submit\n        if (this.form.classList.contains(Form.classes.autoSubmit)) {\n            return this.submit();\n        }\n    }\n\n    handleExit(event) {\n        if (event.currentTarget.classList.contains(\"Form-submit\")) { return; }\n        this.generateContent();\n        console.log(getFormData(this.form));\n        console.log(this.originalData);\n        if(!formDataEqual(getFormData(this.form), this.originalData)) {\n            var target = event.currentTarget;\n\n            if (!(target.getAttribute(\"data-dialog-disabled\") === \"true\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                event.stopImmediatePropagation(),\n\n                vex.dialog.confirm({\n                    message:  Form.messages.confirmation,\n                    buttons: [\n                        {\n                            text: 'Save',\n                            type: 'button',\n                            className: 'vex-dialog-button-primary',\n                            click: function($vexContent, event) {\n                                $vexContent.data().vex.value = \"save\";\n                                vex.close($vexContent.data().vex.id);\n                            }\n                        },\n                        $.extend({}, vex.dialog.buttons.NO, {text: 'Cancel'}),\n                        {\n                            text: 'Don\\'t Save',\n                            type: 'button',\n                            className: 'vex-dialog-button-secondary vex-dialog-button-left',\n                            click: function($vexContent, event) {\n                                $vexContent.data().vex.value = \"continue\";\n                                vex.close($vexContent.data().vex.id);\n                            }\n                        }\n                    ],\n                    callback: (value) => {\n                        if(value == \"continue\") {\n                            target.setAttribute(\"data-dialog-disabled\", \"true\");\n                            return target.click();\n                        } else if(value == \"save\") {\n                            if (this.form.classList.contains(Form.classes.submitAsync)) {\n                                this.submitAsync(true);\n                                target.setAttribute(\"data-dialog-disabled\", \"true\");\n                                target.click();\n                            } else {\n                                // not sure if this works\n                                this.submit();\n                                //target.attr(\"data-dialog-disabled\", \"true\");\n                                //target.click();\n                            }\n                        }\n                    }\n                });\n            }\n        }\n    }\n\n    submit() {\n        this.form.querySelector('button[type=\"submit\"]').click();\n    }\n\n    generateContent() {\n        for (var generator of this.contentGenerators) {\n            generator(this);\n        }\n    }\n\n    handleSubmit(event) {\n        this.generateContent();\n        if (this.form.classList.contains(Form.classes.submitAsync) && !Form.disableAsync) {\n            event.preventDefault();\n            this.submitAsync();\n        }\n    }\n\n    submitAsync(ignoreRedirectResponse) {\n        var saveData = (data) => {\n            if (data.status === 'success') {\n                this.originalData = getFormData(this.form);\n                console.log('Form Saved Successfully');\n            }\n            return data;\n        };\n\n        let data = getFormData(this.form);\n        console.log(\"Submitting Form with Data: \", data);\n\n        var promise = window.fetch(\n            this.form.action,\n            FetchOptions.default()\n                .method(this.form.method)\n                .body(getFormDataObject(data))\n                .wantJson()\n        )\n            .then(Oxygen.respond.checkStatus)\n            .then(Oxygen.respond.json)\n            .then(saveData);\n\n        let modifyPromise = this.form.modifyPromise;\n        if(modifyPromise === undefined) {\n            modifyPromise = function(promise) { return promise; };\n        }\n\n        promise = promise.then(Oxygen.respond.notification);\n\n        if(!ignoreRedirectResponse) {\n            promise = promise.then(Oxygen.respond.redirect);\n        }\n\n        promise = modifyPromise(promise);\n        promise = promise.catch(Oxygen.respond.handleAPIError);\n\n        return promise;\n    }\n}\n\nfunction getFormData(form) {\n    var data = {};\n\n    for(let item of form.querySelectorAll(\"[name]\")) {\n        if(item.type == \"checkbox\" || item.type == \"radio\") {\n            if(!item.checked) {\n                continue;\n            }\n        }\n\n        if(item.name == undefined) {\n            console.dir(item);\n        }\n        if (item.type == \"select-multiple\") {\n            data[item.name] = [];\n            for(let option of item.options) {\n                if(option.selected) {\n                    data[item.name].push(option.value);\n                }\n            }\n        } else if(item.type == \"file\") {\n            var ref;\n            var files = ((ref = item.filesToUpload) != null) ? ref : item.files;\n            data[item.name] = [];\n            for (var i = 0, file; i < files.length; i++) {\n                file = files[i];\n                data[item.name].push(file);\n            }\n        } else {\n            data[item.name] = item.value;\n        }\n    }\n\n    return data;\n}\n\nfunction getFormDataObject(data) {\n    var formData = new FormData();\n\n    for(let key in data) {\n        if(data[key] instanceof Array) {\n            for(let value of data[key]) {\n                formData.append(key, value);\n            }\n        } else {\n            formData.append(key, data[key]);\n        }\n    }\n\n    return formData;\n}\n\nfunction formDataEqual(a, b) {\n    for(let property in b) {\n        if(b.hasOwnProperty(property)) {\n            if(a[property] !== b[property]) {\n                return false;\n            }\n        }\n    }\n    for(let property in a) {\n        if(a.hasOwnProperty(property)) {\n            if(a[property] !== b[property]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nForm.disableAsync = false;\n\n/**\n * Toggles whether asynchronous form submission is enabled globally, using Alt + Command/Control + J\n */\ndocument.addEventListener(\"keydown\", function(event) {\n    if(event.altKey && (event.controlKey || event.metaKey) && event.which == 74) {\n        Form.disableAsync = !Form.disableAsync;\n        event.preventDefault();\n        NotificationCenter.present(new Notification({\n            content: \"Asynchronous form submission \" + (Form.disableAsync ? \"disabled\" : \"enabled\"),\n            status: \"info\"\n        }));\n    }\n});\n\nForm.messages = {\n    confirmation: \"Do you want to save changes?\"\n};\n\nForm.classes = {\n    warnBeforeExit: \"Form--warnBeforeExit\",\n    submitOnKeydown: \"Form--submitOnKeydown\",\n    submitAsync: \"Form--sendAjax\",\n    submitAsyncOnChange: \"Form--sendAjaxOnChange\",\n    autoSubmit: \"Form--autoSubmit\",\n    taggableInput: \".Form-taggable\"\n};\n","// ================================\n//             MainNav\n// ================================\n\nclass MainNav {\n\n    static headroom() {\n        let header = document.querySelector(\".MainNav\");\n\n        if (header && window.innerWidth > 768) {\n            let headroom = new Headroom(header, {\n                \"tolerance\": 20,\n                \"offset\": 50,\n                \"classes\":\n                    {\"initial\": \"Headroom\",\n                    \"pinned\": \"Headroom--pinned\",\n                    \"unpinned\": \"Headroom--unpinned\",\n                    \"top\": \"Headroom--top\",\n                    \"notTop\": \"Headroom--not-top\"\n                    }\n            });\n            headroom.init();\n        }\n    }\n}","// ================================\n//             Notification\n// ================================\n\nclass NotificationCenter {\n    static initializeExistingMessages() {\n        let notifications = document\n            .querySelector(\".\" + Notification.classes.container)\n            .querySelectorAll(\".\" + Notification.classes.item)\n        for(let item of notifications) {\n            NotificationCenter.registerHide(new Notification({\n                message: item\n            }));\n        }\n    }\n\n    static present(notification) {\n        document\n            .querySelector(\".\" + Notification.classes.container)\n            .appendChild(notification.message);\n\n        NotificationCenter.registerHide(notification)\n    }\n\n    static registerHide(notification) {\n        if(notification.hideAfter != null) {\n            let auto = setTimeout(\n                function() { NotificationCenter.hide(notification); },\n                notification.hideAfter\n            );\n        }\n\n        notification.message.addEventListener(\n            \"click\",\n            event => {\n                NotificationCenter.hide(notification);\n                if(typeof auto !== 'undefined') {\n                    clearTimeout(auto);\n                }\n            }\n        );\n    }\n\n    static hide(notification) {\n        notification.message.classList.add(\"is-sliding-up\");\n        setTimeout(\n            function() {\n                let node = notification.message;\n                if(node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            500\n        );\n    }\n}\n\nclass Notification {\n    constructor(options) {\n        if (options.log) { console.log(options.log); }\n\n        this.hideAfter = 15 * 1000;\n\n        if (options.message) {\n            // Constructs a Notification object\n            // using a pre-existing message element.\n            this.message = options.message;\n            this.message.classList.remove(\"is-hidden\");\n        } else if (options.status && options.content) {\n            // Constructs a Notification object,\n            // creating a new message element.\n            this.message = document.createElement(\"div\");\n            this.message.classList.add(Notification.classes.item);\n            this.message.classList.add(\"Notification--\" + options.status);\n            if(options.status == \"failed\") {\n                this.hideAfter = null;\n            }\n            this.message.innerHTML = options.content +\n                \"<span class=\\\"Notification-dismiss Icon Icon-times\\\"></span>\";\n        } else {\n            throw new Error(\"Invalid Arguments For New Notification: \" + JSON.stringify(options));\n        }\n    }\n\n    static isNotification(obj) {\n        return obj.message !== undefined || (obj.content !== undefined && obj.status !== undefined);\n    }\n}\n\nNotification.classes = {\n    container: \"Notification-container\",\n    item: \"Notification\"\n};\n","// ================================\n//             Notification\n// ================================\n\nclass Preferences {\n\n    static setPreferences(preferences) {\n        return Preferences.preferences = preferences;\n    }\n\n    static get(key, fallback = null) {\n        var o = Preferences.preferences;\n\n        if(!(typeof o !== \"undefined\" && o !== null)) {\n            return fallback;\n        }\n\n        var parts = key.split('.');\n        var last = parts.pop();\n        var l = parts.length;\n        var i = 1;\n        var current = parts[0];\n\n        while((o = o[current]) && i < l) {\n            current = parts[i];\n            i++;\n        }\n\n        if (o) {\n            return o[last];\n        } else {\n            return fallback;\n        }\n    }\n\n    static has(key) {\n        var o = Preferences.preferences;\n\n        if(!o) {\n            return false;\n        }\n\n        var parts = key.split('.');\n        var last = parts.pop();\n        var l = parts.length;\n        var i = 1;\n        var current = parts[0];\n\n        while((o = o[current]) && i < l) {\n            current = parts[i];\n            i++;\n        }\n\n        return o;\n    }\n}\n\n\n","// ================================\n//            Slider\n// ================================\n\nclass Slider {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(Slider.selectors.slider)) {\n            Slider.list.push(new Slider(item));\n        }\n    }\n\n    // -----------------\n    //       Object\n    // -----------------\n\n    constructor(container) {\n        this.container = container;\n        this.list = this.container.querySelector(Slider.selectors.list);\n        this.items = this.container.querySelectorAll(Slider.selectors.item);\n\n        this.total = this.items.length;\n        this.interval = this.container.getAttribute(\"data-interval\") || 5000;\n\n        this.previousId = 0;\n        this.currentId = 0;\n        this.nextId = 0;\n        this.animating = false;\n        this.animationTime = 1000;\n\n        this.registerEvents();\n        this.hideAll();\n        this.next();\n\n        if (this.container.getAttribute(\"data-autoplay\") === \"true\") {\n            this.play();\n        }\n    }\n\n    registerEvents() {\n        this.container.querySelector(Slider.selectors.back).addEventListener(\"click\", this.previous.bind(this));\n        this.container.querySelector(Slider.selectors.forward).addEventListener(\"click\", this.next.bind(this));\n    }\n\n    play() {\n        var callback = this.container.getAttribute(\"data-direction\") === \"reverse\" ? this.previous.bind(this) : this.next.bind(this);\n        this.timer = setInterval(callback, this.interval);\n    }\n\n    pause() {\n        clearInterval(this.timer);\n    }\n\n    getItem(id) {\n        return this.list.querySelector(\":nth-child(\" + id + \")\");\n    }\n\n    hideAll() {\n        this.items.className = \"\";\n        this.items.classList.add(Slider.classes.item);\n        this.items.classList.add(Slider.classes.isHidden);\n    }\n\n    static allClasses() {\n        return Slider.classes.isHidden + \" \" + Slider.classes.slideInLeft + \" \" + Slider.classes.slideInRight + \" \" + Slider.classes.slideOutLeft + \" \" + Slider.classes.slideOutRight;\n    }\n\n    next() {\n        if (!this.shouldAnimate()) {\n            return false;\n        }\n\n        this.previousId = this.currentId;\n\n        this.currentId += 1;\n        if (this.currentId > this.total) {\n            this.currentId = 1;\n        }\n\n        this.nextId = this.currentId + 1;\n        if (this.nextId > this.total) {\n            this.nextId = 1\n        }\n\n        current = this.getItem(this.currentId);\n        previous = this.getItem(this.previousId);\n\n        this.hideAll();\n\n        for(item of Slider.allClasses()) {\n            previous.classList.remove(item);\n            current.classList.remove(item);\n        }\n        previous.classList.add(Slider.classes.slideOutLeft);\n        current.classList.add(Slider.classes.slideInRight);\n    }\n\n    previous() {\n        if (!this.shouldAnimate()) {\n            return false;\n        }\n\n        this.nextId = this.currentId;\n\n        this.currentId -= 1;\n        if (this.currentId < 1) {\n            this.currentId = this.total;\n        }\n\n        this.previousId = this.currentId - 1\n        if (this.nextId < 1) {\n            this.nextId = this.total\n        }\n\n        current = this.getItem(this.currentId);\n        next = this.getItem(this.nextId);\n\n        this.hideAll();\n\n        for(item of Slider.allClasses()) {\n            next.classList.remove(item);\n            current.classList.remove(item);\n        }\n        next.classList.add(Slider.classes.slideOutRight);\n        current.classList.add(Slider.classes.slideInLeft);\n    }\n\n    shouldAnimate() {\n        if (this.animating) {\n            return false;\n        }\n\n        this.animating = true;\n        setTimeout(\n            () => {\n                this.animating = false;\n            },\n            this.animationTime\n        );\n\n        return true;\n    }\n};\n\nSlider.selectors = {\n    slider: \".Slider\",\n    list: \".Slider-list\",\n    item: \".Slider-item\",\n    back: \".Slider-back\",\n    forward: \".Slider-forward\"\n};\n\nSlider.classes = {\n    item: \"Slider-item\",\n    isCurrent: \"Slider-item--current\",\n    isHidden: \"Slider-item--hidden\",\n    slideInLeft: \"Slider-item--slideInLeft\",\n    slideInRight: \"Slider-item--slideInRight\",\n    slideOutLeft: \"Slider-item--slideOutLeft\",\n    slideOutRight: \"Slider-item--slideOutRight\",\n    isAfter: \"Slider-item--after\",\n    noTransition: \"Slider--noTransition\"\n};\n\nSlider.list = [];","class SmoothState {\n    constructor() {\n        this.loading = false;\n        this.smoothState = $(\"#page\").smoothState({\n            anchors: \".Link--smoothState\",\n            root: $(document),\n            cacheLength: 0,\n            forms: \"null\",\n            onStart: {\n                duration: 350,\n                render: this.onStart\n            },\n            onProgress: {\n                duration: 0,\n                render: this.onProgress\n            },\n            onReady: {\n                duration: 0,\n                render: this.onReady\n            },\n            onAfter: this.onAfter\n        }).data('smoothState');\n    }\n\n    onStart(container) {\n        for(let item of document.querySelectorAll(\"html, body\")) { item.scrollTop = 0; }\n        this.loading = true;\n\n        var elements = document.getElementsByClassName('Block');\n        var blocks = Array.prototype.slice.call(elements);\n        blocks.reverse();\n        for(let i = 0; i < blocks.length; i++) {\n            let block = blocks[i];\n            setTimeout(function() {\n                return block.classList.add('Block--isExiting');\n            }, i * 50);\n        }\n\n        /*setTimeout(function() {\n            if(this.loading) {\n                return document.querySelector(\".pace-activity\").classList.add(\"pace-activity-active\");\n            }\n        }, blocks.length * 100);*/\n    }\n\n    onProgress(container) {\n        SmoothState.setCursor('wait');\n    };\n\n    static setCursor(mode) {\n        let items = document.querySelectorAll(\"html, body\");\n        for(let item of items) {\n            item.style.cursor = mode;\n        }\n        let links = document.querySelectorAll(\"a\");\n        for(let item of links) {\n            item.style.cursor = mode;\n        }\n    }\n\n    onReady(container, content) {\n        SmoothState.setCursor('auto');\n\n        Oxygen.reset();\n        container[0].style.display = 'none';\n        container.html(content);\n        document.querySelector(\".pace-activity\").classList.remove(\"pace-activity-active\");\n        let blocks = document.getElementsByClassName('Block');\n        for(var i = 0; i < blocks.length; i++) {\n            let block = blocks[i];\n            block.classList.add('Block--isHidden');\n            setTimeout(function() {\n                block.classList.remove('Block--isHidden');\n                block.classList.add('Block--isEntering');\n                setTimeout(function() {\n                    block.classList.remove('Block--isEntering');\n                }, 250);\n            }, i * 50);\n        }\n        container[0].style.display = 'block';\n    };\n\n    onAfter(container, content) {\n        this.loading = false;\n        //document.querySelector(\".pace-activity\").classList.remove(\"pace-activity-active\");\n        return Oxygen.init(document.getElementById(\"page\"));\n    };\n\n    static setTheme(theme) {\n        console.log(\"Setting SmoothState Theme: \", theme);\n        let page = document.getElementById(\"page\");\n        if(page) {\n            page.classList.add('Page-transition--' + theme);\n        }\n    };\n\n    load(url, push) {\n        return this.smoothState.load(url, push);\n    };\n\n}\n","// ================================\n//          ProgressBar\n// ================================\n\nclass TabSwitcher {\n\n    static findAll(container) {\n        for(let item of container.querySelectorAll(TabSwitcher.selectors.container)) {\n            console.log(item);\n            /*var tabs = $(item);\n            if (tabs.classList.contains(TabSwitcher.classes.content)) {\n                container = tabs;\n            } else {\n                container = tabs.parentNode.querySelector(\".\" + TabSwitcher.classes.content);\n            }\n\n            if (container.length === 0) { container = tabs.parentNode.parentNode.querySelector(\".\" + TabSwitcher.classes.content); }*/\n\n            let tabs = item.matchesSelector(TabSwitcher.selectors.tabs) ? item : item.querySelector(TabSwitcher.selectors.tabs);\n            let content = item.matchesSelector(TabSwitcher.selectors.content) ? item : item.querySelector(TabSwitcher.selectors.content);\n\n            TabSwitcher.list.push(new TabSwitcher(tabs, content));\n        }\n    }\n\n    // -----------------\n    //       Object\n    // -----------------\n\n    constructor(tabs, content) {\n        this.tabs = tabs;\n        this.content = content;\n        this.findDefault();\n        this.registerEvents();\n    }\n\n    findDefault() {\n        var tab = this.tabs.querySelector(\"[data-default-tab]\").getAttribute(\"data-switch-to-tab\");\n        this.setTo(tab);\n    }\n\n    registerEvents() {\n        this.tabs.querySelectorAll(\"[data-switch-to-tab]\").forEach(item => {\n            item.addEventListener(\"click\", event => {\n                this.setTo(event.currentTarget.getAttribute(\"data-switch-to-tab\"));\n            });\n        });\n    }\n\n    setTo(tab) {\n        this.current = tab;\n\n        for(let item of this.content.querySelectorAll(\"[data-tab]\")) {\n            item.classList.remove(TabSwitcher.classes.active);\n        }\n        this.content.querySelector(\"[data-tab=\\\"\" + tab + \"\\\"]\").classList.add(TabSwitcher.classes.active);\n\n        for(let item of this.tabs.querySelectorAll(\"[data-switch-to-tab]\")) {\n            item.classList.remove(TabSwitcher.classes.active);\n        }\n        this.tabs.querySelector(\"[data-switch-to-tab=\\\"\" + tab + \"\\\"]\").classList.add(TabSwitcher.classes.active);\n    }\n}\n\n// -----------------\n//       Static\n// -----------------\n\nTabSwitcher.classes = {\n    active: \"TabSwitcher--isActive\"\n};\n\nTabSwitcher.selectors = {\n    container: \".TabSwitcher\",\n    tabs: \".TabSwitcher-tabs\",\n    content: \".TabSwitcher-content\"\n}\n\nTabSwitcher.list = [];\n","// ================================\n//             Toggle\n// ================================\n\nclass Toggle {\n\n    constructor(toggle, enableCallback, disableCallback) {\n        this.toggle = toggle;\n        this.enableCallback = enableCallback;\n        this.disableCallback = disableCallback;\n\n        this.registerEvents();\n    }\n\n    registerEvents() {\n        this.toggle.addEventListener(\"click\", event => this.handleToggle(event));\n        if(this.toggle.getAttribute(\"data-enabled\") == undefined) {\n            this.toggle.setAttribute(\"data-enabled\", \"false\");\n        }\n    }\n\n    handleToggle(event) {\n        if (this.toggle.getAttribute(\"data-enabled\") === \"true\") {\n            this.toggle.setAttribute(\"data-enabled\", \"false\");\n            this.disableCallback(event);\n        } else {\n            this.toggle.setAttribute(\"data-enabled\", \"true\");\n            this.enableCallback(event);\n        }\n    }\n}\n\nToggle.classes = {\n    ifEnabled:  \"Toggle--ifEnabled\",\n    ifDisabled: \"Toggle--ifDisabled\"\n};\n\n// ================================\n//        FullscreenToggle\n// ================================\n\nclass FullscreenToggle extends Toggle {\n\n    constructor(toggle, fullscreenElement, enterFullscreenCallback = function() {}, exitFullscreenCallback = function() {}) {\n        super(toggle, null, null);\n        this.fullscreenElement = fullscreenElement;\n        this.enableCallback = this.enterFullscreen;\n        this.disableCallback = this.exitFullscreen;\n        this.enterFullscreenCallback = enterFullscreenCallback;\n        this.exitFullscreenCallback = exitFullscreenCallback;\n    }\n\n    enterFullscreen() {\n        this.fullscreenElement.classList.add(\"FullscreenToggle--isFullscreen\");\n        document.body.classList.add(\"Body--noScroll\");\n\n        var elem = document.documentElement;\n        if (elem.requestFullscreen) {\n            elem.requestFullscreen();\n        } else if (elem.msRequestFullscreen) {\n            elem.msRequestFullscreen();\n        } else if (elem.mozRequestFullScreen) {\n            elem.mozRequestFullScreen();\n        } else if (elem.webkitRequestFullscreen) {\n            elem.webkitRequestFullscreen();\n        }\n\n        (this.enterFullscreenCallback)();\n    }\n\n    exitFullscreen() {\n        this.fullscreenElement.classList.remove(\"FullscreenToggle--isFullscreen\");\n        document.body.classList.remove(\"Body--noScroll\");\n\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n\n        (this.exitFullscreenCallback)();\n    }\n}\n\n","class Upload {\n\n    static registerEvents(container) {\n        for(let item of container.querySelectorAll(Upload.selectors.uploadElement)) {\n            var dropzone = item.querySelector(Upload.selectors.dropzoneElement);\n            dropzone.addEventListener(\"dragover\", Upload.handleDragOver);\n            dropzone.addEventListener(\"dragleave\", Upload.handleDragLeave);\n            dropzone.addEventListener(\"drop\", Upload.handleDrop);\n            item.querySelector(\"input[type=file]\").addEventListener(\"change\", Upload.handleChange);\n        }\n    };\n\n    static handleDragOver(event) {\n        event.preventDefault();\n        return event.currentTarget.classList.add(Upload.states.onDragOver);\n    };\n\n    static handleDragLeave(event) {\n        return event.currentTarget.classList.remove(Upload.states.onDragOver);\n    };\n\n    static handleDrop(event) {\n        event.preventDefault();\n        event.currentTarget.classList.remove(Upload.states.onDragOver);\n        var upload = parentMatchingSelector(event.currentTarget, Upload.selectors.uploadElement);\n        Upload.addFiles(upload, event.dataTransfer.files);\n    };\n\n    static handleChange(event) {\n        Upload.addFiles(parentMatchingSelector(event.currentTarget, Upload.selectors.uploadElement), event.currentTarget.files);\n        console.dir(event.currentTarget);\n        event.currentTarget.value = \"\"; // reset the input field, so that the change event is always called.\n    };\n\n    static addFiles(upload, files) {\n        let input = upload.querySelector('input[type=\"file\"]');\n        for(let file of files) {\n            let imageType = /^image\\//;\n            console.log(file.type);\n            let preview = document.createElement(\"div\");\n            preview.classList.add(\"FileUpload-preview\");\n            preview.innerHTML = '<div class=\"FileUpload-preview-info\">' +\n                    '<span>' + file.name + '</span>' +\n                    '<button type=\"button\" class=\"FileUpload-preview-remove Button--transparent Icon Icon-times\"></button>' +\n                    '<span class=\"FileUpload-preview-size\">' + fileSize(file.size) + '</span>' +\n                '</div>';\n            upload.insertBefore(preview, upload.firstChild);\n            preview.querySelector(Upload.selectors.removeFile).addEventListener(\"click\", function(event) {\n                var button, index;\n                button = event.currentTarget;\n                preview = parentMatchingSelector(button, Upload.selectors.previewElement);\n                index = input.filesToUpload.indexOf(file);\n\n                if(index > -1) {\n                    input.filesToUpload.splice(index, 1)\n                }\n                Upload.recalculateDropzoneVisibility(upload, files);\n                preview.parentNode.removeChild(preview);\n            });\n            if (input.filesToUpload == null) {\n                input.filesToUpload = [];\n            }\n            input.filesToUpload.push(file);\n            if (imageType.test(file.type)) {\n                let reader = new FileReader();\n                reader.onload = function (e) {\n                    preview.style.backgroundImage = 'url(' + e.target.result + ')';\n                };\n                reader.readAsDataURL(file);\n            } else {\n                let container = document.createElement(\"div\");\n                container.classList.add(\"Icon-container\");\n                let icon = document.createElement(\"span\");\n                icon.classList.add(\"Icon\", \"Icon--gigantic\", \"Icon--light\", \"Icon-file-text\");\n                container.appendChild(icon);\n                preview.insertBefore(container, preview.firstChild);\n            }\n        }\n        Upload.recalculateDropzoneVisibility(upload);\n        console.log(files);\n    };\n\n    static recalculateDropzoneVisibility(upload, files) {\n        var input = upload.querySelector('input[type=\"file\"]');\n        var dropzone = upload.querySelector(Upload.selectors.dropzoneElement);\n        if(!input.multiple && input.filesToUpload.length > 0) {\n            dropzone.style.display = \"none\";\n        } else {\n            dropzone.style.display = \"block\";\n        }\n    }\n\n};\n\nUpload.selectors = {\n    uploadElement: \".FileUpload\",\n    previewElement: \".FileUpload-preview\",\n    dropzoneElement: \".FileUpload-dropzone\",\n    removeFile: \".FileUpload-preview-remove\"\n};\n\nUpload.states = {\n    onDragOver: \"FileUpload--onDragOver\"\n};\n\nfunction fileSize(sizeInBytes) {\n    var approx, multiple, multiples, output;\n    output = sizeInBytes + \" bytes\";\n    multiples = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    multiple = 0;\n    approx = sizeInBytes / 1024;\n    while (approx > 1) {\n        output = approx.toFixed(3) + ' ' + multiples[multiple];\n        approx /= 1024;\n        multiple++;\n    }\n    return output;\n}\n","// ================================\n//          CodeViewInterface\n// ================================\n\nclass CodeViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.ace = null;\n    }\n\n    create() {\n        // edit the textarea\n        var object = ace.edit(this.editor.name + \"-ace-editor\");\n\n        // set user preferences\n        object.getSession().setMode(\"ace/mode/\" + this.editor.language);\n        object.setTheme(Preferences.get('editor.ace.theme'));\n        object.getSession().setUseWrapMode(Preferences.get('editor.ace.wordWrap'));\n        object.setHighlightActiveLine(Preferences.get('user.editor.ace.highlightActiveLine'));\n        object.setShowPrintMargin(Preferences.get('editor.ace.showPrintMargin'));\n        object.setShowInvisibles(Preferences.get('editor.ace.showInvisibles'));\n        object.setReadOnly(this.editor.readOnly);\n\n        // store object\n        this.ace = object;\n        this.view = document.getElementById(this.editor.name + \"-ace-editor\");\n        this.view.style.fontSize = Preferences.get('editor.ace.fontSize');\n    }\n\n    show(full) {\n        this.view.classList.remove(Editor.classes.state.isHidden);\n        if (full) {\n            this.view.style.width = \"100%\";\n        }\n\n        // after animation is completed\n        setTimeout(() => {\n            this.resize();\n        }, 300);\n    }\n\n    hide() {\n        console.log(\"CodeViewInterface.hide\");\n        this.view.classList.add(Editor.classes.state.isHidden);\n    }\n\n    valueFromForm() {\n        this.ace.setValue(this.editor.textarea.value, -1);\n    }\n\n    valueToForm() {\n        this.editor.textarea.value = this.ace.getValue();\n    }\n\n    resize() {\n        this.ace.resize();\n    }\n}\n","// ================================\n//          DesignViewInterface\n//   ================================\n\nclass DesignViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.ck = null;\n    }\n\n    create() {\n        var config = Preferences.get('editor.ckeditor', {});\n        config.customConfig = config.customConfig || '';\n        config.contentsCss = this.editor.stylesheets;\n\n        // create instance\n        this.ck = CKEDITOR.replace(this.editor.name + \"-editor\", config);\n        this.ck.on(\"instanceReady\", event => {\n            this.view = document.getElementById(\"cke_\" + this.editor.name + \"-editor\");\n            //put your code here\n        });\n    }\n\n    show(full) {\n        this.ck.on(\"instanceReady\", event => {\n            this.view.style.display = \"block\";\n            if (full) {\n                this.view.style.width = \"100%\";\n            }\n        });\n    }\n\n    hide() {\n        this.view.style.display = \"none\";\n    }\n\n    valueFromForm() {\n        this.ck.setData(this.editor.textarea.value);\n    }\n\n    valueToForm() {\n        this.editor.textarea.value = this.ck.getData();\n    }\n}","// ================================\n//                 Editor\n// ================================\n\nclass Editor {\n\n    // only create if textarea exists\n    static createEditors(editors) {\n        for (var i = 0, editor; i < editors.length; i++) {\n            editor = editors[i];\n            var textarea = document.querySelector(\"textarea[name=\\\"\" + editor.name + \"\\\"]\");\n            if (textarea) {\n                console.log(\"Editor found\");\n                if (!(editor.mode != null)) { editor.mode = user.editor.defaultMode; }\n                console.log(editor);\n                var e = new Editor(editor.name, editor.language, editor.mode, editor.readOnly, editor.stylesheets);\n                Editor.list.push(e);\n            } else {\n                console.log(\"Editor not found\");\n                console.log(editor);\n            }\n        }\n    }\n\n    constructor(name, language, currentMode, readOnly, stylesheets = []) {\n        this.enterFullscreen = this.enterFullscreen.bind(this);\n        this.exitFullscreen = this.exitFullscreen.bind(this);\n        this.handleSwitchEditor = this.handleSwitchEditor.bind(this);\n        this.handleFormSubmit = this.handleFormSubmit.bind(this);\n        this.name = name;\n        this.language = language;\n        this.currentMode = currentMode;\n        this.readOnly = readOnly;\n        this.stylesheets = stylesheets;\n        this.modes = {};\n        this.textarea = document.querySelector(\"textarea[name=\\\"\" + this.name + \"\\\"]\");\n        this.container = parentMatchingSelector(this.textarea, \".\" + Editor.classes.editor.container);\n        var toggle = this.container.querySelector(\".\" + Editor.classes.button.fullscreenToggle);\n        if(toggle) {\n            this.fullscreenToggle = new FullscreenToggle(toggle, this.container, this.enterFullscreen, this.exitFullscreen);\n        }\n\n        this.show();\n        this.resizeToContent();\n        this.registerEvents();\n    }\n\n    getMode(mode) {\n        if (!(typeof mode !== \"undefined\" && mode !== null)) {\n            return this.currentMode;\n        } else {\n            return mode;\n        }\n    }\n\n    registerEvents() {\n        // switch editor button\n        for(let button of this.container.querySelectorAll(\".\" + Editor.classes.button.switchEditor)) {\n            button.addEventListener(\"click\", this.handleSwitchEditor);\n        }\n\n        // ask the form to tell us when its data is being read,\n        // so we can flush changes to the underlying <input>/<textarea> element\n        var form = parentMatchingSelector(this.container, \"form\");\n        if(form !== null && form.formObject) {\n            form.formObject.contentGenerators.push(form =>\n                this.valueToForm()\n            );\n        }\n    }\n\n    create(m) {\n        var mode = this.getMode(m);\n        switch (mode) {\n            case \"code\":\n                this.modes.code = new CodeViewInterface(this);\n                break;\n            case \"design\":\n                this.modes.design = new DesignViewInterface(this);\n                break;\n            case \"preview\":\n                this.modes.preview = new PreviewInterface(this);\n                break;\n            case \"split\":\n                this.modes.split = new SplitViewInterface(this);\n                break;\n        }\n        this.modes[mode].create();\n    }\n\n    show(m, full = true) {\n        var mode = this.getMode(m);\n        if (!(this.modes[mode] != null)) { this.create(mode); }\n        this.modes[mode].show(full);\n        this.currentMode = mode;\n        this.valueFromForm(mode);\n    }\n\n    hide(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].hide();\n        this.valueToForm(mode);\n    }\n\n    valueFromForm(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].valueFromForm();\n    }\n\n    valueToForm(m) {\n        var mode = this.getMode(m);\n        this.modes[mode].valueToForm();\n    }\n\n    resizeToContainer() {\n        // resize ace\n        if (this.modes.code) { this.modes.code.resize(); }\n    }\n\n    resizeToContent() {\n        // size to content\n        this.container.querySelector(\".\" + Editor.classes.editor.content).style.height = (this.textarea.rows * 1.5) + \"em\";\n\n        // resize ace\n        if (this.modes.code) { this.modes.code.resize(); }\n    }\n\n    // enter fullscreen\n    enterFullscreen() {\n        console.log(\"fullscreen\");\n        this.resizeToContainer();\n    }\n\n    // exit fullscreen\n    exitFullscreen() {\n        console.log(\"exit\");\n        console.trace();\n        this.resizeToContent();\n    }\n\n    handleSwitchEditor(event) {\n        console.log(\"Editor.handleSwitchEditor\");\n        var editorToSwitch = event.currentTarget.getAttribute(\"data-editor\");\n        this.hide();\n        return this.show(editorToSwitch);\n    }\n\n    handleFormSubmit() {\n        return this.valueToForm();\n    }\n}\n\nEditor.list = [];\nEditor.classes = {\n    editor: {\n        container: \"Editor\",\n        header: \"Editor-header\",\n        content: \"Editor-content\",\n        footer: \"Editor-footer\",\n        preview: \"Editor-preview\"\n    },\n    state: {\n        isHidden: \"Editor--hidden\",\n        contentIsSplit: \"Editor-content--isSplit\"\n    },\n    button: {\n        switchEditor: \"Editor--switchEditor\",\n        fullscreenToggle: \"Editor--toggleFullscreen\"\n    }\n};","// ================================\n//          PreviewInterface\n// ================================\n\nclass PreviewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.view = null;\n    }\n\n    create() {\n        var preview = document.createElement(\"iframe\");\n        preview.id = this.editor.name + \"-preview\";\n        preview.classList.add(Editor.classes.editor.preview);\n        this.editor.container.querySelector(\".Editor-content\").appendChild(preview);\n        this.view = preview;\n    }\n\n    show(full) {\n        let preview = document.getElementById(this.editor.name + \"-preview\")\n        preview.classList.remove(Editor.classes.state.isHidden);\n\n        if (full) {\n            preview.style.width = \"100%\";\n        }\n    }\n\n    hide() {\n        return document.getElementById(this.editor.name + \"-preview\").classList.add(Editor.classes.state.isHidden);\n    }\n\n    valueFromForm() {\n        let data = {\n            _token: this.editor.container.querySelector(\".contentPreviewCSRFToken\").value,\n            content: this.editor.textarea.value\n        };\n        let url = this.editor.container.querySelector(\".contentPreviewURL\").value;\n        let method = this.editor.container.querySelector(\".contentPreviewMethod\").value;\n        console.log(\"Generating content using data \", data);\n        var promise = window.fetch(\n            url,\n            FetchOptions.default()\n                .method(method)\n                .body(getFormDataObject(data))\n        )\n            .then(Oxygen.respond.checkStatus)\n            .then(Oxygen.respond.text)\n            .then((data) => {\n                this.view.srcdoc = data;\n            }).catch(Oxygen.respond.handleAPIError);\n    }\n\n    // we can't and don't want to do this\n    valueToForm() {}\n}\n","// ==========================\n//     SplitViewInterface\n// ==========================\n\nclass SplitViewInterface {\n\n    constructor(editor) {\n        this.editor = editor;\n        this.view = null;\n    }\n\n    create() {\n    }\n\n    show() {\n        var items = this.editor.container.querySelectorAll(\".\" + Editor.classes.editor.content);\n        for(let item of items) {\n            item.classList.add(Editor.classes.state.contentIsSplit);\n        }\n\n        var e = this.editor;\n\n        e.show(\"code\", false);\n        e.show(\"preview\", false);\n        e.modes.code.view.style.width = \"50%\";\n        e.modes.preview.view.style.width = \"50%\";\n        e.modes.code.ace.addEventListener(\"change\", this.synchronize.bind(this));\n    }\n\n    hide() {\n        var items = this.editor.container.querySelectorAll(\".\" + Editor.classes.editor.content);\n        for(let item of items) {\n            item.classList.remove(Editor.classes.state.contentIsSplit);\n        }\n\n        this.editor.hide(\"code\");\n        this.editor.hide(\"preview\");\n    }\n\n    valueFromForm() {\n    }\n\n    valueToForm() {\n    }\n\n    synchronize() {\n        if(this.currentTimer) {\n            clearTimeout(this.currentTimer);\n        }\n        this.currentTimer = setTimeout(() => {\n            if(this.editor.currentMode === \"split\") {\n                this.editor.valueToForm(\"code\");\n                this.editor.valueFromForm(\"preview\");\n            }\n        }, 1000);\n    }\n}\n","// ================================\n//             ImageEditor\n// ================================\n\nclass ImageEditor {\n\n    // -----------------\n    //      Object\n    // -----------------\n\n    constructor(container) {\n        this.container = container;\n        this.jCropApi = null;\n        this.cropDisableCounter = 0;\n        this.cropOrigin = { x: 0, y: 0 };\n        this.image = this.container.querySelector(\".\" + ImageEditor.classes.layout.image);\n        this.$image = $(this.image);\n        if (!this.image) { throw new Error(\"<img> element doesn't exist\"); }\n\n        this.forms = {\n            simple: this.image.parentNode.parentNode.querySelector(\".\" + ImageEditor.classes.form.simple),\n            advanced: this.image.parentNode.parentNode.querySelector(\".\" + ImageEditor.classes.form.advanced)\n        };\n\n        this.fields = {\n            crop: {\n                x: this.container.querySelector('[name=\"crop[x]\"]'),\n                y: this.container.querySelector('[name=\"crop[y]\"]'),\n                width: this.container.querySelector('[name=\"crop[width]\"]'),\n                height: this.container.querySelector('[name=\"crop[height]\"]')\n            },\n            resize: {\n                width: this.container.querySelector('[name=\"resize[width]\"]'),\n                height: this.container.querySelector('[name=\"resize[height]\"]'),\n                keepAspectRatio: this.container.querySelector('[name=\"resize[keepAspectRatio]\"][value=\"true\"]')\n            },\n            macro: this.container.querySelector('[name=\"macro\"]'),\n            name: this.container.querySelector('[name=\"name\"]'),\n            slug: this.container.querySelector('[name=\"slug\"]')\n        };\n\n        this.image.addEventListener(\"load\", (event) => {\n            console.log('Image Loaded');\n            let image = event.currentTarget;\n            this.imageAspectRatio = image.naturalWidth / image.naturalHeight;\n            this.fields.resize.width.value = image.naturalWidth;\n            this.fields.resize.height.value = image.naturalHeight;\n            this.enableCropping();\n        });\n\n        this.fullscreenToggle = new FullscreenToggle(this.container.querySelector(\".\" + ImageEditor.classes.button.toggleFullscreen), this.container);\n\n        this.container.querySelector(\".\" + ImageEditor.classes.button.apply).addEventListener(\"click\", this.handlePreview.bind(this));\n        this.container.querySelector(\".\" + ImageEditor.classes.button.save).addEventListener(\"click\", this.handleSave.bind(this));\n        this.container.querySelectorAll(\".\" + ImageEditor.classes.form.crop).forEach(item => {\n            item.addEventListener(\"input\", this.handleCropInputChange.bind(this));\n        })\n        this.container.querySelectorAll(\".\" + ImageEditor.classes.form.resize).forEach(item => {\n            item.addEventListener(\"input\", this.handleResizeInputChange.bind(this));\n        })\n    }\n\n    handlePreview() {\n        this.applyChanges(this.gatherData());\n    }\n\n    handleSave() {\n        var data = this.gatherData();\n        data.save = true;\n        data.name = this.fields.name.value;\n        data.slug = this.fields.slug.value;\n        this.applyChanges(data);\n\n        this.progressNotification = new Notification({\n            content: \"Saving Image\",\n            status: \"success\"\n        });\n        NotificationCenter.present(this.progressNotification);\n    }\n\n    gatherData() {\n        var mode = TabSwitcher.list[0].current;\n        switch (mode) {\n            case \"simple\": return this.getSimpleData();\n            case \"advanced\": return this.getAdvancedData();\n            default: return {};\n        }\n    }\n\n    getSimpleData() {\n        return this.removeDefaultFields(getFormData(this.forms.simple));\n    }\n\n    removeDefaultFields(formData) {\n        var resize = (formData) => {\n            return (!formData[\"resize[width]\"] || formData[\"resize[width]\"] === this.image.naturalWidth.toString()) &&(!formData[\"resize[height]\"] || formData[\"resize[height]\"] === this.image.naturalHeight.toString());\n        };\n\n        var defaults = {\n            \"fit[position]\": (item) => {\n                return item === \"center\";\n            },\n            \"resize[width]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"resize[height]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"resize[keepAspectRatio]\": (item, formData) => {\n                return resize(formData);\n            },\n            \"gamma\": (item) => {\n                return item === \"1\";\n            },\n            \"greyscale\": (item) => {\n                return item === \"false\";\n            },\n            \"invert\": (item) => {\n                return item === \"false\";\n            },\n            \"rotate[backgroundColor]\": (item) => {\n                return item === \"#ffffff\";\n            },\n            \"crop[x]\": (item) => {\n                //return item === \"\"  0 : parseInt(item)\n                if(this.pendingCropOrigin === undefined) { this.pendingCropOrigin = {}; }\n                this.pendingCropOrigin.x = parseInt(item);\n            },\n            \"crop[y]\": (item) => {\n                if(this.pendingCropOrigin === undefined) { this.pendingCropOrigin = {}; }\n                this.pendingCropOrigin.y = parseInt(item);\n                //this.imageDimensions.cropY = item === \"\" ? 0 : parseInt(item);\n            }\n        };\n\n        for (var key in formData) {\n            var item = formData[key];\n            if(defaults[key] && defaults[key](item, formData)) {\n                delete formData[key];\n            } else if(item === \"0\" || item === \"\") {\n                delete formData[key];\n            }\n        }\n\n        return formData;\n    }\n\n    getAdvancedData() {\n        return JSON.parse(this.fields.macro.value);\n    }\n\n    // --------------------------------------------\n    //                     REQUEST\n    // --------------------------------------------\n\n    applyChanges(data) {\n        if(this.applyingChanges) {\n            NotificationCenter.present(new Notification({\n                content: \"Already Processing\",\n                status: \"failed\"\n            }));\n            return;\n        } else {\n            this.progressNotification = new Notification({\n                content: \"Processing Image\",\n                status: \"success\"\n            });\n            NotificationCenter.present(this.progressNotification);\n        }\n\n        this.applyingChanges = true;\n\n        console.log(\"Processing Image Using Commands: \", data);\n\n        window.fetch(\n            this.image.getAttribute(\"data-root\") + \"?\" + serializeToQueryString(data),\n            FetchOptions.default()\n                .method(\"GET\")\n                .wantJson()\n        )\n            .then(Oxygen.respond.checkStatus)\n            .then(response => {\n                return response.blob();\n            })\n            .then(myBlob => {\n                if ((this.jCropApi != null)) { this.jCropApi.destroy(); }\n                this.jCropApi = null;\n                this.cropOrigin = this.pendingCropOrigin;\n\n                let objectURL = URL.createObjectURL(myBlob);\n                this.image.style.removeProperty('width');\n                this.image.style.removeProperty('height');\n                this.image.src = objectURL;\n\n                //this.image[0].src = \"data:image/jpeg;base64,\" + base64Encode(response);\n            })\n            .then(\n                r => {\n                    NotificationCenter.present(new Notification({content: \"Image Processing Successful\", status: \"success\"}));\n                    this.applyingChanges = false;\n                },\n                e => {\n                    this.applyingChanges = false; throw e;\n                }\n            )\n            .catch(Oxygen.respond.handleAPIError);\n        /*$.ajax({\n            type:           \"GET\",\n            url:            this.image.attr(\"data-root\"),\n            data:           data,\n            contentType:    false,\n            success:        this.onRequestEnd.bind(this),\n            error:          () => {\n                //this.progressNotification.hide();\n                //return Ajax.handleError();\n            },\n            xhr:            () => {\n                var object = window.ActiveXObject ? new ActiveXObject(\"XMLHttp\") : new XMLHttpRequest();\n                object.overrideMimeType(\"text/plain; charset=x-user-defined\");\n                return object;\n            }\n        });*/\n    }\n\n    // --------------------------------------------\n    //                     CROP\n    // --------------------------------------------\n\n    enableCropping() {\n        /*if(this.jCropApi != null) {\n            this.jCropApi.enable();\n        } else {*/\n            var that = this;\n            this.$image.Jcrop({\n                    trueSize: [this.image.naturalWidth, this.image.naturalHeight],\n                    onChange: this.handleCropSelect.bind(this),\n                    onSelect: this.handleCropSelect.bind(this),\n                    onRelease: this.handleCropRelease.bind(this)\n                }, function() {\n                    that.jCropApi = this;\n                }\n            );\n        //}\n    }\n\n    handleCropSelect(c) {\n        if(this.cropDisableCounter <= 0) {\n            this.fields.crop.x.value = Math.round(c.x + this.cropOrigin.x).toString();\n            this.fields.crop.y.value = Math.round(c.y + this.cropOrigin.y).toString();\n            this.fields.crop.width.value = Math.round(c.w).toString();\n            this.fields.crop.height.value = Math.round(c.h).toString();\n        } else {\n            this.cropDisableCounter--;\n        }\n    }\n\n    handleCropInputChange(event) {\n        if(this.jCropApi === null) { return; }\n        let x = parseInt(this.fields.crop.x.value === \"\" ? 0 : this.fields.crop.x.value);\n        let y = parseInt(this.fields.crop.y.value === \"\" ? 0 : this.fields.crop.y.value);\n        let w = parseInt(this.fields.crop.width.value === \"\" ? 0 : this.fields.crop.width.value);\n        let h = parseInt(this.fields.crop.height.value === \"\" ? 0 : this.fields.crop.height.value);\n\n        // this counts down from 2, so the next two events generated by Jcrop are ignored.\n        this.cropDisableCounter = 2;\n\n        return this.jCropApi.setSelect([\n            x,\n            y,\n            x + w,\n            y + h\n        ]);\n        console.log(\"end\");\n    }\n\n    handleCropRelease() {\n        this.fields.crop.x.value = 0;\n        this.fields.crop.y.value = 0;\n        this.fields.crop.width.value = 0;\n        this.fields.crop.height.value = 0;\n    }\n\n    handleResizeInputChange(e) {\n        if(this.fields.resize.keepAspectRatio[0].checked) {\n            var name = e.target.name;\n            var value = e.target.value;\n            console.log(name, value);\n            if(name === 'resize[width]') {\n                return this.fields.resize.height.value = Math.round(value / this.imageAspectRatio);\n            } else {\n                return this.fields.resize.width.value = Math.round(value * this.imageAspectRatio.ratio);\n            }\n        }\n    }\n\n    static initialize(container) {\n        for(let item of container.querySelectorAll(\".\" + ImageEditor.classes.layout.container)) {\n            ImageEditor.list.push(new ImageEditor(item));\n        }\n    }\n\n};\n\nfunction serializeToQueryString(object) {\n    return Object.keys(object).reduce(function(a,k){a.push(k+'='+encodeURIComponent(object[k]));return a},[]).join('&');\n}\n\nImageEditor.list = [];\n\nImageEditor.classes = {\n    layout: {\n        container: \"ImageEditor\",\n        image: \"ImageEditor-image\"\n    },\n    button: {\n        toggleFullscreen: \"ImageEditor-toggleFullscreen\",\n        save: \"ImageEditor-save\",\n        apply: \"ImageEditor-apply\"\n    },\n    form: {\n        simple: \"ImageEditor-form--simple\",\n        advanced: \"ImageEditor-form--advanced\",\n        crop: \"ImageEditor-crop-input\",\n        resize: \"ImageEditor-resize-input\"\n    }\n};\n","Oxygen || (Oxygen = {});\nOxygen.initLogin = function() {\n    var loginForm = document.querySelector(\".Login-form\");\n    loginForm.classList.add(\"Login--noTransition\");\n    loginForm.classList.add(\"Login--slideDown\");\n\n    loginForm.offsetHeight;\n    loginForm.classList.remove(\"Login--noTransition\");\n\n    setTimeout(function() {\n        document.body.classList.remove(\"Login--isHidden\");\n    }, 500);\n\n    document.querySelector(\".Login-scrollDown\").addEventListener(\"click\", function() {\n        document.querySelector(\".Login-message\").classList.add(\"Login--slideUp\");\n        loginForm.classList.remove(\"Login--slideDown\");\n        document.querySelector(\".Login-background--blur\").classList.add(\"Login--isHidden\");\n    });\n\n    let form = loginForm.querySelector(\"form\");\n\n    form.addEventListener(\"submit\", function() {\n        loginForm.classList.add(\"Login--slideUp\");\n    });\n\n    form.modifyPromise = function(promise) {\n        return promise.then(\n            function(data) {\n                if(data.status !== undefined && data.status !== \"success\") {\n                    loginForm.classList.remove(\"Login--slideUp\");\n                }\n                return data;\n            },\n            function(error) {\n                loginForm.classList.remove(\"Login--slideUp\");\n                throw error;\n            }\n        );\n    };\n};\n","window.Oxygen || (window.Oxygen = {});\nOxygen.reset = function() {\n    window.editors = [];\n    Oxygen.load = [];\n    Oxygen.setBodyScrollable(true);\n    return Dropdown.handleGlobalClick({ target: document.body });\n};\n\nOxygen.setBodyScrollable = function(scrollable) {\n    if (scrollable) {\n        document.body.classList.remove(\"Body--noScroll\");\n    } else {\n        document.body.classList.add(\"Body--noScroll\");\n    }\n};\n\nOxygen.init = function(container) {\n\n    //\n    // -------------------------\n    //       FLASH MESSAGE\n    // -------------------------\n    //\n    // This small delay helps to\n    // reduce lag on page load.\n    //\n\n    NotificationCenter.initializeExistingMessages();\n\n    Dialog.registerEvents(container);\n\n    //\n    // -------------------------\n    //       IMAGE EDITOR\n    // -------------------------\n    //\n    // Initialises image editors for the page.\n    //\n\n    ImageEditor.initialize(container);\n\n    //\n    // -------------------------\n    //           LOGIN\n    // -------------------------\n    //\n    // Login form animations.\n    //\n\n    if(document.querySelector(\".Login-form\")) {\n        Oxygen.initLogin();\n    }\n\n    //\n    // -------------------------\n    //           OTHER\n    // -------------------------\n    //\n    // Other event handlers.\n    //\n\n    Dropdown.registerEvents(container);\n    EditableList.registerEvents(container);\n    Form.findAll(container);\n    Upload.registerEvents(container);\n    TabSwitcher.findAll(container);\n    Slider.findAll(container);\n\n    //\n    // -------------------------\n    //       CODE EDITOR\n    // -------------------------\n    //\n    // Initialises code editors for the page.\n    //\n\n    if ((typeof editors !== \"undefined\" && editors !== null)) {\n        Editor.createEditors(editors);\n    }\n\n    let load = Oxygen.load || [];\n    for (let i = 0, callback; i < load.length; i++) {\n        callback = load[i];\n        callback();\n    }\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    MainNav.headroom();\n\n    if ((typeof user !== \"undefined\" && user !== null)) {\n        Preferences.setPreferences(user);\n    }\n\n    Oxygen.init(document);\n\n    if (Preferences.get('pageLoad.smoothState.enabled', true) === true) {\n        window.smoothState = new SmoothState();\n        SmoothState.setTheme(Preferences.get('pageLoad.smoothState.theme', 'slide'));\n    }\n\n    let progressThemes = Preferences.get('pageLoad.progress.theme', [\"minimal\", \"spinner\"]);\n    console.log(\"Applying progress themes:\", progressThemes);\n    for (let i = 0, theme; i < progressThemes.length; i++) {\n        theme = progressThemes[i];\n        document.body.classList.add(\"Page-progress--\" + theme);\n    }\n\n    Form.registerKeydownHandler();\n    Dropdown.registerGlobalEvent();\n});\n"]}